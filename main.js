/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => GitAutoCommitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");
var import_child_process = require("child_process");
var import_util = require("util");

// data-manager.ts
var DEFAULT_PLUGIN_DATA = {
  settings: {
    defaultCommitScope: "all",
    defaultMessageType: "ai",
    pushToRemote: true,
    remoteBranch: "main",
    autoCommit: false,
    includeFileTypes: [".md", ".txt", ".canvas", ".json"],
    excludePatterns: [".obsidian/", "node_modules/", ".git/"],
    showNotifications: true
  },
  models: {
    configs: [],
    defaultModelId: null
  },
  preferences: {},
  version: "1.0.0",
  lastModified: Date.now()
};
var DataManager = class {
  constructor(app, pluginDir) {
    this.app = app;
    this.dataFile = `${pluginDir}/plugin-data.json`;
    this.data = { ...DEFAULT_PLUGIN_DATA };
  }
  /**
   * 初始化数据管理器
   */
  async initialize() {
    try {
      await this.loadData();
      await this.migrateOldData();
    } catch (error) {
      console.log("Git Auto Commit - \u6570\u636E\u6587\u4EF6\u4E0D\u5B58\u5728\u6216\u635F\u574F\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u6570\u636E");
      this.data = { ...DEFAULT_PLUGIN_DATA };
      await this.saveData();
    }
  }
  /**
   * 从文件加载数据
   */
  async loadData() {
    try {
      const fileExists = await this.app.vault.adapter.exists(this.dataFile);
      if (!fileExists) {
        console.log("Git Auto Commit - \u6570\u636E\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E");
        this.data = { ...DEFAULT_PLUGIN_DATA };
        return;
      }
      const fileContent = await this.app.vault.adapter.read(this.dataFile);
      const loadedData = JSON.parse(fileContent);
      this.data = this.mergeWithDefaults(loadedData);
      console.log("Git Auto Commit - \u6570\u636E\u52A0\u8F7D\u6210\u529F");
    } catch (error) {
      console.error("Git Auto Commit - \u52A0\u8F7D\u6570\u636E\u5931\u8D25:", error);
      throw error;
    }
  }
  /**
   * 保存数据到文件
   */
  async saveData() {
    try {
      this.data.lastModified = Date.now();
      const jsonContent = JSON.stringify(this.data, null, 2);
      await this.app.vault.adapter.write(this.dataFile, jsonContent);
      console.log("Git Auto Commit - \u6570\u636E\u4FDD\u5B58\u6210\u529F");
    } catch (error) {
      console.error("Git Auto Commit - \u4FDD\u5B58\u6570\u636E\u5931\u8D25:", error);
      throw error;
    }
  }
  /**
   * 合并默认数据，确保数据结构完整
   */
  mergeWithDefaults(loadedData) {
    const merged = { ...DEFAULT_PLUGIN_DATA };
    if (loadedData) {
      if (loadedData.settings) {
        merged.settings = { ...merged.settings, ...loadedData.settings };
      }
      if (loadedData.models) {
        merged.models = {
          configs: loadedData.models.configs || [],
          defaultModelId: loadedData.models.defaultModelId || null
        };
      }
      if (loadedData.preferences) {
        merged.preferences = { ...loadedData.preferences };
      }
      if (loadedData.version) {
        merged.version = loadedData.version;
      }
    }
    return merged;
  }
  /**
   * 从旧的存储方式迁移数据
   */
  async migrateOldData() {
    let hasMigration = false;
    try {
      const oldModels = localStorage.getItem("git-auto-commit-models");
      const oldDefaultModel = localStorage.getItem("git-auto-commit-default-model");
      if (oldModels && this.data.models.configs.length === 0) {
        const parsedModels = JSON.parse(oldModels);
        this.data.models.configs = parsedModels.map((model) => ({
          ...model,
          encodedApiKey: this.encodeApiKey(model.apiKey)
          // 编码API密钥
        }));
        if (oldDefaultModel) {
          this.data.models.defaultModelId = oldDefaultModel;
        }
        hasMigration = true;
        console.log("Git Auto Commit - \u8FC1\u79FB\u4E86\u6A21\u578B\u914D\u7F6E\u6570\u636E");
      }
      if (hasMigration) {
        localStorage.removeItem("git-auto-commit-models");
        localStorage.removeItem("git-auto-commit-default-model");
        await this.saveData();
        console.log("Git Auto Commit - \u6570\u636E\u8FC1\u79FB\u5B8C\u6210\uFF0C\u5DF2\u6E05\u7406\u65E7\u5B58\u50A8");
      }
    } catch (error) {
      console.warn("Git Auto Commit - \u6570\u636E\u8FC1\u79FB\u8FC7\u7A0B\u4E2D\u51FA\u73B0\u9519\u8BEF:", error);
    }
  }
  /**
   * 编码API密钥
   */
  encodeApiKey(apiKey) {
    if (!apiKey)
      return "";
    try {
      return btoa(unescape(encodeURIComponent(apiKey)));
    } catch (error) {
      console.error("Git Auto Commit - API\u5BC6\u94A5\u7F16\u7801\u5931\u8D25:", error);
      return apiKey;
    }
  }
  /**
   * 解码API密钥
   */
  decodeApiKey(encodedApiKey) {
    if (!encodedApiKey)
      return "";
    try {
      return decodeURIComponent(escape(atob(encodedApiKey)));
    } catch (error) {
      console.error("Git Auto Commit - API\u5BC6\u94A5\u89E3\u7801\u5931\u8D25:", error);
      return encodedApiKey;
    }
  }
  // ========== 插件设置相关方法 ==========
  /**
   * 获取插件设置
   */
  getSettings() {
    return { ...this.data.settings };
  }
  /**
   * 更新插件设置
   */
  async updateSettings(newSettings) {
    this.data.settings = { ...this.data.settings, ...newSettings };
    await this.saveData();
  }
  // ========== 模型配置相关方法 ==========
  /**
   * 获取所有模型配置
   */
  getAllModels() {
    return [...this.data.models.configs];
  }
  /**
   * 获取已验证的模型
   */
  getVerifiedModels() {
    return this.data.models.configs.filter((model) => model.isVerified);
  }
  /**
   * 根据ID获取模型
   */
  getModelById(id) {
    return this.data.models.configs.find((model) => model.id === id) || null;
  }
  /**
   * 添加新模型
   */
  async addModel(config) {
    const now = Date.now();
    const newModel = {
      id: this.generateId(),
      ...config,
      encodedApiKey: this.encodeApiKey(config.apiKey),
      isVerified: false,
      createdAt: now,
      lastModified: now
    };
    this.data.models.configs.push(newModel);
    await this.saveData();
    return newModel.id;
  }
  /**
   * 更新模型配置
   */
  async updateModel(id, updates) {
    const index = this.data.models.configs.findIndex((model) => model.id === id);
    if (index === -1)
      return false;
    const updateData = { ...updates };
    if (updates.apiKey) {
      updateData.encodedApiKey = this.encodeApiKey(updates.apiKey);
      delete updateData.apiKey;
    }
    this.data.models.configs[index] = {
      ...this.data.models.configs[index],
      ...updateData,
      lastModified: Date.now()
    };
    await this.saveData();
    return true;
  }
  /**
   * 删除模型
   */
  async deleteModel(id) {
    const index = this.data.models.configs.findIndex((model) => model.id === id);
    if (index === -1)
      return false;
    this.data.models.configs.splice(index, 1);
    if (this.data.models.defaultModelId === id) {
      this.data.models.defaultModelId = null;
    }
    await this.saveData();
    return true;
  }
  /**
   * 设置默认模型
   */
  async setDefaultModel(id) {
    const model = this.getModelById(id);
    if (!model || !model.isVerified)
      return false;
    this.data.models.defaultModelId = id;
    await this.saveData();
    return true;
  }
  /**
   * 获取默认模型
   */
  getDefaultModel() {
    if (!this.data.models.defaultModelId)
      return null;
    return this.getModelById(this.data.models.defaultModelId);
  }
  /**
   * 获取默认模型ID
   */
  getDefaultModelId() {
    return this.data.models.defaultModelId;
  }
  /**
   * 清空所有模型配置
   */
  async clearAllModels() {
    this.data.models.configs = [];
    this.data.models.defaultModelId = null;
    await this.saveData();
  }
  getPreference(key, defaultValue) {
    return this.data.preferences[key] !== void 0 ? this.data.preferences[key] : defaultValue;
  }
  /**
   * 设置个性化设置
   */
  async setPreference(key, value) {
    this.data.preferences[key] = value;
    await this.saveData();
  }
  /**
   * 删除个性化设置
   */
  async removePreference(key) {
    delete this.data.preferences[key];
    await this.saveData();
  }
  // ========== 工具方法 ==========
  /**
   * 生成唯一ID
   */
  generateId() {
    return "model_" + Date.now() + "_" + Math.random().toString(36).substr(2, 9);
  }
  /**
   * 导出配置
   */
  exportConfig() {
    return JSON.stringify({
      ...this.data,
      exportedAt: Date.now()
    }, null, 2);
  }
  /**
   * 导入配置
   */
  async importConfig(configJson) {
    try {
      const config = JSON.parse(configJson);
      if (!config.models || !Array.isArray(config.models.configs)) {
        return { success: false, error: "\u65E0\u6548\u7684\u914D\u7F6E\u683C\u5F0F", imported: 0 };
      }
      let imported = 0;
      for (const modelConfig of config.models.configs) {
        if (this.isValidModelConfig(modelConfig)) {
          await this.addModel({
            displayName: modelConfig.displayName,
            modelName: modelConfig.modelName,
            provider: modelConfig.provider,
            baseURL: modelConfig.baseURL,
            apiKey: this.decodeApiKey(modelConfig.encodedApiKey),
            // 解码API密钥
            maxContextTokens: modelConfig.maxContextTokens || 32e3,
            maxOutputTokens: modelConfig.maxOutputTokens || 4e3
          });
          imported++;
        }
      }
      if (config.models.defaultModelId && imported > 0) {
        this.data.models.defaultModelId = config.models.defaultModelId;
        await this.saveData();
      }
      return { success: true, imported };
    } catch (error) {
      return { success: false, error: error.message, imported: 0 };
    }
  }
  /**
   * 验证模型配置格式
   */
  isValidModelConfig(config) {
    return config && typeof config.displayName === "string" && typeof config.modelName === "string" && typeof config.provider === "string" && typeof config.baseURL === "string" && typeof config.encodedApiKey === "string" && (typeof config.maxContextTokens === "number" || config.maxContextTokens === void 0) && (typeof config.maxOutputTokens === "number" || config.maxOutputTokens === void 0);
  }
  /**
   * 重置所有数据到初始状态
   */
  async resetToDefaults() {
    this.data = { ...DEFAULT_PLUGIN_DATA };
    this.data.lastModified = Date.now();
    await this.saveData();
    console.log("Git Auto Commit - \u6240\u6709\u6570\u636E\u5DF2\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C");
  }
  /**
   * 删除数据文件（用于测试或彻底重置）
   */
  async deleteDataFile() {
    try {
      const fileExists = await this.app.vault.adapter.exists(this.dataFile);
      if (fileExists) {
        await this.app.vault.adapter.remove(this.dataFile);
        console.log("Git Auto Commit - \u6570\u636E\u6587\u4EF6\u5DF2\u5220\u9664");
      }
      this.data = { ...DEFAULT_PLUGIN_DATA };
    } catch (error) {
      console.error("Git Auto Commit - \u5220\u9664\u6570\u636E\u6587\u4EF6\u5931\u8D25:", error);
      throw error;
    }
  }
  /**
   * 获取数据文件路径（用于调试）
   */
  getDataFilePath() {
    return this.dataFile;
  }
  /**
   * 检查数据文件是否存在
   */
  async dataFileExists() {
    return await this.app.vault.adapter.exists(this.dataFile);
  }
};

// new-model-config-manager.ts
var NewModelConfigManager = class {
  constructor(dataManager) {
    this.dataManager = dataManager;
  }
  // ========== 模型管理方法 ==========
  /**
   * 添加新模型
   */
  async addModel(config) {
    return await this.dataManager.addModel(config);
  }
  /**
   * 更新模型配置
   */
  async updateModel(id, updates) {
    return await this.dataManager.updateModel(id, updates);
  }
  /**
   * 删除模型
   */
  async deleteModel(id) {
    return await this.dataManager.deleteModel(id);
  }
  /**
   * 获取所有模型（解码API密钥）
   */
  getAllModels() {
    const models = this.dataManager.getAllModels();
    return models.map((model) => this.convertToModelConfig(model));
  }
  /**
   * 获取已验证的模型
   */
  getVerifiedModels() {
    const models = this.dataManager.getVerifiedModels();
    return models.map((model) => this.convertToModelConfig(model));
  }
  /**
   * 根据ID获取模型
   */
  getModelById(id) {
    const modelData = this.dataManager.getModelById(id);
    if (!modelData)
      return null;
    return this.convertToModelConfig(modelData);
  }
  /**
   * 设置默认模型
   */
  async setDefaultModel(id) {
    return await this.dataManager.setDefaultModel(id);
  }
  /**
   * 获取默认模型
   */
  getDefaultModel() {
    const modelData = this.dataManager.getDefaultModel();
    if (!modelData)
      return null;
    return this.convertToModelConfig(modelData);
  }
  /**
   * 获取默认模型ID
   */
  getDefaultModelId() {
    return this.dataManager.getDefaultModelId();
  }
  /**
   * 清空所有模型配置
   */
  async clearAllModels() {
    await this.dataManager.clearAllModels();
  }
  // ========== 模型验证和测试方法 ==========
  /**
   * 验证模型配置
   */
  async verifyModel(id) {
    const model = this.getModelById(id);
    if (!model) {
      return { success: false, error: "\u6A21\u578B\u4E0D\u5B58\u5728" };
    }
    try {
      const response = await this.testModelConnection(model);
      if (response.success) {
        await this.updateModel(id, { isVerified: true });
        return { success: true };
      } else {
        await this.updateModel(id, { isVerified: false });
        return { success: false, error: response.error };
      }
    } catch (error) {
      await this.updateModel(id, { isVerified: false });
      return { success: false, error: error.message };
    }
  }
  /**
   * 直接测试模型配置（不添加到管理器）
   */
  async testModelConfig(config) {
    const tempModel = {
      id: "temp",
      ...config,
      isVerified: false,
      createdAt: Date.now(),
      lastModified: Date.now()
    };
    return this.testModelConnection(tempModel);
  }
  /**
   * 测试模型连接
   */
  async testModelConnection(model) {
    var _a;
    try {
      const testMessage = "\u6D4B\u8BD5\u8FDE\u63A5";
      const requestBody = {
        model: model.modelName,
        messages: [
          {
            role: "user",
            content: testMessage
          }
        ],
        max_tokens: 10,
        temperature: 0.1
      };
      const headers = {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${model.apiKey}`
      };
      if (model.provider === "qwen") {
        headers["X-DashScope-SSE"] = "disable";
      } else if (model.provider === "openrouter") {
        headers["HTTP-Referer"] = "https://obsidian.md";
        headers["X-Title"] = "Obsidian Git Auto Commit";
      }
      const response = await fetch(`${model.baseURL}/chat/completions`, {
        method: "POST",
        headers,
        body: JSON.stringify(requestBody)
      });
      if (response.ok) {
        return { success: true };
      } else {
        const errorData = await response.json().catch(() => ({}));
        return {
          success: false,
          error: `HTTP ${response.status}: ${((_a = errorData.error) == null ? void 0 : _a.message) || response.statusText}`
        };
      }
    } catch (error) {
      return {
        success: false,
        error: `\u8FDE\u63A5\u5931\u8D25: ${error.message}`
      };
    }
  }
  // ========== 配置导入导出方法 ==========
  /**
   * 导出配置
   */
  exportConfig() {
    return this.dataManager.exportConfig();
  }
  /**
   * 导入配置
   */
  async importConfig(configJson) {
    return await this.dataManager.importConfig(configJson);
  }
  // ========== 向后兼容性方法 ==========
  /**
   * 从存储中加载模型配置（保持与旧API兼容）
   */
  loadFromStorage() {
    console.log("Git Auto Commit - \u4F7F\u7528\u65B0\u7684\u6570\u636E\u7BA1\u7406\u5668\uFF0C\u8DF3\u8FC7\u65E7\u7684\u52A0\u8F7D\u65B9\u5F0F");
  }
  /**
   * 保存到存储（保持与旧API兼容）
   */
  saveToStorage() {
    console.log("Git Auto Commit - \u4F7F\u7528\u65B0\u7684\u6570\u636E\u7BA1\u7406\u5668\uFF0C\u81EA\u52A8\u4FDD\u5B58");
  }
  /**
   * 迁移旧配置，为没有token参数的模型添加默认值
   */
  migrateOldConfigs() {
    console.log("Git Auto Commit - \u6570\u636E\u8FC1\u79FB\u7531\u6570\u636E\u7BA1\u7406\u5668\u5904\u7406");
  }
  // ========== 工具方法 ==========
  /**
   * 将ModelConfigData转换为ModelConfig（解码API密钥）
   */
  convertToModelConfig(modelData) {
    return {
      ...modelData,
      apiKey: this.dataManager.decodeApiKey(modelData.encodedApiKey)
    };
  }
  /**
   * 验证模型配置格式
   */
  isValidModelConfig(config) {
    return config && typeof config.displayName === "string" && typeof config.modelName === "string" && typeof config.provider === "string" && typeof config.baseURL === "string" && typeof config.apiKey === "string" && (typeof config.maxContextTokens === "number" || config.maxContextTokens === void 0) && (typeof config.maxOutputTokens === "number" || config.maxOutputTokens === void 0);
  }
};

// ai-settings-components.ts
var import_obsidian = require("obsidian");

// model-config.ts
var PREDEFINED_PROVIDERS = {
  deepseek: {
    name: "DeepSeek",
    defaultBaseURL: "https://api.deepseek.com/v1",
    commonModels: ["deepseek-chat", "deepseek-coder"],
    modelPlaceholder: "\u4F8B\u5982\uFF1Adeepseek-chat"
  },
  zhipu: {
    name: "\u667A\u8C31AI",
    defaultBaseURL: "https://open.bigmodel.cn/api/paas/v4",
    commonModels: ["glm-4-plus", "glm-4", "glm-4-air", "glm-4-flash"],
    modelPlaceholder: "\u4F8B\u5982\uFF1Aglm-4-plus"
  },
  qwen: {
    name: "\u901A\u4E49\u5343\u95EE",
    defaultBaseURL: "https://dashscope.aliyuncs.com/compatible-mode/v1",
    commonModels: ["qwen-plus", "qwen-turbo", "qwen-max", "qwen-max-longcontext"],
    modelPlaceholder: "\u4F8B\u5982\uFF1Aqwen-plus"
  },
  openrouter: {
    name: "OpenRouter",
    defaultBaseURL: "https://openrouter.ai/api/v1",
    commonModels: ["anthropic/claude-3.5-sonnet", "openai/gpt-4o", "meta-llama/llama-3.1-405b-instruct"],
    modelPlaceholder: "\u4F8B\u5982\uFF1Aanthropic/claude-3.5-sonnet"
  },
  custom: {
    name: "\u81EA\u5B9A\u4E49\u6A21\u578B",
    defaultBaseURL: "https://api.openai.com/v1",
    commonModels: ["gpt-4o", "gpt-4o-mini", "gpt-3.5-turbo"],
    modelPlaceholder: "\u4F8B\u5982\uFF1Agpt-4o"
  }
};
var ModelConfigManager = class {
  constructor() {
    this.models = [];
    this.defaultModelId = null;
    this.loadFromStorage();
    this.migrateOldConfigs();
  }
  // 从存储中加载模型配置
  loadFromStorage() {
    try {
      const savedModels = localStorage.getItem("git-auto-commit-models");
      const savedDefaultModel = localStorage.getItem("git-auto-commit-default-model");
      if (savedModels) {
        this.models = JSON.parse(savedModels);
      }
      if (savedDefaultModel) {
        this.defaultModelId = savedDefaultModel;
      }
    } catch (error) {
      console.error("\u52A0\u8F7D\u6A21\u578B\u914D\u7F6E\u5931\u8D25:", error);
      this.models = [];
      this.defaultModelId = null;
    }
  }
  // 保存到存储
  saveToStorage() {
    try {
      localStorage.setItem("git-auto-commit-models", JSON.stringify(this.models));
      if (this.defaultModelId) {
        localStorage.setItem("git-auto-commit-default-model", this.defaultModelId);
      } else {
        localStorage.removeItem("git-auto-commit-default-model");
      }
    } catch (error) {
      console.error("\u4FDD\u5B58\u6A21\u578B\u914D\u7F6E\u5931\u8D25:", error);
    }
  }
  // 迁移旧配置，为没有token参数的模型添加默认值
  migrateOldConfigs() {
    let needsSave = false;
    for (const model of this.models) {
      if (typeof model.maxContextTokens === "undefined") {
        model.maxContextTokens = 32e3;
        needsSave = true;
      }
      if (typeof model.maxOutputTokens === "undefined") {
        model.maxOutputTokens = 4e3;
        needsSave = true;
      }
    }
    if (needsSave) {
      console.log("Git Auto Commit - \u8FC1\u79FB\u4E86", this.models.length, "\u4E2A\u6A21\u578B\u914D\u7F6E");
      this.saveToStorage();
    }
  }
  // 生成唯一ID
  generateId() {
    return "model_" + Date.now() + "_" + Math.random().toString(36).substr(2, 9);
  }
  // 添加新模型
  addModel(config) {
    const now = Date.now();
    const newModel = {
      id: this.generateId(),
      ...config,
      isVerified: false,
      createdAt: now,
      lastModified: now
    };
    this.models.push(newModel);
    this.saveToStorage();
    return newModel.id;
  }
  // 更新模型配置
  updateModel(id, updates) {
    const index = this.models.findIndex((model) => model.id === id);
    if (index === -1)
      return false;
    this.models[index] = {
      ...this.models[index],
      ...updates,
      lastModified: Date.now()
    };
    this.saveToStorage();
    return true;
  }
  // 删除模型
  deleteModel(id) {
    const index = this.models.findIndex((model) => model.id === id);
    if (index === -1)
      return false;
    this.models.splice(index, 1);
    if (this.defaultModelId === id) {
      this.defaultModelId = null;
    }
    this.saveToStorage();
    return true;
  }
  // 获取所有模型
  getAllModels() {
    return [...this.models];
  }
  // 获取已验证的模型
  getVerifiedModels() {
    return this.models.filter((model) => model.isVerified);
  }
  // 根据ID获取模型
  getModelById(id) {
    return this.models.find((model) => model.id === id) || null;
  }
  // 设置默认模型
  setDefaultModel(id) {
    const model = this.getModelById(id);
    if (!model || !model.isVerified)
      return false;
    this.defaultModelId = id;
    this.saveToStorage();
    return true;
  }
  // 获取默认模型
  getDefaultModel() {
    if (!this.defaultModelId)
      return null;
    return this.getModelById(this.defaultModelId);
  }
  // 获取默认模型ID
  getDefaultModelId() {
    return this.defaultModelId;
  }
  // 验证模型配置
  async verifyModel(id) {
    const model = this.getModelById(id);
    if (!model) {
      return { success: false, error: "\u6A21\u578B\u4E0D\u5B58\u5728" };
    }
    try {
      const response = await this.testModelConnection(model);
      if (response.success) {
        this.updateModel(id, { isVerified: true });
        return { success: true };
      } else {
        this.updateModel(id, { isVerified: false });
        return { success: false, error: response.error };
      }
    } catch (error) {
      this.updateModel(id, { isVerified: false });
      return { success: false, error: error.message };
    }
  }
  // 直接测试模型配置（不添加到管理器）
  async testModelConfig(config) {
    const tempModel = {
      id: "temp",
      ...config,
      isVerified: false,
      createdAt: Date.now(),
      lastModified: Date.now()
    };
    return this.testModelConnection(tempModel);
  }
  // 测试模型连接
  async testModelConnection(model) {
    var _a;
    try {
      const testMessage = "\u6D4B\u8BD5\u8FDE\u63A5";
      const requestBody = {
        model: model.modelName,
        messages: [
          {
            role: "user",
            content: testMessage
          }
        ],
        max_tokens: 10,
        temperature: 0.1
      };
      const headers = {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${model.apiKey}`
      };
      if (model.provider === "qwen") {
        headers["X-DashScope-SSE"] = "disable";
      } else if (model.provider === "openrouter") {
        headers["HTTP-Referer"] = "https://obsidian.md";
        headers["X-Title"] = "Obsidian Git Auto Commit";
      }
      const response = await fetch(`${model.baseURL}/chat/completions`, {
        method: "POST",
        headers,
        body: JSON.stringify(requestBody)
      });
      if (response.ok) {
        return { success: true };
      } else {
        const errorData = await response.json().catch(() => ({}));
        return {
          success: false,
          error: `HTTP ${response.status}: ${((_a = errorData.error) == null ? void 0 : _a.message) || response.statusText}`
        };
      }
    } catch (error) {
      return {
        success: false,
        error: `\u8FDE\u63A5\u5931\u8D25: ${error.message}`
      };
    }
  }
  // 清空所有模型配置
  clearAllModels() {
    this.models = [];
    this.defaultModelId = null;
    this.saveToStorage();
  }
  // 导出配置
  exportConfig() {
    return JSON.stringify({
      models: this.models,
      defaultModelId: this.defaultModelId,
      exportedAt: Date.now()
    }, null, 2);
  }
  // 导入配置
  importConfig(configJson) {
    try {
      const config = JSON.parse(configJson);
      if (!config.models || !Array.isArray(config.models)) {
        return { success: false, error: "\u65E0\u6548\u7684\u914D\u7F6E\u683C\u5F0F", imported: 0 };
      }
      let imported = 0;
      for (const modelConfig of config.models) {
        if (this.isValidModelConfig(modelConfig)) {
          this.addModel({
            displayName: modelConfig.displayName,
            modelName: modelConfig.modelName,
            provider: modelConfig.provider,
            baseURL: modelConfig.baseURL,
            apiKey: modelConfig.apiKey,
            maxContextTokens: modelConfig.maxContextTokens || 8e3,
            maxOutputTokens: modelConfig.maxOutputTokens || 4e3
          });
          imported++;
        }
      }
      return { success: true, imported };
    } catch (error) {
      return { success: false, error: error.message, imported: 0 };
    }
  }
  // 验证模型配置格式
  isValidModelConfig(config) {
    return config && typeof config.displayName === "string" && typeof config.modelName === "string" && typeof config.provider === "string" && typeof config.baseURL === "string" && typeof config.apiKey === "string" && (typeof config.maxContextTokens === "number" || config.maxContextTokens === void 0) && (typeof config.maxOutputTokens === "number" || config.maxOutputTokens === void 0);
  }
};
var modelConfigManager = new ModelConfigManager();

// ai-settings-components.ts
var ModelManagementModal = class extends import_obsidian.Modal {
  constructor(app, modelManager, onUpdate) {
    super(app);
    this.modelManager = modelManager;
    this.onUpdate = onUpdate;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("model-management-modal");
    const titleEl = contentEl.createEl("h2", { text: "AI\u6A21\u578B\u7BA1\u7406", cls: "modal-title" });
    titleEl.style.display = "flex";
    titleEl.style.justifyContent = "space-between";
    titleEl.style.alignItems = "center";
    titleEl.style.marginBottom = "20px";
    const addButton = titleEl.createEl("button", { text: "\u6DFB\u52A0AI\u6A21\u578B", cls: "mod-cta" });
    addButton.style.fontSize = "14px";
    addButton.style.padding = "8px 16px";
    addButton.addEventListener("click", () => {
      const addModal = new ModelFormModal(this.app, this.modelManager, null, () => {
        this.refreshModelList();
        this.onUpdate();
      }, this);
      addModal.open();
    });
    this.createModelList(contentEl);
    const buttonContainer = contentEl.createEl("div", { cls: "modal-button-container" });
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.textAlign = "right";
    const closeButton = buttonContainer.createEl("button", { text: "\u5173\u95ED" });
    closeButton.addEventListener("click", () => this.close());
  }
  createModelList(containerEl) {
    const listContainer = containerEl.createEl("div", { cls: "model-list-container" });
    listContainer.style.maxHeight = "400px";
    listContainer.style.overflowY = "auto";
    listContainer.style.border = "1px solid var(--background-modifier-border)";
    listContainer.style.borderRadius = "8px";
    listContainer.style.padding = "12px";
    this.refreshModelList();
  }
  refreshModelList() {
    const listContainer = this.contentEl.querySelector(".model-list-container");
    if (!listContainer)
      return;
    listContainer.empty();
    const models = this.modelManager.getAllModels();
    if (models.length === 0) {
      const emptyMessage = listContainer.createEl("div", {
        text: '\u6682\u65E0\u914D\u7F6E\u7684\u6A21\u578B\uFF0C\u70B9\u51FB\u4E0A\u65B9"\u6DFB\u52A0AI\u6A21\u578B"\u6309\u94AE\u5F00\u59CB\u914D\u7F6E',
        cls: "empty-message"
      });
      emptyMessage.style.textAlign = "center";
      emptyMessage.style.color = "var(--text-muted)";
      emptyMessage.style.padding = "40px 20px";
      return;
    }
    models.forEach((model) => {
      this.createModelItem(listContainer, model);
    });
  }
  createModelItem(container, model) {
    var _a;
    const itemEl = container.createEl("div", { cls: "model-item" });
    itemEl.style.display = "flex";
    itemEl.style.justifyContent = "space-between";
    itemEl.style.alignItems = "center";
    itemEl.style.padding = "12px";
    itemEl.style.marginBottom = "8px";
    itemEl.style.border = "1px solid var(--background-modifier-border)";
    itemEl.style.borderRadius = "6px";
    itemEl.style.backgroundColor = "var(--background-secondary)";
    const infoEl = itemEl.createEl("div", { cls: "model-info" });
    const nameEl = infoEl.createEl("div", { cls: "model-name" });
    nameEl.style.fontWeight = "bold";
    nameEl.style.marginBottom = "4px";
    const statusIcon = model.isVerified ? "\u2705" : "\u274C";
    nameEl.textContent = `${statusIcon} ${model.displayName}`;
    const detailsEl = infoEl.createEl("div", { cls: "model-details" });
    detailsEl.style.fontSize = "12px";
    detailsEl.style.color = "var(--text-muted)";
    const contextTokens = model.maxContextTokens ? `${(model.maxContextTokens / 1e3).toFixed(0)}K` : "N/A";
    const outputTokens = model.maxOutputTokens ? `${(model.maxOutputTokens / 1e3).toFixed(0)}K` : "N/A";
    detailsEl.textContent = `${model.modelName} | ${((_a = PREDEFINED_PROVIDERS[model.provider]) == null ? void 0 : _a.name) || model.provider} | \u4E0A\u4E0B\u6587:${contextTokens} \u8F93\u51FA:${outputTokens}`;
    const buttonsEl = itemEl.createEl("div", { cls: "model-buttons" });
    buttonsEl.style.display = "flex";
    buttonsEl.style.gap = "8px";
    const editButton = buttonsEl.createEl("button", { text: "\u8BBE\u7F6E", cls: "mod-small" });
    editButton.addEventListener("click", () => {
      const editModal = new ModelFormModal(this.app, this.modelManager, model, () => {
        this.refreshModelList();
        this.onUpdate();
      }, this);
      editModal.open();
    });
    const deleteButton = buttonsEl.createEl("button", { text: "\u5220\u9664", cls: "mod-small mod-warning" });
    deleteButton.addEventListener("click", async () => {
      await this.modelManager.deleteModel(model.id);
      this.refreshModelList();
      this.onUpdate();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ModelFormModal = class extends import_obsidian.Modal {
  constructor(app, modelManager, model, onSave, parentModal) {
    super(app);
    this.formData = {};
    this.parentModal = null;
    this.baseURLInput = null;
    this.modelNameInput = null;
    this.isNewModelVerified = false;
    this.modelManager = modelManager;
    this.model = model;
    this.onSave = onSave;
    this.parentModal = parentModal || null;
    if (model) {
      this.formData = { ...model };
    } else {
      this.formData = {
        displayName: "",
        modelName: "",
        provider: "deepseek",
        baseURL: PREDEFINED_PROVIDERS.deepseek.defaultBaseURL,
        apiKey: "",
        maxContextTokens: 32e3,
        // 默认32K上下文
        maxOutputTokens: 4e3
        // 默认4K输出
      };
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("model-form-modal");
    this.baseURLInput = null;
    this.modelNameInput = null;
    this.isNewModelVerified = false;
    const title = this.model ? "\u7F16\u8F91\u6A21\u578B\u914D\u7F6E" : "\u6DFB\u52A0\u6A21\u578B\u914D\u7F6E";
    contentEl.createEl("h2", { text: title, cls: "modal-title" });
    const formEl = contentEl.createEl("div", { cls: "model-form" });
    formEl.style.padding = "20px 0";
    this.createFormFields(formEl);
    this.createButtons(contentEl);
  }
  createFormFields(container) {
    const displayNameSetting = new import_obsidian.Setting(container).setName("\u663E\u793A\u540D\u79F0").setDesc("\u4E3A\u6B64\u6A21\u578B\u8BBE\u7F6E\u4E00\u4E2A\u81EA\u5B9A\u4E49\u540D\u79F0").addText((text) => {
      text.setPlaceholder("\u4F8B\u5982\uFF1A\u6211\u7684DeepSeek\u6A21\u578B").setValue(this.formData.displayName || "").onChange((value) => {
        this.formData.displayName = value;
      });
    });
    const modelNameSetting = new import_obsidian.Setting(container).setName("\u6A21\u578B\u578B\u53F7").setDesc("\u8F93\u5165\u5177\u4F53\u7684\u6A21\u578B\u578B\u53F7\u540D\u79F0").addText((text) => {
      text.setPlaceholder(this.getModelPlaceholder()).setValue(this.formData.modelName || "").onChange((value) => {
        this.formData.modelName = value;
      });
      this.modelNameInput = text.inputEl;
    });
    const providerSetting = new import_obsidian.Setting(container).setName("AI\u63D0\u4F9B\u5546").setDesc("\u9009\u62E9AI\u670D\u52A1\u63D0\u4F9B\u5546").addDropdown((dropdown) => {
      Object.entries(PREDEFINED_PROVIDERS).forEach(([key, provider]) => {
        dropdown.addOption(key, provider.name);
      });
      dropdown.setValue(this.formData.provider || "deepseek").onChange((value) => {
        var _a;
        this.formData.provider = value;
        this.formData.baseURL = ((_a = PREDEFINED_PROVIDERS[value]) == null ? void 0 : _a.defaultBaseURL) || "";
        this.updateProviderRelatedFields();
      });
    });
    const baseURLSetting = new import_obsidian.Setting(container).setName("\u57FA\u7840URL").setDesc("API\u670D\u52A1\u7684\u57FA\u7840URL\u5730\u5740").addText((text) => {
      text.setPlaceholder("https://api.example.com/v1").setValue(this.formData.baseURL || "").onChange((value) => {
        this.formData.baseURL = value;
      });
      this.baseURLInput = text.inputEl;
    });
    const apiKeySetting = new import_obsidian.Setting(container).setName("API\u5BC6\u94A5").setDesc("\u8F93\u5165\u60A8\u7684API\u5BC6\u94A5").addText((text) => {
      text.setPlaceholder("sk-...").setValue(this.formData.apiKey || "").onChange((value) => {
        this.formData.apiKey = value;
      });
      text.inputEl.type = "password";
    });
    const maxContextSetting = new import_obsidian.Setting(container).setName("\u6700\u5927\u4E0A\u4E0B\u6587\u957F\u5EA6").setDesc("\u6A21\u578B\u652F\u6301\u7684\u6700\u5927\u4E0A\u4E0B\u6587\u4EE4\u724C\u6570\uFF08\u4F8B\u5982\uFF1A32000\u8868\u793A32K\uFF09").addText((text) => {
      var _a;
      text.setPlaceholder("32000").setValue(((_a = this.formData.maxContextTokens) == null ? void 0 : _a.toString()) || "32000").onChange((value) => {
        const numValue = parseInt(value);
        if (!isNaN(numValue) && numValue > 0) {
          this.formData.maxContextTokens = numValue;
        }
      });
      text.inputEl.type = "number";
      text.inputEl.min = "1000";
      text.inputEl.step = "1000";
    });
    const maxOutputSetting = new import_obsidian.Setting(container).setName("\u6700\u5927\u8F93\u51FA\u4EE4\u724C\u6570").setDesc("\u6A21\u578B\u5355\u6B21\u8F93\u51FA\u7684\u6700\u5927\u4EE4\u724C\u6570\uFF08\u4F8B\u5982\uFF1A4000\u8868\u793A4K\uFF09").addText((text) => {
      var _a;
      text.setPlaceholder("4000").setValue(((_a = this.formData.maxOutputTokens) == null ? void 0 : _a.toString()) || "4000").onChange((value) => {
        const numValue = parseInt(value);
        if (!isNaN(numValue) && numValue > 0) {
          this.formData.maxOutputTokens = numValue;
        }
      });
      text.inputEl.type = "number";
      text.inputEl.min = "100";
      text.inputEl.step = "100";
    });
  }
  createButtons(container) {
    const buttonContainer = container.createEl("div", { cls: "modal-button-container" });
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "space-between";
    buttonContainer.style.gap = "10px";
    const leftButtons = buttonContainer.createEl("div");
    const verifyButton = leftButtons.createEl("button", { text: "\u9A8C\u8BC1", cls: "mod-cta verify-model-btn" });
    verifyButton.addEventListener("click", () => this.verifyModel());
    const rightButtons = buttonContainer.createEl("div");
    rightButtons.style.display = "flex";
    rightButtons.style.gap = "10px";
    const saveButton = rightButtons.createEl("button", { text: "\u4FDD\u5B58", cls: "mod-cta" });
    saveButton.addEventListener("click", () => this.saveModel());
    const cancelButton = rightButtons.createEl("button", { text: "\u53D6\u6D88" });
    cancelButton.addEventListener("click", () => this.close());
  }
  getModelPlaceholder() {
    var _a;
    const provider = this.formData.provider || "deepseek";
    return ((_a = PREDEFINED_PROVIDERS[provider]) == null ? void 0 : _a.modelPlaceholder) || "\u8F93\u5165\u6A21\u578B\u578B\u53F7";
  }
  updateProviderRelatedFields() {
    if (this.baseURLInput) {
      this.baseURLInput.value = this.formData.baseURL || "";
    }
    if (this.modelNameInput) {
      this.modelNameInput.placeholder = this.getModelPlaceholder();
    }
  }
  async verifyModel() {
    if (!this.validateForm())
      return;
    const verifyButton = this.contentEl.querySelector(".verify-model-btn");
    if (verifyButton) {
      verifyButton.textContent = "\u9A8C\u8BC1\u4E2D...";
      verifyButton.disabled = true;
    }
    try {
      let result;
      if (this.model) {
        await this.modelManager.updateModel(this.model.id, {
          displayName: this.formData.displayName,
          modelName: this.formData.modelName,
          provider: this.formData.provider,
          baseURL: this.formData.baseURL,
          apiKey: this.formData.apiKey,
          maxContextTokens: this.formData.maxContextTokens || 32e3,
          maxOutputTokens: this.formData.maxOutputTokens || 4e3,
          isVerified: false
        });
        result = await this.modelManager.verifyModel(this.model.id);
      } else {
        result = await this.modelManager.testModelConfig({
          displayName: this.formData.displayName,
          modelName: this.formData.modelName,
          provider: this.formData.provider,
          baseURL: this.formData.baseURL,
          apiKey: this.formData.apiKey,
          maxContextTokens: this.formData.maxContextTokens || 32e3,
          maxOutputTokens: this.formData.maxOutputTokens || 4e3
        });
      }
      if (result.success) {
        new import_obsidian.Notice("\u2705 \u6A21\u578B\u9A8C\u8BC1\u6210\u529F\uFF01");
        if (this.model) {
          this.model.isVerified = true;
          this.model.displayName = this.formData.displayName;
          this.model.modelName = this.formData.modelName;
          this.model.provider = this.formData.provider;
          this.model.baseURL = this.formData.baseURL;
          this.model.apiKey = this.formData.apiKey;
          this.model.maxContextTokens = this.formData.maxContextTokens || 32e3;
          this.model.maxOutputTokens = this.formData.maxOutputTokens || 4e3;
        } else {
          this.isNewModelVerified = true;
        }
        if (this.parentModal) {
          this.parentModal.refreshModelList();
        }
      } else {
        new import_obsidian.Notice(`\u274C \u6A21\u578B\u9A8C\u8BC1\u5931\u8D25\uFF1A${result.error}`);
        if (this.model) {
          this.model.isVerified = false;
        } else {
          this.isNewModelVerified = false;
        }
      }
    } catch (error) {
      new import_obsidian.Notice(`\u274C \u9A8C\u8BC1\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF\uFF1A${error.message}`);
      if (this.model) {
        this.model.isVerified = false;
      } else {
        this.isNewModelVerified = false;
      }
    } finally {
      const verifyButton2 = this.contentEl.querySelector(".verify-model-btn");
      if (verifyButton2) {
        verifyButton2.textContent = "\u9A8C\u8BC1";
        verifyButton2.disabled = false;
      }
    }
  }
  async saveModel() {
    if (!this.validateForm())
      return;
    try {
      if (this.model) {
        const originalModel = this.modelManager.getModelById(this.model.id);
        const hasKeyChanges = originalModel && (originalModel.modelName !== this.formData.modelName || originalModel.provider !== this.formData.provider || originalModel.baseURL !== this.formData.baseURL || originalModel.apiKey !== this.formData.apiKey);
        let finalVerifiedStatus;
        if (hasKeyChanges && this.model.isVerified === (originalModel == null ? void 0 : originalModel.isVerified)) {
          finalVerifiedStatus = false;
        } else {
          finalVerifiedStatus = this.model.isVerified;
        }
        await this.modelManager.updateModel(this.model.id, {
          displayName: this.formData.displayName,
          modelName: this.formData.modelName,
          provider: this.formData.provider,
          baseURL: this.formData.baseURL,
          apiKey: this.formData.apiKey,
          maxContextTokens: this.formData.maxContextTokens || 32e3,
          maxOutputTokens: this.formData.maxOutputTokens || 4e3,
          isVerified: finalVerifiedStatus
        });
      } else {
        const modelId = await this.modelManager.addModel({
          displayName: this.formData.displayName,
          modelName: this.formData.modelName,
          provider: this.formData.provider,
          baseURL: this.formData.baseURL,
          apiKey: this.formData.apiKey,
          maxContextTokens: this.formData.maxContextTokens || 32e3,
          maxOutputTokens: this.formData.maxOutputTokens || 4e3
        });
        if (this.isNewModelVerified) {
          await this.modelManager.updateModel(modelId, { isVerified: true });
        }
      }
      if (this.parentModal) {
        this.parentModal.refreshModelList();
      }
      this.onSave();
      this.close();
    } catch (error) {
      new import_obsidian.Notice(`\u4FDD\u5B58\u5931\u8D25\uFF1A${error.message}`);
    }
  }
  validateForm() {
    var _a;
    const required = ["displayName", "modelName", "provider", "baseURL", "apiKey"];
    for (const field of required) {
      if (!((_a = this.formData[field]) == null ? void 0 : _a.trim())) {
        const fieldNames = {
          displayName: "\u663E\u793A\u540D\u79F0",
          modelName: "\u6A21\u578B\u578B\u53F7",
          provider: "AI\u63D0\u4F9B\u5546",
          baseURL: "\u57FA\u7840URL",
          apiKey: "API\u5BC6\u94A5"
        };
        new import_obsidian.Notice(`\u8BF7\u586B\u5199${fieldNames[field]}`);
        return false;
      }
    }
    if (!this.formData.maxContextTokens || this.formData.maxContextTokens < 1e3) {
      new import_obsidian.Notice("\u6700\u5927\u4E0A\u4E0B\u6587\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E1000");
      return false;
    }
    if (!this.formData.maxOutputTokens || this.formData.maxOutputTokens < 100) {
      new import_obsidian.Notice("\u6700\u5927\u8F93\u51FA\u4EE4\u724C\u6570\u4E0D\u80FD\u5C11\u4E8E100");
      return false;
    }
    return true;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.baseURLInput = null;
    this.modelNameInput = null;
  }
};
var DefaultModelSelector = class {
  constructor(container, modelManager, onModelChange) {
    this.container = container;
    this.modelManager = modelManager;
    this.onModelChange = onModelChange;
    this.render();
  }
  render() {
    this.container.empty();
    this.selectEl = this.container.createEl("select", { cls: "dropdown" });
    this.selectEl.style.width = "100%";
    this.selectEl.style.padding = "8px";
    this.selectEl.style.borderRadius = "4px";
    this.selectEl.style.border = "1px solid var(--background-modifier-border)";
    this.selectEl.style.backgroundColor = "var(--background-primary)";
    this.updateOptions();
    this.selectEl.addEventListener("change", async () => {
      const selectedValue = this.selectEl.value;
      const modelId = selectedValue === "" ? null : selectedValue;
      if (modelId) {
        await this.modelManager.setDefaultModel(modelId);
      }
      this.onModelChange(modelId);
    });
  }
  updateOptions() {
    if (!this.selectEl)
      return;
    this.selectEl.innerHTML = "";
    const defaultOption = this.selectEl.createEl("option", { value: "", text: "\u8BF7\u9009\u62E9\u9ED8\u8BA4\u6A21\u578B" });
    const verifiedModels = this.modelManager.getVerifiedModels();
    if (verifiedModels.length === 0) {
      const noModelOption = this.selectEl.createEl("option", {
        value: "",
        text: "\u6682\u65E0\u53EF\u7528\u6A21\u578B\uFF08\u8BF7\u5148\u6DFB\u52A0\u5E76\u9A8C\u8BC1\u6A21\u578B\uFF09"
      });
      noModelOption.disabled = true;
      this.selectEl.disabled = true;
    } else {
      this.selectEl.disabled = false;
      verifiedModels.forEach((model) => {
        const option = this.selectEl.createEl("option", {
          value: model.id,
          text: model.displayName
        });
      });
    }
    const defaultModelId = this.modelManager.getDefaultModelId();
    if (defaultModelId) {
      this.selectEl.value = defaultModelId;
    }
  }
  // 外部调用以更新选项
  refresh() {
    this.updateOptions();
  }
};

// data-migration-modal.ts
var import_obsidian2 = require("obsidian");
var DataMigrationModal = class extends import_obsidian2.Modal {
  constructor(app, dataManager, hasOldData) {
    super(app);
    this.dataManager = dataManager;
    this.hasOldData = hasOldData;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("data-migration-modal");
    if (this.hasOldData) {
      this.showMigrationCompleteView(contentEl);
    } else {
      this.showNewDataSystemView(contentEl);
    }
  }
  showMigrationCompleteView(container) {
    const titleEl = container.createEl("h2", {
      text: "\u{1F389} \u6570\u636E\u8FC1\u79FB\u5B8C\u6210\uFF01",
      cls: "modal-title"
    });
    titleEl.style.color = "var(--color-green)";
    titleEl.style.textAlign = "center";
    titleEl.style.marginBottom = "20px";
    const contentDiv = container.createEl("div", { cls: "migration-content" });
    contentDiv.style.padding = "20px";
    contentDiv.style.lineHeight = "1.6";
    contentDiv.createEl("p", {
      text: "\u60A8\u7684\u65E7\u914D\u7F6E\u6570\u636E\u5DF2\u6210\u529F\u8FC1\u79FB\u5230\u65B0\u7684\u6570\u636E\u5B58\u50A8\u7CFB\u7EDF\uFF01"
    });
    const changesTitle = contentDiv.createEl("h3", { text: "\u{1F4CB} \u4E3B\u8981\u6539\u53D8" });
    changesTitle.style.marginTop = "20px";
    changesTitle.style.marginBottom = "10px";
    const changesList = contentDiv.createEl("ul");
    changesList.style.paddingLeft = "20px";
    const changes = [
      "\u{1F512} API\u5BC6\u94A5\u73B0\u5728\u5DF2\u52A0\u5BC6\u5B58\u50A8\uFF0C\u66F4\u52A0\u5B89\u5168",
      "\u{1F4C1} \u6240\u6709\u914D\u7F6E\u6570\u636E\u4FDD\u5B58\u5728\u72EC\u7ACB\u7684 plugin-data.json \u6587\u4EF6\u4E2D",
      "\u{1F9F9} \u5DF2\u6E05\u7406 localStorage \u4E2D\u7684\u65E7\u6570\u636E",
      "\u{1F680} \u63D2\u4EF6\u5206\u4EAB\u66F4\u65B9\u4FBF\uFF0C\u53EA\u9700\u590D\u5236\u6838\u5FC3\u6587\u4EF6"
    ];
    changes.forEach((change) => {
      const li = changesList.createEl("li");
      li.textContent = change;
      li.style.marginBottom = "8px";
    });
    const locationTitle = contentDiv.createEl("h3", { text: "\u{1F4CD} \u6570\u636E\u6587\u4EF6\u4F4D\u7F6E" });
    locationTitle.style.marginTop = "20px";
    locationTitle.style.marginBottom = "10px";
    const locationCode = contentDiv.createEl("code", {
      text: this.dataManager.getDataFilePath()
    });
    locationCode.style.backgroundColor = "var(--background-secondary)";
    locationCode.style.padding = "8px 12px";
    locationCode.style.borderRadius = "4px";
    locationCode.style.display = "block";
    locationCode.style.marginBottom = "15px";
    const reminderDiv = contentDiv.createEl("div", { cls: "reminder-box" });
    reminderDiv.style.backgroundColor = "var(--background-modifier-border)";
    reminderDiv.style.border = "1px solid var(--color-accent)";
    reminderDiv.style.borderRadius = "8px";
    reminderDiv.style.padding = "15px";
    reminderDiv.style.marginTop = "20px";
    const reminderTitle = reminderDiv.createEl("h4", { text: "\u{1F4A1} \u5206\u4EAB\u63D2\u4EF6\u65F6" });
    reminderTitle.style.color = "var(--color-accent)";
    reminderTitle.style.marginBottom = "10px";
    reminderDiv.createEl("p", {
      text: "\u73B0\u5728\u60A8\u53EF\u4EE5\u5B89\u5168\u5730\u5206\u4EAB\u63D2\u4EF6\uFF0C\u53EA\u9700\u590D\u5236\u4EE5\u4E0B\u4E09\u4E2A\u6587\u4EF6\uFF1A"
    });
    const filesList = reminderDiv.createEl("ul");
    ["main.js", "styles.css", "manifest.json"].forEach((file) => {
      const li = filesList.createEl("li");
      li.textContent = file;
    });
    reminderDiv.createEl("p", {
      text: "\u4E0D\u8981\u590D\u5236 plugin-data.json \u6587\u4EF6\uFF0C\u8FD9\u6837\u5176\u4ED6\u4EBA\u4F1A\u83B7\u5F97\u4E00\u4E2A\u5E72\u51C0\u7684\u521D\u59CB\u72B6\u6001\u63D2\u4EF6\u3002",
      cls: "text-muted"
    });
    this.addButtons(container, "\u6211\u77E5\u9053\u4E86");
  }
  showNewDataSystemView(container) {
    const titleEl = container.createEl("h2", {
      text: "\u{1F195} \u65B0\u7684\u6570\u636E\u5B58\u50A8\u7CFB\u7EDF",
      cls: "modal-title"
    });
    titleEl.style.color = "var(--color-accent)";
    titleEl.style.textAlign = "center";
    titleEl.style.marginBottom = "20px";
    const contentDiv = container.createEl("div", { cls: "new-system-content" });
    contentDiv.style.padding = "20px";
    contentDiv.style.lineHeight = "1.6";
    contentDiv.createEl("p", {
      text: "\u6B22\u8FCE\u4F7F\u7528 Git \u81EA\u52A8\u63D0\u4EA4\u63D2\u4EF6\uFF01\u6211\u4EEC\u4F7F\u7528\u4E86\u5168\u65B0\u7684\u6570\u636E\u5B58\u50A8\u7CFB\u7EDF\uFF0C\u8BA9\u60A8\u7684\u914D\u7F6E\u66F4\u5B89\u5168\u3001\u66F4\u6613\u7BA1\u7406\u3002"
    });
    const featuresTitle = contentDiv.createEl("h3", { text: "\u2728 \u4E3B\u8981\u7279\u6027" });
    featuresTitle.style.marginTop = "20px";
    featuresTitle.style.marginBottom = "10px";
    const featuresList = contentDiv.createEl("ul");
    featuresList.style.paddingLeft = "20px";
    const features = [
      "\u{1F510} API\u5BC6\u94A5\u52A0\u5BC6\u5B58\u50A8\uFF0C\u4FDD\u62A4\u60A8\u7684\u9690\u79C1",
      "\u{1F4C1} \u72EC\u7ACB\u6570\u636E\u6587\u4EF6\uFF0C\u914D\u7F6E\u4E0E\u4EE3\u7801\u5206\u79BB",
      "\u{1F504} \u81EA\u52A8\u6570\u636E\u5907\u4EFD\u548C\u6062\u590D",
      "\u{1F4E4} \u7B80\u5316\u7684\u63D2\u4EF6\u5206\u4EAB\u6D41\u7A0B",
      "\u{1F39B}\uFE0F \u7075\u6D3B\u7684\u4E2A\u6027\u5316\u8BBE\u7F6E\u9009\u9879"
    ];
    features.forEach((feature) => {
      const li = featuresList.createEl("li");
      li.textContent = feature;
      li.style.marginBottom = "8px";
    });
    const startTitle = contentDiv.createEl("h3", { text: "\u{1F680} \u5F00\u59CB\u4F7F\u7528" });
    startTitle.style.marginTop = "20px";
    startTitle.style.marginBottom = "10px";
    const startList = contentDiv.createEl("ol");
    startList.style.paddingLeft = "20px";
    const steps = [
      "\u5728\u8BBE\u7F6E\u4E2D\u6DFB\u52A0\u60A8\u7684\u7B2C\u4E00\u4E2AAI\u6A21\u578B",
      "\u914D\u7F6E\u6A21\u578B\u7684API\u5BC6\u94A5\u548C\u53C2\u6570",
      "\u9A8C\u8BC1\u6A21\u578B\u8FDE\u63A5\u662F\u5426\u6B63\u5E38",
      "\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u6A21\u578B\u5F00\u59CB\u4F7F\u7528"
    ];
    steps.forEach((step) => {
      const li = startList.createEl("li");
      li.textContent = step;
      li.style.marginBottom = "8px";
    });
    const tipDiv = contentDiv.createEl("div", { cls: "tip-box" });
    tipDiv.style.backgroundColor = "var(--background-secondary)";
    tipDiv.style.border = "1px solid var(--color-green)";
    tipDiv.style.borderRadius = "8px";
    tipDiv.style.padding = "15px";
    tipDiv.style.marginTop = "20px";
    const tipTitle = tipDiv.createEl("h4", { text: "\u{1F4A1} \u5C0F\u63D0\u793A" });
    tipTitle.style.color = "var(--color-green)";
    tipTitle.style.marginBottom = "10px";
    tipDiv.createEl("p", {
      text: '\u60A8\u53EF\u4EE5\u968F\u65F6\u4F7F\u7528"\u8C03\u8BD5\u6570\u636E\u72B6\u6001"\u547D\u4EE4\u6765\u67E5\u770B\u5F53\u524D\u7684\u914D\u7F6E\u72B6\u6001\uFF0C\u6216\u4F7F\u7528"\u91CD\u7F6E\u63D2\u4EF6\u6570\u636E"\u547D\u4EE4\u6062\u590D\u5230\u521D\u59CB\u72B6\u6001\u3002'
    });
    this.addButtons(container, "\u5F00\u59CB\u914D\u7F6E");
  }
  addButtons(container, primaryButtonText) {
    const buttonContainer = container.createEl("div", { cls: "modal-button-container" });
    buttonContainer.style.marginTop = "30px";
    buttonContainer.style.textAlign = "center";
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "10px";
    buttonContainer.style.justifyContent = "center";
    const primaryButton = buttonContainer.createEl("button", {
      text: primaryButtonText,
      cls: "mod-cta"
    });
    primaryButton.style.padding = "10px 20px";
    primaryButton.addEventListener("click", () => {
      this.close();
    });
    const detailsButton = buttonContainer.createEl("button", {
      text: "\u67E5\u770B\u8BE6\u7EC6\u8BF4\u660E"
    });
    detailsButton.style.padding = "10px 20px";
    detailsButton.addEventListener("click", () => {
      this.showDetailedInfo();
    });
  }
  showDetailedInfo() {
    const info = `
# Git \u81EA\u52A8\u63D0\u4EA4\u63D2\u4EF6 - \u6570\u636E\u5B58\u50A8\u8BF4\u660E

## \u6570\u636E\u6587\u4EF6\u4F4D\u7F6E
${this.dataManager.getDataFilePath()}

## \u4E3B\u8981\u6539\u8FDB
1. **\u5B89\u5168\u6027**: API\u5BC6\u94A5\u4F7F\u7528Base64\u7F16\u7801\u5B58\u50A8
2. **\u72EC\u7ACB\u6027**: \u914D\u7F6E\u6570\u636E\u4E0E\u63D2\u4EF6\u4EE3\u7801\u5B8C\u5168\u5206\u79BB  
3. **\u4FBF\u643A\u6027**: \u66F4\u5BB9\u6613\u5206\u4EAB\u548C\u5907\u4EFD\u63D2\u4EF6
4. **\u53EF\u7EF4\u62A4\u6027**: \u6E05\u6670\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u4FBF\u4E8E\u7BA1\u7406

## \u91CD\u7F6E\u8BF4\u660E
- \u5220\u9664\u6570\u636E\u6587\u4EF6\u5373\u53EF\u91CD\u7F6E\u4E3A\u521D\u59CB\u72B6\u6001
- \u53EF\u4F7F\u7528"\u91CD\u7F6E\u63D2\u4EF6\u6570\u636E"\u547D\u4EE4
- \u63D2\u4EF6\u4F1A\u81EA\u52A8\u521B\u5EFA\u65B0\u7684\u9ED8\u8BA4\u914D\u7F6E

## \u8C03\u8BD5\u5DE5\u5177
- "\u8C03\u8BD5AI\u914D\u7F6E": \u67E5\u770B\u6A21\u578B\u914D\u7F6E\u72B6\u6001
- "\u8C03\u8BD5\u6570\u636E\u72B6\u6001": \u67E5\u770B\u5B8C\u6574\u6570\u636E\u72B6\u6001
- "\u91CD\u7F6E\u63D2\u4EF6\u6570\u636E": \u6062\u590D\u521D\u59CB\u72B6\u6001

\u66F4\u591A\u8BE6\u7EC6\u4FE1\u606F\u8BF7\u67E5\u770B\u63D2\u4EF6\u76EE\u5F55\u4E2D\u7684 DATA_STORAGE.md \u6587\u4EF6\u3002
        `;
    navigator.clipboard.writeText(info).then(() => {
      new import_obsidian2.Notice("\u8BE6\u7EC6\u8BF4\u660E\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F");
    }).catch(() => {
      console.log("Git Auto Commit - \u8BE6\u7EC6\u8BF4\u660E:", info);
      new import_obsidian2.Notice("\u8BE6\u7EC6\u8BF4\u660E\u5DF2\u8F93\u51FA\u5230\u63A7\u5236\u53F0\uFF0C\u8BF7\u6309F12\u67E5\u770B");
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var DataMigrationChecker = class {
  static async checkAndShowMigrationIfNeeded(app, dataManager) {
    try {
      const hasOldModels = localStorage.getItem("git-auto-commit-models") !== null;
      const hasOldDefaultModel = localStorage.getItem("git-auto-commit-default-model") !== null;
      const hasOldData = hasOldModels || hasOldDefaultModel;
      const dataFileExists = await dataManager.dataFileExists();
      const isFirstRun = !dataFileExists && !hasOldData;
      if (hasOldData || isFirstRun) {
        const modal = new DataMigrationModal(app, dataManager, hasOldData);
        modal.open();
      }
    } catch (error) {
      console.warn("Git Auto Commit - \u8FC1\u79FB\u68C0\u67E5\u5931\u8D25:", error);
    }
  }
};

// main.ts
var execAsync = (0, import_util.promisify)(import_child_process.exec);
var GitAutoCommitPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    this.dataManager = new DataManager(this.app, this.manifest.dir || "");
    await this.dataManager.initialize();
    this.modelManager = new NewModelConfigManager(this.dataManager);
    await this.loadSettings();
    await DataMigrationChecker.checkAndShowMigrationIfNeeded(this.app, this.dataManager);
    this.addRibbonIcon("upload", "Git\u81EA\u52A8\u63D0\u4EA4", (evt) => {
      this.performGitCommit();
    });
    this.addCommand({
      id: "git-auto-commit",
      name: "\u6267\u884CGit\u63D0\u4EA4",
      callback: () => {
        this.performGitCommit();
      }
    });
    this.addCommand({
      id: "git-commit-current-file",
      name: "\u63D0\u4EA4\u5F53\u524D\u6587\u4EF6",
      callback: () => {
        this.performGitCommit("current");
      }
    });
    this.addCommand({
      id: "git-commit-all-files",
      name: "\u63D0\u4EA4\u6240\u6709\u6587\u4EF6",
      callback: () => {
        this.performGitCommit("all");
      }
    });
    this.addCommand({
      id: "debug-ai-config",
      name: "\u8C03\u8BD5AI\u914D\u7F6E",
      callback: () => {
        this.debugAIConfig();
      }
    });
    this.addCommand({
      id: "debug-data-status",
      name: "\u8C03\u8BD5\u6570\u636E\u72B6\u6001",
      callback: () => {
        this.debugDataStatus();
      }
    });
    this.addCommand({
      id: "reset-plugin-data",
      name: "\u91CD\u7F6E\u63D2\u4EF6\u6570\u636E",
      callback: async () => {
        await this.resetPluginData();
      }
    });
    this.addSettingTab(new GitAutoCommitSettingTab(this.app, this));
    console.log("Git Auto Commit \u63D2\u4EF6\u5DF2\u52A0\u8F7D - \u4F7F\u7528\u65B0\u7684\u6570\u636E\u5B58\u50A8\u7CFB\u7EDF");
  }
  onunload() {
    console.log("Git Auto Commit \u63D2\u4EF6\u5DF2\u5378\u8F7D");
  }
  async loadSettings() {
    this.settings = this.dataManager.getSettings();
  }
  async saveSettings() {
    await this.dataManager.updateSettings(this.settings);
  }
  async performGitCommit(scope) {
    try {
      if (!await this.validateRepository()) {
        return;
      }
      let commitScope = scope || this.settings.defaultCommitScope;
      let filesToCommit = [];
      if (commitScope === "current") {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile) {
          new import_obsidian3.Notice("\u274C \u6CA1\u6709\u6253\u5F00\u7684\u6587\u4EF6");
          return;
        }
        filesToCommit = [activeFile.path];
        commitScope = "single";
      } else if (commitScope === "single" && !this.settings.autoCommit) {
        const modifiedFiles = await this.getModifiedFiles();
        if (modifiedFiles.length === 0) {
          new import_obsidian3.Notice("\u6CA1\u6709\u4FEE\u6539\u7684\u6587\u4EF6\u9700\u8981\u63D0\u4EA4");
          return;
        }
        const selectedFile = await this.showFileSelectionModal(modifiedFiles);
        if (!selectedFile)
          return;
        filesToCommit = [selectedFile];
      }
      let messageType = this.settings.defaultMessageType;
      let commitMessage = "";
      if (messageType === "ai") {
        const defaultModel = this.modelManager.getDefaultModel();
        console.log("Git Auto Commit - \u9ED8\u8BA4\u6A21\u578B:", defaultModel);
        if (!defaultModel) {
          new import_obsidian3.Notice("\u274C \u672A\u914D\u7F6E\u9ED8\u8BA4AI\u6A21\u578B\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u914D\u7F6E");
          console.error("Git Auto Commit - \u672A\u627E\u5230\u9ED8\u8BA4\u6A21\u578B");
          return;
        }
        if (!defaultModel.isVerified) {
          new import_obsidian3.Notice("\u274C \u9ED8\u8BA4AI\u6A21\u578B\u672A\u9A8C\u8BC1\uFF0C\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u9A8C\u8BC1\u6A21\u578B\u914D\u7F6E");
          console.error("Git Auto Commit - \u9ED8\u8BA4\u6A21\u578B\u672A\u9A8C\u8BC1:", defaultModel);
          return;
        }
        if (this.settings.showNotifications) {
          new import_obsidian3.Notice("\u6B63\u5728\u4F7F\u7528AI\u751F\u6210\u63D0\u4EA4\u4FE1\u606F...");
        }
        console.log("Git Auto Commit - \u5F00\u59CB\u751F\u6210AI\u63D0\u4EA4\u4FE1\u606F...");
        commitMessage = await this.generateCommitMessageWithAI(filesToCommit);
        console.log("Git Auto Commit - AI\u751F\u6210\u7684\u63D0\u4EA4\u4FE1\u606F:", commitMessage);
        if (!this.settings.autoCommit) {
          const userMessage = await this.showCommitMessageModal(commitMessage);
          if (!userMessage)
            return;
          commitMessage = userMessage;
        }
      } else {
        if (this.settings.autoCommit) {
          commitMessage = `\u66F4\u65B0\u7B14\u8BB0 - ${new Date().toLocaleString("zh-CN")}`;
        } else {
          const userMessage = await this.showCommitMessageModal();
          if (!userMessage)
            return;
          commitMessage = userMessage;
        }
      }
      await this.executeGitOperations(filesToCommit, commitMessage);
      if (this.settings.showNotifications) {
        new import_obsidian3.Notice("\u2705 Git\u63D0\u4EA4\u5B8C\u6210\uFF01");
      }
    } catch (error) {
      console.error("Git\u63D0\u4EA4\u5931\u8D25:", error);
      new import_obsidian3.Notice(`\u274C Git\u63D0\u4EA4\u5931\u8D25: ${error.message}`);
    }
  }
  async validateRepository() {
    try {
      const vaultPath = this.app.vault.adapter.basePath || this.app.vault.adapter.path || this.app.vault.configDir;
      await execAsync("git rev-parse --git-dir", { cwd: vaultPath });
      return true;
    } catch (error) {
      new import_obsidian3.Notice("\u274C \u5F53\u524D\u76EE\u5F55\u4E0D\u662FGit\u4ED3\u5E93\uFF0C\u8BF7\u5148\u521D\u59CB\u5316Git\u4ED3\u5E93");
      return false;
    }
  }
  async getModifiedFiles() {
    try {
      const vaultPath = this.app.vault.adapter.basePath || this.app.vault.adapter.path || this.app.vault.configDir;
      const { stdout } = await execAsync("git status --porcelain", { cwd: vaultPath });
      if (!stdout.trim()) {
        return [];
      }
      return stdout.split("\n").filter((line) => line.trim()).map((line) => line.substring(3)).filter((file) => {
        const hasValidExtension = this.settings.includeFileTypes.some(
          (ext) => file.endsWith(ext)
        );
        if (!hasValidExtension)
          return false;
        const isExcluded = this.settings.excludePatterns.some(
          (pattern) => file.includes(pattern)
        );
        return !isExcluded;
      });
    } catch (error) {
      console.error("\u83B7\u53D6\u4FEE\u6539\u6587\u4EF6\u5217\u8868\u5931\u8D25:", error);
      return [];
    }
  }
  async generateCommitMessageWithAI(filesToCommit) {
    try {
      console.log("Git Auto Commit - generateCommitMessageWithAI \u5F00\u59CB\u6267\u884C");
      const vaultPath = this.app.vault.adapter.basePath || this.app.vault.adapter.path || this.app.vault.configDir;
      console.log("Git Auto Commit - \u5DE5\u4F5C\u76EE\u5F55:", vaultPath);
      if (filesToCommit.length > 0) {
        console.log("Git Auto Commit - \u6DFB\u52A0\u6307\u5B9A\u6587\u4EF6\u5230\u6682\u5B58\u533A:", filesToCommit);
        for (const file of filesToCommit) {
          await execAsync(`git add "${file}"`, { cwd: vaultPath });
        }
      } else {
        console.log("Git Auto Commit - \u6DFB\u52A0\u6240\u6709\u6587\u4EF6\u5230\u6682\u5B58\u533A");
        await execAsync("git add .", { cwd: vaultPath });
      }
      const { stdout: gitDiff } = await execAsync("git diff --cached --name-status", { cwd: vaultPath });
      const { stdout: gitDiffContent } = await execAsync("git diff --cached", { cwd: vaultPath });
      console.log("Git Auto Commit - Git diff \u72B6\u6001:", gitDiff);
      console.log("Git Auto Commit - Git diff \u5185\u5BB9\u957F\u5EA6:", gitDiffContent.length);
      if (!gitDiff.trim()) {
        console.log("Git Auto Commit - \u6CA1\u6709\u68C0\u6D4B\u5230\u6587\u4EF6\u53D8\u66F4\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u63D0\u4EA4\u4FE1\u606F");
        return "\u66F4\u65B0\u7B14\u8BB0\u5185\u5BB9";
      }
      const fileChanges = this.parseFileChanges(gitDiff);
      const fileCount = fileChanges.length;
      console.log("Git Auto Commit - \u89E3\u6790\u5230\u7684\u6587\u4EF6\u53D8\u66F4:", fileChanges);
      const contextInfo = this.buildContextInfo(fileChanges, gitDiffContent);
      console.log("Git Auto Commit - \u4E0A\u4E0B\u6587\u4FE1\u606F:", contextInfo);
      const systemPrompt = this.buildDynamicPrompt(fileCount);
      console.log("Git Auto Commit - \u7CFB\u7EDF\u63D0\u793A\u8BCD\u957F\u5EA6:", systemPrompt.length);
      console.log("Git Auto Commit - \u5F00\u59CB\u8C03\u7528AI API...");
      const response = await this.callAIProvider(systemPrompt, contextInfo, fileCount);
      console.log("Git Auto Commit - API\u54CD\u5E94\u72B6\u6001:", response.status, response.statusText);
      if (!response.ok) {
        const defaultModel = this.modelManager.getDefaultModel();
        const providerName = defaultModel ? defaultModel.displayName : "AI\u6A21\u578B";
        const errorText = await response.text();
        console.error("Git Auto Commit - API\u8BF7\u6C42\u5931\u8D25:", response.status, errorText);
        throw new Error(`${providerName} API\u8BF7\u6C42\u5931\u8D25: ${response.status} - ${errorText}`);
      }
      const data = await response.json();
      console.log("Git Auto Commit - API\u54CD\u5E94\u6570\u636E:", data);
      console.log("Git Auto Commit - choices\u6570\u7EC4:", data.choices);
      if (data.choices && data.choices[0]) {
        console.log("Git Auto Commit - \u7B2C\u4E00\u4E2Achoice:", data.choices[0]);
        console.log("Git Auto Commit - message\u5BF9\u8C61:", data.choices[0].message);
      }
      if (!data.choices || !data.choices[0]) {
        console.error("Git Auto Commit - API\u54CD\u5E94\u683C\u5F0F\u9519\u8BEF:", data);
        throw new Error("API\u54CD\u5E94\u683C\u5F0F\u9519\u8BEF\uFF1A\u7F3A\u5C11choices\u6570\u7EC4");
      }
      let aiMessage = "";
      const choice = data.choices[0];
      console.log("Git Auto Commit - choice\u7684\u6240\u6709\u5C5E\u6027:", Object.keys(choice));
      if (choice.message) {
        console.log("Git Auto Commit - message\u7684\u6240\u6709\u5C5E\u6027:", Object.keys(choice.message));
        console.log("Git Auto Commit - message\u5185\u5BB9:", choice.message);
      }
      const isReasoningModelByName = this.isReasoningModelByName();
      if (isReasoningModelByName) {
        console.log("Git Auto Commit - \u68C0\u6D4B\u5230\u63A8\u7406\u6A21\u578B\uFF08\u57FA\u4E8E\u6A21\u578B\u540D\u79F0\uFF09\uFF0C\u5C1D\u8BD5\u63D0\u53D6\u6700\u7EC8\u7B54\u6848");
        aiMessage = this.extractFinalAnswerFromReasoning(choice);
      } else {
        const isReasoningModelByResponse = this.isReasoningModelByResponse(choice);
        if (isReasoningModelByResponse) {
          console.log("Git Auto Commit - \u68C0\u6D4B\u5230\u63A8\u7406\u6A21\u578B\uFF08\u57FA\u4E8E\u54CD\u5E94\u7ED3\u6784\uFF09\uFF0C\u5C1D\u8BD5\u63D0\u53D6\u6700\u7EC8\u7B54\u6848");
          aiMessage = this.extractFinalAnswerFromReasoning(choice);
        } else {
          if (choice.message && choice.message.content) {
            const content = choice.message.content;
            if (this.containsReasoningContent(content)) {
              console.log("Git Auto Commit - \u5185\u5BB9\u5305\u542B\u63A8\u7406\u8FC7\u7A0B\uFF0C\u5C1D\u8BD5\u63D0\u53D6\u6700\u7EC8\u7B54\u6848");
              aiMessage = this.extractFinalAnswerFromContent(content);
            } else {
              aiMessage = content;
              console.log("Git Auto Commit - \u4ECEmessage.content\u63D0\u53D6\u5185\u5BB9");
            }
          } else if (choice.delta && choice.delta.content) {
            aiMessage = choice.delta.content;
            console.log("Git Auto Commit - \u4ECEdelta.content\u63D0\u53D6\u5185\u5BB9");
          } else if (choice.text) {
            aiMessage = choice.text;
            console.log("Git Auto Commit - \u4ECEtext\u5B57\u6BB5\u63D0\u53D6\u5185\u5BB9");
          } else if (choice.content) {
            aiMessage = choice.content;
            console.log("Git Auto Commit - \u4ECEcontent\u5B57\u6BB5\u63D0\u53D6\u5185\u5BB9");
          } else if (choice.message && Object.keys(choice.message).length > 0) {
            console.log("Git Auto Commit - \u5C1D\u8BD5\u4ECEmessage\u7684\u5176\u4ED6\u5C5E\u6027\u63D0\u53D6\u5185\u5BB9");
            for (const [key, value] of Object.entries(choice.message)) {
              if (typeof value === "string" && value.trim() && key !== "reasoning") {
                if (this.containsReasoningContent(value)) {
                  console.log(`Git Auto Commit - message.${key}\u5305\u542B\u63A8\u7406\u8FC7\u7A0B\uFF0C\u5C1D\u8BD5\u63D0\u53D6\u6700\u7EC8\u7B54\u6848`);
                  aiMessage = this.extractFinalAnswerFromContent(value);
                } else {
                  aiMessage = value;
                  console.log(`Git Auto Commit - \u4ECEmessage.${key}\u63D0\u53D6\u5185\u5BB9`);
                }
                if (aiMessage)
                  break;
              }
            }
          } else {
            console.warn("Git Auto Commit - \u65E0\u6CD5\u4ECEAPI\u54CD\u5E94\u4E2D\u63D0\u53D6\u6D88\u606F\u5185\u5BB9");
            console.log("Git Auto Commit - \u5B8C\u6574\u7684choice\u5BF9\u8C61:", JSON.stringify(choice, null, 2));
            aiMessage = "";
          }
        }
      }
      aiMessage = aiMessage.trim();
      console.log("Git Auto Commit - AI\u539F\u59CB\u6D88\u606F:", aiMessage);
      console.log("Git Auto Commit - AI\u539F\u59CB\u6D88\u606F\u957F\u5EA6:", aiMessage.length);
      if (!aiMessage) {
        console.warn("Git Auto Commit - AI\u8FD4\u56DE\u7A7A\u5185\u5BB9\uFF0C\u751F\u6210\u57FA\u4E8E\u6587\u4EF6\u53D8\u66F4\u7684\u57FA\u672C\u63D0\u4EA4\u4FE1\u606F");
        if (isReasoningModelByName || this.isReasoningModelByResponse(choice)) {
          console.log("Git Auto Commit - \u68C0\u6D4B\u5230\u63A8\u7406\u6A21\u578B\uFF0C\u4F7F\u7528\u57FA\u672C\u63D0\u4EA4\u4FE1\u606F");
          new import_obsidian3.Notice("\u26A0\uFE0F \u63A8\u7406\u6A21\u578B\u4E0D\u9002\u5408\u751F\u6210\u7B80\u77ED\u7684\u63D0\u4EA4\u4FE1\u606F\uFF0C\u5DF2\u81EA\u52A8\u751F\u6210\u57FA\u4E8E\u6587\u4EF6\u53D8\u66F4\u7684\u63CF\u8FF0");
        }
        const basicMessage = this.generateBasicCommitMessage(fileChanges);
        console.log("Git Auto Commit - \u57FA\u672C\u63D0\u4EA4\u4FE1\u606F:", basicMessage);
        return basicMessage;
      }
      const finalMessage = this.formatCommitMessage(aiMessage);
      console.log("Git Auto Commit - \u683C\u5F0F\u5316\u540E\u7684\u63D0\u4EA4\u4FE1\u606F:", finalMessage);
      return finalMessage;
    } catch (error) {
      console.error("Git Auto Commit - AI\u751F\u6210\u63D0\u4EA4\u4FE1\u606F\u5931\u8D25:", error);
      new import_obsidian3.Notice(`\u274C AI\u751F\u6210\u63D0\u4EA4\u4FE1\u606F\u5931\u8D25: ${error.message}`);
      try {
        const vaultPath = this.app.vault.adapter.basePath || this.app.vault.adapter.path || this.app.vault.configDir;
        const { stdout: gitDiff } = await execAsync("git diff --cached --name-status", { cwd: vaultPath });
        if (gitDiff.trim()) {
          const fileChanges = this.parseFileChanges(gitDiff);
          const basicMessage = this.generateBasicCommitMessage(fileChanges);
          console.log("Git Auto Commit - \u4F7F\u7528\u57FA\u672C\u63D0\u4EA4\u4FE1\u606F\u4F5C\u4E3A\u5907\u7528:", basicMessage);
          return basicMessage;
        }
      } catch (fallbackError) {
        console.error("Git Auto Commit - \u751F\u6210\u57FA\u672C\u63D0\u4EA4\u4FE1\u606F\u4E5F\u5931\u8D25:", fallbackError);
      }
      return `\u66F4\u65B0\u7B14\u8BB0\u5185\u5BB9 - ${new Date().toLocaleString("zh-CN")}`;
    }
  }
  /**
   * 基于模型名称检测是否是推理模型
   */
  isReasoningModelByName() {
    const defaultModel = this.modelManager.getDefaultModel();
    if (defaultModel && defaultModel.modelName) {
      const modelName = defaultModel.modelName.toLowerCase();
      const openaiReasoningModels = ["o1", "o1-preview", "o1-mini", "o3", "o3-mini"];
      for (const model of openaiReasoningModels) {
        if (modelName.includes(model)) {
          console.log(`Git Auto Commit - \u68C0\u6D4B\u5230OpenAI\u63A8\u7406\u6A21\u578B: ${model}`);
          return true;
        }
      }
      if (modelName.includes("glm") && (modelName.includes("think") || modelName.includes("reasoning") || modelName.includes("cot"))) {
        console.log(`Git Auto Commit - \u68C0\u6D4B\u5230\u667A\u8C31AI\u63A8\u7406\u6A21\u578B: ${modelName}`);
        return true;
      }
      if (modelName.includes("deepseek") && (modelName.includes("r1") || modelName.includes("reasoner"))) {
        console.log(`Git Auto Commit - \u68C0\u6D4B\u5230DeepSeek\u63A8\u7406\u6A21\u578B: ${modelName}`);
        return true;
      }
      const reasoningKeywords = ["reasoner", "reasoning", "think", "cot", "chain-of-thought"];
      for (const keyword of reasoningKeywords) {
        if (modelName.includes(keyword)) {
          console.log(`Git Auto Commit - \u6A21\u578B\u540D\u79F0\u5305\u542B\u63A8\u7406\u5173\u952E\u8BCD"${keyword}"\uFF0C\u5224\u5B9A\u4E3A\u63A8\u7406\u6A21\u578B`);
          return true;
        }
      }
    }
    return false;
  }
  /**
   * 基于响应结构检测是否是推理模型
   */
  isReasoningModelByResponse(choice) {
    if (choice.message && choice.message.reasoning) {
      console.log("Git Auto Commit - \u68C0\u6D4B\u5230OpenAI\u63A8\u7406\u6A21\u578B\u5B57\u6BB5: reasoning");
      return true;
    }
    if (choice.message && choice.message.reasoning_content) {
      console.log("Git Auto Commit - \u68C0\u6D4B\u5230\u667A\u8C31AI\u63A8\u7406\u6A21\u578B\u5B57\u6BB5: reasoning_content");
      return true;
    }
    if (choice.message && choice.message.thinking) {
      console.log("Git Auto Commit - \u68C0\u6D4B\u5230\u63A8\u7406\u6A21\u578B\u5B57\u6BB5: thinking");
      return true;
    }
    if (choice.finish_reason && choice.finish_reason.includes("reasoning")) {
      console.log("Git Auto Commit - \u68C0\u6D4B\u5230\u63A8\u7406\u6A21\u578B\u5B8C\u6210\u539F\u56E0\u6807\u8BB0");
      return true;
    }
    return false;
  }
  /**
   * 检测内容是否包含推理过程特征
   */
  containsReasoningContent(content) {
    if (!content || typeof content !== "string") {
      return false;
    }
    const lowerContent = content.toLowerCase();
    const reasoningPhrases = [
      "\u8BA9\u6211\u5206\u6790",
      "\u8BA9\u6211\u6765\u5206\u6790",
      "\u8BA9\u6211\u601D\u8003",
      "\u9996\u5148\u5206\u6790",
      "\u6211\u6765\u5206\u6790",
      "\u8BA9\u6211\u770B\u770B",
      "\u8BA9\u6211\u68C0\u67E5",
      "\u5206\u6790\u4E00\u4E0B",
      "\u6211\u9700\u8981\u5206\u6790",
      "\u4ECE\u63D0\u4F9B\u7684",
      "\u6839\u636E\u63D0\u4F9B\u7684",
      "\u6211\u5206\u6790",
      "\u8BA9\u6211\u4EEC\u5206\u6790",
      "\u9996\u5148\uFF0C\u8BA9\u6211",
      "\u8BA9\u6211\u7406\u89E3"
    ];
    for (const phrase of reasoningPhrases) {
      if (lowerContent.includes(phrase)) {
        console.log(`Git Auto Commit - \u5185\u5BB9\u5305\u542B\u63A8\u7406\u77ED\u8BED"${phrase}"\uFF0C\u5224\u5B9A\u4E3A\u63A8\u7406\u5185\u5BB9`);
        return true;
      }
    }
    if (lowerContent.includes("### ") || lowerContent.includes("## ")) {
      console.log("Git Auto Commit - \u5185\u5BB9\u5305\u542B\u5206\u6BB5\u7ED3\u6784\uFF0C\u53EF\u80FD\u662F\u63A8\u7406\u8FC7\u7A0B");
      return true;
    }
    return false;
  }
  /**
   * 从推理模型的响应中提取最终答案
   */
  extractFinalAnswerFromReasoning(choice) {
    console.log("Git Auto Commit - \u63A8\u7406\u6A21\u578B\u54CD\u5E94\u7ED3\u6784:", JSON.stringify(choice, null, 2));
    let content = "";
    let isReasoningContent = false;
    if (choice.message) {
      if (choice.message.reasoning) {
        console.log("Git Auto Commit - \u68C0\u6D4B\u5230OpenAI\u63A8\u7406\u6A21\u578B\u683C\u5F0F(reasoning\u5B57\u6BB5)");
        content = choice.message.reasoning;
        isReasoningContent = true;
      } else if (choice.message.reasoning_content) {
        console.log("Git Auto Commit - \u68C0\u6D4B\u5230\u667A\u8C31AI\u63A8\u7406\u6A21\u578B\u683C\u5F0F(reasoning_content\u5B57\u6BB5)");
        content = choice.message.reasoning_content;
        isReasoningContent = true;
      } else if (choice.message.content) {
        console.log("Git Auto Commit - \u4F7F\u7528\u6807\u51C6content\u5B57\u6BB5");
        content = choice.message.content;
        isReasoningContent = this.containsReasoningContent(content);
      }
    } else if (choice.text) {
      content = choice.text;
      isReasoningContent = this.containsReasoningContent(content);
      console.log("Git Auto Commit - \u4ECEtext\u5B57\u6BB5\u63D0\u53D6\u5185\u5BB9");
    } else if (choice.content) {
      content = choice.content;
      isReasoningContent = this.containsReasoningContent(content);
      console.log("Git Auto Commit - \u4ECEcontent\u5B57\u6BB5\u63D0\u53D6\u5185\u5BB9");
    }
    if (!content) {
      console.log("Git Auto Commit - \u63A8\u7406\u6A21\u578B\u54CD\u5E94\u4E2D\u672A\u627E\u5230\u53EF\u63D0\u53D6\u7684\u5185\u5BB9");
      return "";
    }
    console.log(
      "Git Auto Commit - \u63D0\u53D6\u5230\u7684\u5185\u5BB9\u957F\u5EA6:",
      content.length,
      "\u662F\u63A8\u7406\u5185\u5BB9:",
      isReasoningContent
    );
    if (isReasoningContent) {
      return this.extractFinalAnswerFromContent(content);
    } else {
      return this.formatCommitMessage(content);
    }
  }
  /**
   * 从包含推理过程的内容中提取最终答案
   */
  extractFinalAnswerFromContent(content) {
    if (!content || typeof content !== "string") {
      return "";
    }
    console.log("Git Auto Commit - \u5F00\u59CB\u4ECE\u63A8\u7406\u5185\u5BB9\u4E2D\u63D0\u53D6\u6700\u7EC8\u7B54\u6848\uFF0C\u5185\u5BB9\u957F\u5EA6:", content.length);
    const finalAnswerPatterns = [
      // 查找"最终答案"、"最终建议"等明确标记
      /(?:最终答案|最终建议|最终提交信息|建议的提交信息|推荐的提交信息)[:：]\s*([\s\S]*?)(?=\n\n|$)/gi,
      // 查找代码块中的答案
      /```(?:git|commit)?\s*((?:(?!```)[\s\S])*?)\s*```/gi,
      // 查找通用代码块
      /```\s*((?:(?!```)[\s\S])*?)\s*```/gi,
      // 查找结论性语句
      /(?:因此|所以|综上|总结|结论)[:：，,]\s*((?:feat|fix|docs|style|refactor|chore|test|perf):\s*[^\n]*(?:\n[\s\S]*?)?)(?=\n\n|$)/gi
    ];
    for (const pattern of finalAnswerPatterns) {
      try {
        const matches = content.matchAll(pattern);
        for (const match of matches) {
          if (match[1]) {
            const extracted = match[1].trim();
            if (this.isValidCommitMessage(extracted)) {
              console.log("Git Auto Commit - \u4ECE\u660E\u786E\u7B54\u6848\u6807\u8BB0\u4E2D\u63D0\u53D6\u5230\u6709\u6548\u63D0\u4EA4\u4FE1\u606F");
              return this.formatCommitMessage(extracted);
            }
          }
        }
      } catch (error) {
        console.warn("Git Auto Commit - \u6B63\u5219\u5339\u914D\u9519\u8BEF:", error);
        continue;
      }
    }
    const commitTypePattern = /((?:feat|fix|docs|style|refactor|chore|test|perf):\s*[^\n]*(?:\n(?:\s*-\s*[^\n]*|\s*\*\s*[^\n]*|\s{2,}[^\n]*)*)*)/gi;
    try {
      const commitMatches = [...content.matchAll(commitTypePattern)];
      if (commitMatches.length > 0) {
        const lastMatch = commitMatches[commitMatches.length - 1];
        if (lastMatch && lastMatch[1]) {
          const extracted = lastMatch[1].trim();
          if (this.isValidCommitMessage(extracted) && extracted.length > 20) {
            console.log("Git Auto Commit - \u4ECE\u63D0\u4EA4\u7C7B\u578B\u6A21\u5F0F\u4E2D\u63D0\u53D6\u5230\u6709\u6548\u63D0\u4EA4\u4FE1\u606F");
            return this.formatCommitMessage(extracted);
          }
        }
      }
    } catch (error) {
      console.warn("Git Auto Commit - \u63D0\u4EA4\u7C7B\u578B\u5339\u914D\u9519\u8BEF:", error);
    }
    const suggestionPatterns = [
      /建议[:：]\s*((?:feat|fix|docs|style|refactor|chore|test|perf):\s*[^\n]*(?:\n[\s\S]*?)?)(?=\n\n|建议|因此|所以|$)/gi,
      /推荐[:：]\s*((?:feat|fix|docs|style|refactor|chore|test|perf):\s*[^\n]*(?:\n[\s\S]*?)?)(?=\n\n|建议|因此|所以|$)/gi,
      /可以写为[:：]\s*((?:feat|fix|docs|style|refactor|chore|test|perf):\s*[^\n]*(?:\n[\s\S]*?)?)(?=\n\n|建议|因此|所以|$)/gi
    ];
    for (const pattern of suggestionPatterns) {
      try {
        const matches = content.matchAll(pattern);
        for (const match of matches) {
          if (match[1]) {
            const extracted = match[1].trim();
            if (this.isValidCommitMessage(extracted)) {
              console.log("Git Auto Commit - \u4ECE\u5EFA\u8BAE\u6027\u8BED\u53E5\u4E2D\u63D0\u53D6\u5230\u6709\u6548\u63D0\u4EA4\u4FE1\u606F");
              return this.formatCommitMessage(extracted);
            }
          }
        }
      } catch (error) {
        console.warn("Git Auto Commit - \u5EFA\u8BAE\u6027\u8BED\u53E5\u5339\u914D\u9519\u8BEF:", error);
        continue;
      }
    }
    console.log("Git Auto Commit - \u672A\u627E\u5230\u660E\u786E\u7684\u6700\u7EC8\u7B54\u6848\uFF0C\u5C1D\u8BD5\u4ECE\u63A8\u7406\u5185\u5BB9\u751F\u6210\u63D0\u4EA4\u4FE1\u606F");
    return this.generateCommitFromReasoning(content);
  }
  /**
   * 检测内容是否被截断
   */
  isContentTruncated(content) {
    if (!content)
      return false;
    const trimmedContent = content.trim();
    const lastChar = trimmedContent.slice(-1);
    const truncationIndicators = ["-", "\u8FD9", "\u3001", "\u662F", "\u7684", "\u4E86", "\u548C", "\u6216", "\u7B49"];
    return truncationIndicators.includes(lastChar) || trimmedContent.endsWith("...") || trimmedContent.length < 50;
  }
  /**
   * 生成备用的基本提交信息
   */
  generateFallbackCommitMessage(content) {
    const lowerContent = content.toLowerCase();
    if (lowerContent.includes("\u5220\u9664") || lowerContent.includes("\u79FB\u9664")) {
      return "chore: \u6E05\u7406\u548C\u5220\u9664\u6587\u4EF6";
    } else if (lowerContent.includes("\u65B0\u589E") || lowerContent.includes("\u6DFB\u52A0") || lowerContent.includes("\u521B\u5EFA")) {
      return "feat: \u6DFB\u52A0\u65B0\u6587\u4EF6\u548C\u529F\u80FD";
    } else if (lowerContent.includes("\u4FEE\u6539") || lowerContent.includes("\u66F4\u65B0") || lowerContent.includes("\u6539\u52A8")) {
      return "docs: \u66F4\u65B0\u6587\u6863\u548C\u914D\u7F6E\u6587\u4EF6";
    } else if (lowerContent.includes("\u91CD\u6784") || lowerContent.includes("\u4F18\u5316")) {
      return "refactor: \u91CD\u6784\u4EE3\u7801\u7ED3\u6784";
    } else if (lowerContent.includes("\u4FEE\u590D") || lowerContent.includes("\u4FEE\u6B63")) {
      return "fix: \u4FEE\u590D\u95EE\u9898";
    } else if (lowerContent.includes("\u683C\u5F0F") || lowerContent.includes("\u6837\u5F0F")) {
      return "style: \u8C03\u6574\u683C\u5F0F\u548C\u6837\u5F0F";
    }
    return "chore: \u66F4\u65B0\u9879\u76EE\u6587\u4EF6";
  }
  /**
   * 基于推理内容生成合适的提交信息
   */
  generateCommitFromReasoning(content) {
    console.log("Git Auto Commit - \u5F00\u59CB\u57FA\u4E8E\u63A8\u7406\u5185\u5BB9\u751F\u6210\u63D0\u4EA4\u4FE1\u606F");
    const lowerContent = content.toLowerCase();
    let commitType = "chore";
    let description = "\u66F4\u65B0\u9879\u76EE\u6587\u4EF6";
    let details = [];
    const fileMatches = content.match(/(?:新增|添加|创建|删除|移除|修改|更新)(?:了)?(?:\s*[:：]?\s*)?([^\n，。,;；]*)/gi);
    if (fileMatches) {
      fileMatches.forEach((match) => {
        const cleanMatch = match.replace(/^(?:新增|添加|创建|删除|移除|修改|更新)(?:了)?(?:\s*[:：]?\s*)?/, "").trim();
        if (cleanMatch && cleanMatch.length > 0 && cleanMatch.length < 50) {
          details.push(cleanMatch);
        }
      });
    }
    if (lowerContent.includes("\u5220\u9664") || lowerContent.includes("\u79FB\u9664")) {
      commitType = "chore";
      if (lowerContent.includes("\u6587\u6863") || lowerContent.includes("markdown") || lowerContent.includes(".md")) {
        description = "\u6E05\u7406\u9879\u76EE\u6587\u6863";
      } else if (lowerContent.includes("\u914D\u7F6E") || lowerContent.includes("\u63D2\u4EF6") || lowerContent.includes("\u8F85\u52A9\u5DE5\u5177")) {
        description = "\u79FB\u9664\u8F85\u52A9\u5DE5\u5177\u6587\u4EF6";
      } else if (details.length > 0) {
        description = `\u6E05\u7406${details[0]}\u7B49\u6587\u4EF6`;
      } else {
        description = "\u6E05\u7406\u9879\u76EE\u6587\u4EF6";
      }
    } else if (lowerContent.includes("\u65B0\u589E") || lowerContent.includes("\u6DFB\u52A0") || lowerContent.includes("\u521B\u5EFA")) {
      commitType = "feat";
      if (lowerContent.includes("\u6587\u6863") || lowerContent.includes("markdown")) {
        description = "\u6DFB\u52A0\u9879\u76EE\u6587\u6863";
      } else if (lowerContent.includes("\u529F\u80FD") || lowerContent.includes("\u7279\u6027")) {
        description = "\u6DFB\u52A0\u65B0\u529F\u80FD";
      } else if (details.length > 0) {
        description = `\u6DFB\u52A0${details[0]}\u7B49\u6587\u4EF6`;
      } else {
        description = "\u6DFB\u52A0\u65B0\u5185\u5BB9";
      }
    } else if (lowerContent.includes("\u4FEE\u6539") || lowerContent.includes("\u66F4\u65B0")) {
      if (lowerContent.includes("\u6587\u6863") || lowerContent.includes("markdown")) {
        commitType = "docs";
        description = "\u66F4\u65B0\u9879\u76EE\u6587\u6863";
      } else if (lowerContent.includes("\u914D\u7F6E")) {
        commitType = "chore";
        description = "\u66F4\u65B0\u914D\u7F6E\u6587\u4EF6";
      } else if (lowerContent.includes("\u529F\u80FD")) {
        commitType = "feat";
        description = "\u66F4\u65B0\u529F\u80FD";
      } else if (details.length > 0) {
        commitType = "feat";
        description = `\u66F4\u65B0${details[0]}`;
      } else {
        commitType = "feat";
        description = "\u66F4\u65B0\u5185\u5BB9";
      }
    } else if (lowerContent.includes("\u4FEE\u590D") || lowerContent.includes("\u4FEE\u6B63")) {
      commitType = "fix";
      description = "\u4FEE\u590D\u95EE\u9898";
    } else if (lowerContent.includes("\u91CD\u6784") || lowerContent.includes("\u4F18\u5316")) {
      commitType = "refactor";
      description = "\u91CD\u6784\u4EE3\u7801";
    } else if (lowerContent.includes("\u683C\u5F0F") || lowerContent.includes("\u6837\u5F0F")) {
      commitType = "style";
      description = "\u8C03\u6574\u683C\u5F0F";
    }
    let result = `${commitType}: ${description}`;
    if (details.length > 0 && details.length <= 3) {
      result += "\n\n";
      details.forEach((detail) => {
        if (detail.trim()) {
          result += `- ${detail.trim()}
`;
        }
      });
      result = result.trim();
    } else if (details.length > 3) {
      result += `

- \u5305\u542B${details.length}\u4E2A\u6587\u4EF6\u7684\u53D8\u66F4`;
    }
    console.log("Git Auto Commit - \u57FA\u4E8E\u63A8\u7406\u5185\u5BB9\u751F\u6210\u63D0\u4EA4\u4FE1\u606F:", result);
    return result;
  }
  /**
   * 验证提取的内容是否像一个有效的提交信息
   */
  isValidCommitMessage(message) {
    if (!message || message.length < 5) {
      return false;
    }
    const commitTypes = ["feat", "fix", "docs", "style", "refactor", "chore", "test", "perf"];
    const hasCommitType = commitTypes.some(
      (type) => message.toLowerCase().startsWith(type + ":") || message.toLowerCase().includes(type + ":")
    );
    if (hasCommitType) {
      return true;
    }
    const commitVerbs = ["\u65B0\u589E", "\u4FEE\u6539", "\u5220\u9664", "\u66F4\u65B0", "\u91CD\u6784", "\u6DFB\u52A0", "\u79FB\u9664", "\u4F18\u5316", "\u4FEE\u590D"];
    const hasCommitVerb = commitVerbs.some((verb) => message.includes(verb));
    if (hasCommitVerb && message.length > 10) {
      return true;
    }
    const reasoningIndicators = ["\u8BA9\u6211", "\u6211\u6765", "\u5206\u6790", "\u9996\u5148", "\u7136\u540E", "\u63A5\u4E0B\u6765", "\u6839\u636E"];
    const hasReasoningIndicator = reasoningIndicators.some(
      (indicator) => message.startsWith(indicator)
    );
    return !hasReasoningIndicator;
  }
  /**
   * 生成基于文件变更的基本提交信息
   */
  generateBasicCommitMessage(fileChanges) {
    if (fileChanges.length === 0) {
      return "\u66F4\u65B0\u6587\u4EF6\u5185\u5BB9";
    }
    if (fileChanges.length === 1) {
      const change = fileChanges[0];
      return `${change.status} ${change.file}`;
    }
    const statusCounts = fileChanges.reduce((acc, change) => {
      acc[change.status] = (acc[change.status] || 0) + 1;
      return acc;
    }, {});
    const parts = [];
    for (const [status, count] of Object.entries(statusCounts)) {
      if (count === 1) {
        parts.push(status);
      } else {
        parts.push(`${status}${count}\u4E2A\u6587\u4EF6`);
      }
    }
    return parts.join("\uFF0C");
  }
  /**
   * 解析文件变更信息
   */
  parseFileChanges(gitDiff) {
    return gitDiff.split("\n").filter((line) => line.trim()).map((line) => {
      var _a;
      const [status, file] = line.split("	");
      const fileExtension = ((_a = file.split(".").pop()) == null ? void 0 : _a.toLowerCase()) || "";
      const fileType = this.getFileType(fileExtension);
      return {
        status: this.translateStatus(status),
        file,
        type: fileType
      };
    });
  }
  /**
   * 翻译Git状态码
   */
  translateStatus(status) {
    const statusMap = {
      "A": "\u65B0\u589E",
      "M": "\u4FEE\u6539",
      "D": "\u5220\u9664",
      "R": "\u91CD\u547D\u540D",
      "C": "\u590D\u5236",
      "U": "\u66F4\u65B0"
    };
    return statusMap[status] || "\u4FEE\u6539";
  }
  /**
   * 获取文件类型
   */
  getFileType(extension) {
    const typeMap = {
      "md": "\u7B14\u8BB0",
      "txt": "\u6587\u672C",
      "json": "\u914D\u7F6E",
      "js": "\u811A\u672C",
      "ts": "\u811A\u672C",
      "css": "\u6837\u5F0F",
      "html": "\u9875\u9762",
      "png": "\u56FE\u7247",
      "jpg": "\u56FE\u7247",
      "jpeg": "\u56FE\u7247",
      "gif": "\u56FE\u7247",
      "pdf": "\u6587\u6863",
      "canvas": "\u753B\u5E03"
    };
    return typeMap[extension] || "\u6587\u4EF6";
  }
  /**
   * 构建上下文信息
   */
  buildContextInfo(fileChanges, diffContent) {
    const summary = fileChanges.map(
      (change) => `${change.status} ${change.file} (${change.type})`
    ).join("\n");
    let details = diffContent;
    if (details.length > 5e3) {
      const lines = details.split("\n");
      const importantLines = lines.filter(
        (line) => line.startsWith("+++") || line.startsWith("---") || line.startsWith("@@") || line.startsWith("+") && !line.startsWith("+++") && line.length > 20 || line.startsWith("-") && !line.startsWith("---") && line.length > 20
      ).slice(0, 50);
      details = importantLines.join("\n") + "\n... (\u5185\u5BB9\u5DF2\u622A\u65AD)";
    }
    return { summary, details };
  }
  /**
   * 根据文件数量构建动态提示词
   */
  buildDynamicPrompt(fileCount) {
    const isReasoningModel = this.isReasoningModelByName();
    const basePrompt = `\u4F60\u662F\u4E00\u4E2A\u4E13\u4E1A\u7684Git\u63D0\u4EA4\u4FE1\u606F\u751F\u6210\u52A9\u624B\u3002\u8BF7\u6839\u636E\u63D0\u4F9B\u7684git diff\u5185\u5BB9\uFF0C\u751F\u6210\u7B26\u5408Conventional Commits\u89C4\u8303\u7684\u8BE6\u7EC6\u63D0\u4EA4\u4FE1\u606F\u3002

## \u8F93\u51FA\u683C\u5F0F\u8981\u6C42\uFF1A
\u5FC5\u987B\u4F7F\u7528\u4EE5\u4E0B\u683C\u5F0F\u8F93\u51FA\uFF1A

\`\`\`
<type>: <\u7B80\u77ED\u63CF\u8FF0>

<\u8BE6\u7EC6\u5185\u5BB9>
\`\`\`

## \u63D0\u4EA4\u7C7B\u578B\u89C4\u8303\uFF1A
- feat: \u65B0\u589E\u529F\u80FD\u6216\u7279\u6027
- fix: \u4FEE\u590D\u95EE\u9898\u6216\u9519\u8BEF  
- docs: \u6587\u6863\u76F8\u5173\u53D8\u66F4
- style: \u683C\u5F0F\u8C03\u6574\uFF08\u4E0D\u5F71\u54CD\u4EE3\u7801\u903B\u8F91\uFF09
- refactor: \u91CD\u6784\u4EE3\u7801
- chore: \u6784\u5EFA\u8FC7\u7A0B\u6216\u8F85\u52A9\u5DE5\u5177\u7684\u53D8\u52A8
- test: \u6D4B\u8BD5\u76F8\u5173
- perf: \u6027\u80FD\u4F18\u5316`;
    const reasoningInstructions = isReasoningModel ? `

## \u7279\u522B\u8BF4\u660E\uFF08\u63A8\u7406\u6A21\u578B\uFF09\uFF1A
\u{1F50D} \u8BF7\u5728\u5206\u6790\u8FC7\u7A0B\u7ED3\u675F\u540E\uFF0C\u5728\u56DE\u7B54\u7684\u6700\u540E\u90E8\u5206\u660E\u786E\u7ED9\u51FA\u6700\u7EC8\u7684\u63D0\u4EA4\u4FE1\u606F\u3002
\u{1F4DD} \u6700\u7EC8\u7B54\u6848\u5FC5\u987B\u653E\u5728\u4EE3\u7801\u5757\u4E2D\uFF0C\u683C\u5F0F\u5982\u4E0B\uFF1A

\u6700\u7EC8\u7B54\u6848\uFF1A
\`\`\`
<type>: <\u7B80\u77ED\u63CF\u8FF0>

<\u8BE6\u7EC6\u5185\u5BB9>
\`\`\`

\u26A0\uFE0F \u91CD\u8981\uFF1A\u786E\u4FDD\u6700\u7EC8\u7B54\u6848\u5B8C\u6574\uFF0C\u5305\u542B\u7C7B\u578B\u524D\u7F00\u548C\u8BE6\u7EC6\u63CF\u8FF0\u3002` : "";
    if (fileCount <= 5) {
      return basePrompt + reasoningInstructions + `

## \u8BE6\u7EC6\u63CF\u8FF0\u8981\u6C42\uFF08\u5C11\u91CF\u6587\u4EF6\uFF09\uFF1A
- \u4E3A\u6BCF\u4E2A\u91CD\u8981\u6587\u4EF6\u751F\u6210\u4E00\u884C\u8BE6\u7EC6\u63CF\u8FF0
- \u8BF4\u660E\u6587\u4EF6\u7684\u5177\u4F53\u6539\u52A8\u5185\u5BB9\u548C\u76EE\u7684
- \u7A81\u51FA\u53D8\u66F4\u7684\u4E1A\u52A1\u4EF7\u503C\u6216\u6280\u672F\u610F\u4E49

## \u793A\u4F8B\u8F93\u51FA\uFF1A
\`\`\`
feat: \u6DFB\u52A0\u7528\u6237\u8BA4\u8BC1\u548C\u6743\u9650\u7BA1\u7406\u529F\u80FD

\u65B0\u589E\u4E86\u5B8C\u6574\u7684\u7528\u6237\u8BA4\u8BC1\u7CFB\u7EDF\uFF1A
- UserService.js: \u5B9E\u73B0\u7528\u6237\u767B\u5F55\u3001\u6CE8\u518C\u548C\u5BC6\u7801\u91CD\u7F6E\u529F\u80FD
- AuthMiddleware.js: \u6DFB\u52A0JWT\u4EE4\u724C\u9A8C\u8BC1\u4E2D\u95F4\u4EF6
- PermissionManager.js: \u5B9E\u73B0\u57FA\u4E8E\u89D2\u8272\u7684\u6743\u9650\u63A7\u5236

\u66F4\u65B0\u4E86\u76F8\u5173\u914D\u7F6E\u6587\u4EF6\uFF1A
- config/auth.json: \u914D\u7F6E\u8BA4\u8BC1\u670D\u52A1\u7684\u53C2\u6570\u548C\u5B89\u5168\u7B56\u7565
- README.md: \u6DFB\u52A0\u8BA4\u8BC1\u529F\u80FD\u7684\u4F7F\u7528\u8BF4\u660E\u548CAPI\u6587\u6863
\`\`\``;
    } else {
      return basePrompt + reasoningInstructions + `

## \u8BE6\u7EC6\u63CF\u8FF0\u8981\u6C42\uFF08\u5927\u91CF\u6587\u4EF6\uFF09\uFF1A
- \u6309\u529F\u80FD\u6A21\u5757\u6216\u6587\u4EF6\u7C7B\u578B\u5206\u7EC4\u63CF\u8FF0
- \u6BCF\u4E2A\u5206\u7EC4\u8BF4\u660E\u6574\u4F53\u7684\u53D8\u66F4\u76EE\u7684
- \u9002\u5F53\u63D0\u53CA\u91CD\u8981\u6587\u4EF6\u6570\u91CF\u548C\u4E3B\u8981\u6539\u52A8

## \u793A\u4F8B\u8F93\u51FA\uFF1A
\`\`\`
feat: \u91CD\u6784\u9879\u76EE\u67B6\u6784\u5E76\u6DFB\u52A0\u591A\u4E2A\u6838\u5FC3\u6A21\u5757

\u65B0\u589E\u6838\u5FC3\u4E1A\u52A1\u6A21\u5757\uFF08\u51718\u4E2A\u6587\u4EF6\uFF09\uFF1A
- \u7528\u6237\u7BA1\u7406\u6A21\u5757: \u5B8C\u6574\u7684\u7528\u6237CRUD\u64CD\u4F5C\u548C\u6743\u9650\u63A7\u5236
- \u6570\u636E\u5904\u7406\u6A21\u5757: \u5B9E\u73B0\u6570\u636E\u9A8C\u8BC1\u3001\u8F6C\u6362\u548C\u5B58\u50A8\u903B\u8F91
- API\u7F51\u5173\u6A21\u5757: \u7EDF\u4E00\u7684\u8BF7\u6C42\u8DEF\u7531\u548C\u54CD\u5E94\u5904\u7406

\u66F4\u65B0\u9879\u76EE\u914D\u7F6E\u548C\u6587\u6863\uFF08\u51715\u4E2A\u6587\u4EF6\uFF09\uFF1A
- \u91CD\u6784\u4E86\u9879\u76EE\u76EE\u5F55\u7ED3\u6784\u548C\u4F9D\u8D56\u7BA1\u7406
- \u66F4\u65B0\u4E86\u90E8\u7F72\u811A\u672C\u548C\u73AF\u5883\u914D\u7F6E
- \u5B8C\u5584\u4E86API\u6587\u6863\u548C\u5F00\u53D1\u6307\u5357

\u4F18\u5316\u73B0\u6709\u529F\u80FD\u6A21\u5757\uFF08\u517112\u4E2A\u6587\u4EF6\uFF09\uFF1A
- \u91CD\u6784\u4E86\u6570\u636E\u5E93\u8BBF\u95EE\u5C42\uFF0C\u63D0\u9AD8\u67E5\u8BE2\u6027\u80FD
- \u4F18\u5316\u4E86\u524D\u7AEF\u7EC4\u4EF6\u7ED3\u6784\uFF0C\u589E\u5F3A\u53EF\u7EF4\u62A4\u6027
- \u7EDF\u4E00\u4E86\u4EE3\u7801\u98CE\u683C\u548C\u9519\u8BEF\u5904\u7406\u673A\u5236
\`\`\``;
    }
  }
  /**
   * 格式化提交信息
   */
  formatCommitMessage(aiMessage) {
    let cleanMessage = aiMessage.replace(/^["']|["']$/g, "").replace(/^提交信息[:：]\s*/, "").trim();
    cleanMessage = cleanMessage.replace(/^```[\s\S]*?\n/, "").replace(/\n```$/, "").replace(/^```/g, "").replace(/```$/g, "").trim();
    if (!cleanMessage) {
      return "\u66F4\u65B0\u7B14\u8BB0\u5185\u5BB9";
    }
    const lines = cleanMessage.split("\n").map((line) => line.trim()).filter((line) => line.length > 0);
    if (lines.length === 0) {
      return "\u66F4\u65B0\u7B14\u8BB0\u5185\u5BB9";
    }
    if (lines.length === 1 && lines[0].length < 20) {
      return `${lines[0]} - ${new Date().toLocaleString("zh-CN", { month: "numeric", day: "numeric", hour: "2-digit", minute: "2-digit" })}`;
    }
    return lines.join("\n");
  }
  /**
   * 转义提交信息中的特殊字符，支持多行提交信息
   */
  escapeCommitMessage(message) {
    if (message.includes("\n")) {
      return message.split("\n").map((line) => line.trim()).filter((line) => line.length > 0).map((line) => {
        return line.replace(/"/g, '\\"').replace(/\\/g, "\\\\").replace(/[\x00-\x1F\x7F]/g, "");
      }).join("\n");
    } else {
      let escaped = message.replace(/\s+/g, " ").replace(/"/g, '\\"').replace(/\\/g, "\\\\").replace(/[\x00-\x1F\x7F]/g, "").trim();
      if (escaped.length > 500) {
        escaped = escaped.substring(0, 497) + "...";
      }
      if (!escaped) {
        escaped = "\u66F4\u65B0\u6587\u4EF6\u5185\u5BB9";
      }
      return escaped;
    }
  }
  /**
   * 调用AI提供商API
   */
  async callAIProvider(systemPrompt, contextInfo, fileCount) {
    const defaultModel = this.modelManager.getDefaultModel();
    console.log("Git Auto Commit - callAIProvider \u83B7\u53D6\u5230\u7684\u9ED8\u8BA4\u6A21\u578B:", defaultModel);
    if (!defaultModel) {
      throw new Error("\u672A\u914D\u7F6E\u9ED8\u8BA4AI\u6A21\u578B");
    }
    const maxTokens = defaultModel.maxOutputTokens;
    console.log("Git Auto Commit - \u4F7F\u7528\u6A21\u578B\u914D\u7F6E\u7684max_tokens:", maxTokens);
    console.log("Git Auto Commit - \u6587\u4EF6\u6570\u91CF:", fileCount);
    if (fileCount > 50) {
      console.log("Git Auto Commit - \u6587\u4EF6\u8F83\u591A\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u8F83\u5927\u7684token\u9650\u5236\u4EE5\u83B7\u5F97\u8BE6\u7EC6\u63CF\u8FF0");
    } else if (fileCount > 20) {
      console.log("Git Auto Commit - \u6587\u4EF6\u6570\u91CF\u4E2D\u7B49\uFF0C\u5F53\u524Dtoken\u914D\u7F6E\u5E94\u8BE5\u8DB3\u591F");
    } else {
      console.log("Git Auto Commit - \u6587\u4EF6\u8F83\u5C11\uFF0C\u5F53\u524Dtoken\u914D\u7F6E\u5145\u8DB3");
    }
    const userContent = `\u8BF7\u4E3A\u4EE5\u4E0BGit\u53D8\u66F4\u751F\u6210\u63D0\u4EA4\u4FE1\u606F\uFF1A

\u6587\u4EF6\u53D8\u66F4\u7EDF\u8BA1\uFF1A
${contextInfo.summary}

\u8BE6\u7EC6\u53D8\u66F4\u5185\u5BB9\uFF1A
${contextInfo.details}`;
    const requestBody = this.buildAPIRequestBody(systemPrompt, userContent, maxTokens, defaultModel);
    const headers = this.buildAPIHeaders(defaultModel);
    console.log("Git Auto Commit - API\u8BF7\u6C42URL:", `${defaultModel.baseURL}/chat/completions`);
    console.log("Git Auto Commit - API\u8BF7\u6C42\u5934:", headers);
    console.log("Git Auto Commit - API\u8BF7\u6C42\u4F53:", JSON.stringify(requestBody, null, 2));
    return fetch(`${defaultModel.baseURL}/chat/completions`, {
      method: "POST",
      headers,
      body: JSON.stringify(requestBody)
    });
  }
  /**
   * 构建API请求体
   */
  buildAPIRequestBody(systemPrompt, userContent, maxTokens, model) {
    const baseBody = {
      model: model.modelName,
      messages: [
        {
          role: "system",
          content: systemPrompt
        },
        {
          role: "user",
          content: userContent
        }
      ],
      max_tokens: maxTokens,
      temperature: 0.7
    };
    switch (model.provider) {
      case "zhipu":
        return {
          ...baseBody,
          top_p: 0.7,
          stream: false
        };
      case "qwen":
        return {
          ...baseBody,
          top_p: 0.8,
          enable_search: false
        };
      case "openrouter":
        return {
          ...baseBody,
          top_p: 0.9
        };
      default:
        return baseBody;
    }
  }
  /**
   * 构建API请求头
   */
  buildAPIHeaders(model) {
    const baseHeaders = {
      "Content-Type": "application/json"
    };
    switch (model.provider) {
      case "deepseek":
        return {
          ...baseHeaders,
          "Authorization": `Bearer ${model.apiKey}`
        };
      case "zhipu":
        return {
          ...baseHeaders,
          "Authorization": `Bearer ${model.apiKey}`
        };
      case "qwen":
        return {
          ...baseHeaders,
          "Authorization": `Bearer ${model.apiKey}`,
          "X-DashScope-SSE": "disable"
        };
      case "openrouter":
        return {
          ...baseHeaders,
          "Authorization": `Bearer ${model.apiKey}`,
          "HTTP-Referer": "https://obsidian.md",
          "X-Title": "Obsidian Git Auto Commit"
        };
      default:
        return {
          ...baseHeaders,
          "Authorization": `Bearer ${model.apiKey}`
        };
    }
  }
  async executeGitOperations(filesToCommit, commitMessage) {
    const vaultPath = this.app.vault.adapter.basePath || this.app.vault.adapter.path || this.app.vault.configDir;
    try {
      if (filesToCommit.length > 0) {
        for (const file of filesToCommit) {
          await execAsync(`git add "${file}"`, { cwd: vaultPath });
        }
      } else {
        await execAsync("git add .", { cwd: vaultPath });
      }
      const { stdout: stagedFiles } = await execAsync("git diff --cached --name-only", { cwd: vaultPath });
      if (!stagedFiles.trim()) {
        throw new Error("\u6CA1\u6709\u6587\u4EF6\u9700\u8981\u63D0\u4EA4");
      }
      const escapedMessage = this.escapeCommitMessage(commitMessage);
      if (escapedMessage.includes("\n")) {
        const { writeFile, unlink } = require("fs").promises;
        const path = require("path");
        const tmpFile = path.join(vaultPath, ".git_commit_msg_tmp");
        try {
          await writeFile(tmpFile, escapedMessage, "utf8");
          await execAsync(`git commit -F "${tmpFile}"`, { cwd: vaultPath });
          await unlink(tmpFile);
        } catch (error) {
          try {
            await unlink(tmpFile);
          } catch (unlinkError) {
          }
          throw error;
        }
      } else {
        await execAsync(`git commit -m "${escapedMessage}"`, { cwd: vaultPath });
      }
      if (this.settings.pushToRemote) {
        await execAsync(`git push origin ${this.settings.remoteBranch}`, { cwd: vaultPath });
      }
    } catch (error) {
      throw new Error(`Git\u64CD\u4F5C\u5931\u8D25: ${error.message}`);
    }
  }
  async showFileSelectionModal(files) {
    return new Promise((resolve) => {
      const modal = new FileSelectionModal(this.app, files, resolve);
      modal.open();
    });
  }
  async showCommitMessageModal(defaultMessage) {
    return new Promise((resolve) => {
      const modal = new CommitMessageModal(this.app, defaultMessage, resolve);
      modal.open();
    });
  }
  debugAIConfig() {
    console.log("=== Git Auto Commit \u8C03\u8BD5\u4FE1\u606F ===");
    console.log("\u63D2\u4EF6\u8BBE\u7F6E:", this.settings);
    console.log("\u6A21\u578B\u7BA1\u7406\u5668:", this.modelManager);
    const allModels = this.modelManager.getAllModels();
    console.log("\u6240\u6709\u6A21\u578B\u6570\u91CF:", allModels.length);
    console.log("\u6240\u6709\u6A21\u578B:", allModels);
    const verifiedModels = this.modelManager.getVerifiedModels();
    console.log("\u5DF2\u9A8C\u8BC1\u7684\u6A21\u578B\u6570\u91CF:", verifiedModels.length);
    console.log("\u5DF2\u9A8C\u8BC1\u7684\u6A21\u578B:", verifiedModels);
    const defaultModel = this.modelManager.getDefaultModel();
    console.log("\u9ED8\u8BA4\u6A21\u578B:", defaultModel);
    console.log("\u9ED8\u8BA4\u6A21\u578BID:", this.modelManager.getDefaultModelId());
    new import_obsidian3.Notice("\u8C03\u8BD5\u4FE1\u606F\u5DF2\u8F93\u51FA\u5230\u63A7\u5236\u53F0\uFF0C\u8BF7\u6309F12\u67E5\u770B");
  }
  async debugDataStatus() {
    console.log("=== Git Auto Commit \u6570\u636E\u72B6\u6001\u8C03\u8BD5 ===");
    console.log("\u6570\u636E\u7BA1\u7406\u5668:", this.dataManager);
    console.log("\u6570\u636E\u6587\u4EF6\u8DEF\u5F84:", this.dataManager.getDataFilePath());
    console.log("\u6570\u636E\u6587\u4EF6\u662F\u5426\u5B58\u5728:", await this.dataManager.dataFileExists());
    console.log("\u5F53\u524D\u63D2\u4EF6\u8BBE\u7F6E:", this.dataManager.getSettings());
    console.log("\u5F53\u524D\u6A21\u578B\u914D\u7F6E:", this.dataManager.getAllModels());
    console.log("\u9ED8\u8BA4\u6A21\u578BID:", this.dataManager.getDefaultModelId());
    const exportedConfig = this.dataManager.exportConfig();
    console.log("\u5B8C\u6574\u914D\u7F6E\u5BFC\u51FA:", exportedConfig);
    new import_obsidian3.Notice("\u6570\u636E\u72B6\u6001\u8C03\u8BD5\u4FE1\u606F\u5DF2\u8F93\u51FA\u5230\u63A7\u5236\u53F0\uFF0C\u8BF7\u6309F12\u67E5\u770B");
  }
  async resetPluginData() {
    try {
      await this.dataManager.resetToDefaults();
      await this.loadSettings();
      new import_obsidian3.Notice("\u2705 \u63D2\u4EF6\u6570\u636E\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u72B6\u6001");
      console.log("Git Auto Commit - \u63D2\u4EF6\u6570\u636E\u5DF2\u91CD\u7F6E");
    } catch (error) {
      console.error("Git Auto Commit - \u91CD\u7F6E\u63D2\u4EF6\u6570\u636E\u5931\u8D25:", error);
      new import_obsidian3.Notice(`\u274C \u91CD\u7F6E\u5931\u8D25: ${error.message}`);
    }
  }
};
var FileSelectionModal = class extends import_obsidian3.Modal {
  constructor(app, files, onSelect) {
    super(app);
    this.files = files;
    this.onSelect = onSelect;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("git-auto-commit");
    contentEl.createEl("h2", { text: "\u9009\u62E9\u8981\u63D0\u4EA4\u7684\u6587\u4EF6", cls: "modal-title" });
    const fileList = contentEl.createEl("div", { cls: "file-list" });
    this.files.forEach((file) => {
      const fileItem = fileList.createEl("div", {
        cls: "file-item",
        text: `\u{1F4C4} ${file}`
      });
      fileItem.style.padding = "10px";
      fileItem.style.cursor = "pointer";
      fileItem.style.borderRadius = "5px";
      fileItem.style.margin = "5px 0";
      fileItem.addEventListener("mouseenter", () => {
        fileItem.style.backgroundColor = "var(--background-modifier-hover)";
      });
      fileItem.addEventListener("mouseleave", () => {
        fileItem.style.backgroundColor = "";
      });
      fileItem.addEventListener("click", () => {
        this.onSelect(file);
        this.close();
      });
    });
    const buttonContainer = contentEl.createEl("div", { cls: "button-container" });
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.textAlign = "right";
    const cancelButton = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelButton.addEventListener("click", () => {
      this.onSelect(null);
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var CommitMessageModal = class extends import_obsidian3.Modal {
  constructor(app, defaultMessage, onSubmit) {
    super(app);
    this.defaultMessage = defaultMessage;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("git-auto-commit");
    contentEl.createEl("h2", { text: "\u8F93\u5165\u63D0\u4EA4\u4FE1\u606F", cls: "modal-title" });
    const inputEl = contentEl.createEl("textarea", {
      cls: "commit-message-input",
      placeholder: "\u8BF7\u8F93\u5165\u63D0\u4EA4\u4FE1\u606F...",
      value: this.defaultMessage || `\u66F4\u65B0\u7B14\u8BB0 - ${new Date().toLocaleString("zh-CN")}`
    });
    inputEl.style.width = "100%";
    inputEl.style.height = "100px";
    inputEl.style.marginBottom = "20px";
    inputEl.style.padding = "10px";
    inputEl.style.borderRadius = "5px";
    inputEl.style.border = "1px solid var(--background-modifier-border)";
    inputEl.style.backgroundColor = "var(--background-primary)";
    inputEl.style.color = "var(--text-normal)";
    inputEl.style.resize = "vertical";
    const buttonContainer = contentEl.createEl("div", { cls: "button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "space-between";
    const submitButton = buttonContainer.createEl("button", { text: "\u63D0\u4EA4" });
    submitButton.style.backgroundColor = "var(--interactive-accent)";
    submitButton.style.color = "var(--text-on-accent)";
    const cancelButton = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    submitButton.addEventListener("click", () => {
      const message = inputEl.value.trim();
      if (message) {
        this.onSubmit(message);
        this.close();
      } else {
        new import_obsidian3.Notice("\u8BF7\u8F93\u5165\u63D0\u4EA4\u4FE1\u606F");
      }
    });
    cancelButton.addEventListener("click", () => {
      this.onSubmit(null);
      this.close();
    });
    inputEl.focus();
    inputEl.select();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var GitAutoCommitSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.defaultModelSelector = null;
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("git-auto-commit-settings");
    containerEl.createEl("h2", { text: "Git\u81EA\u52A8\u63D0\u4EA4\u8BBE\u7F6E" });
    const aiSettingsHeader = containerEl.createEl("div", { cls: "ai-settings-header" });
    aiSettingsHeader.style.display = "flex";
    aiSettingsHeader.style.justifyContent = "space-between";
    aiSettingsHeader.style.alignItems = "center";
    aiSettingsHeader.style.marginBottom = "16px";
    const aiTitle = aiSettingsHeader.createEl("h3", { text: "\u{1F916} AI\u8BBE\u7F6E" });
    aiTitle.style.margin = "0";
    const addModelButton = aiSettingsHeader.createEl("button", { text: "\u6DFB\u52A0AI\u6A21\u578B", cls: "mod-cta" });
    addModelButton.addEventListener("click", () => {
      const modal = new ModelManagementModal(this.app, this.plugin.modelManager, () => {
        this.refreshDefaultModelSelector();
      });
      modal.open();
    });
    const defaultModelSetting = new import_obsidian3.Setting(containerEl).setName("\u9ED8\u8BA4\u6A21\u578B").setDesc("\u9009\u62E9\u7528\u4E8E\u751F\u6210\u63D0\u4EA4\u4FE1\u606F\u7684\u9ED8\u8BA4AI\u6A21\u578B");
    const selectorContainer = defaultModelSetting.controlEl.createEl("div");
    this.defaultModelSelector = new DefaultModelSelector(
      selectorContainer,
      this.plugin.modelManager,
      (modelId) => {
        console.log("\u9ED8\u8BA4\u6A21\u578B\u5DF2\u5207\u6362:", modelId);
      }
    );
    containerEl.createEl("h3", { text: "\u2699\uFE0F \u9ED8\u8BA4\u884C\u4E3A" });
    new import_obsidian3.Setting(containerEl).setName("\u9ED8\u8BA4\u63D0\u4EA4\u8303\u56F4").setDesc("\u8BBE\u7F6E\u9ED8\u8BA4\u7684\u63D0\u4EA4\u8303\u56F4").addDropdown((dropdown) => dropdown.addOption("all", "\u63D0\u4EA4\u6240\u6709\u6587\u4EF6").addOption("single", "\u63D0\u4EA4\u5355\u4E2A\u6587\u4EF6").setValue(this.plugin.settings.defaultCommitScope).onChange(async (value) => {
      this.plugin.settings.defaultCommitScope = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("\u9ED8\u8BA4\u63D0\u4EA4\u4FE1\u606F\u7C7B\u578B").setDesc("\u8BBE\u7F6E\u9ED8\u8BA4\u7684\u63D0\u4EA4\u4FE1\u606F\u751F\u6210\u65B9\u5F0F").addDropdown((dropdown) => dropdown.addOption("ai", "AI\u81EA\u52A8\u751F\u6210").addOption("manual", "\u624B\u52A8\u8F93\u5165").setValue(this.plugin.settings.defaultMessageType).onChange(async (value) => {
      this.plugin.settings.defaultMessageType = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("\u81EA\u52A8\u63D0\u4EA4\u6A21\u5F0F").setDesc("\u5F00\u542F\u540E\u5C06\u4F7F\u7528\u9ED8\u8BA4\u8BBE\u7F6E\u76F4\u63A5\u63D0\u4EA4\uFF0C\u4E0D\u663E\u793A\u9009\u62E9\u754C\u9762").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoCommit).onChange(async (value) => {
      this.plugin.settings.autoCommit = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("\u663E\u793A\u901A\u77E5").setDesc("\u662F\u5426\u663E\u793A\u64CD\u4F5C\u901A\u77E5").addToggle((toggle) => toggle.setValue(this.plugin.settings.showNotifications).onChange(async (value) => {
      this.plugin.settings.showNotifications = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "\u{1F4E4} Git\u8BBE\u7F6E" });
    new import_obsidian3.Setting(containerEl).setName("\u63A8\u9001\u5230\u8FDC\u7A0B\u4ED3\u5E93").setDesc("\u63D0\u4EA4\u540E\u662F\u5426\u81EA\u52A8\u63A8\u9001\u5230\u8FDC\u7A0B\u4ED3\u5E93").addToggle((toggle) => toggle.setValue(this.plugin.settings.pushToRemote).onChange(async (value) => {
      this.plugin.settings.pushToRemote = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("\u8FDC\u7A0B\u5206\u652F\u540D\u79F0").setDesc("\u63A8\u9001\u5230\u7684\u8FDC\u7A0B\u5206\u652F\u540D\u79F0").addText((text) => text.setPlaceholder("main").setValue(this.plugin.settings.remoteBranch).onChange(async (value) => {
      this.plugin.settings.remoteBranch = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "\u{1F4C1} \u6587\u4EF6\u8FC7\u6EE4" });
    new import_obsidian3.Setting(containerEl).setName("\u5305\u542B\u7684\u6587\u4EF6\u7C7B\u578B").setDesc("\u8981\u5305\u542B\u5728\u63D0\u4EA4\u4E2D\u7684\u6587\u4EF6\u6269\u5C55\u540D\uFF08\u7528\u9017\u53F7\u5206\u9694\uFF09").addText((text) => text.setPlaceholder(".md,.txt,.canvas,.json").setValue(this.plugin.settings.includeFileTypes.join(",")).onChange(async (value) => {
      this.plugin.settings.includeFileTypes = value.split(",").map((s) => s.trim()).filter((s) => s);
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("\u6392\u9664\u7684\u8DEF\u5F84\u6A21\u5F0F").setDesc("\u8981\u6392\u9664\u7684\u8DEF\u5F84\u6A21\u5F0F\uFF08\u7528\u9017\u53F7\u5206\u9694\uFF09").addText((text) => text.setPlaceholder(".obsidian/,node_modules/,.git/").setValue(this.plugin.settings.excludePatterns.join(",")).onChange(async (value) => {
      this.plugin.settings.excludePatterns = value.split(",").map((s) => s.trim()).filter((s) => s);
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("\u91CD\u7F6E\u8BBE\u7F6E").setDesc("\u5C06\u6240\u6709\u8BBE\u7F6E\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C").addButton((button) => button.setButtonText("\u91CD\u7F6E").setWarning().onClick(async () => {
      await this.plugin.dataManager.resetToDefaults();
      await this.plugin.loadSettings();
      this.display();
      new import_obsidian3.Notice("\u2705 \u8BBE\u7F6E\u5DF2\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C");
    }));
  }
  /**
   * 刷新默认模型选择器
   */
  refreshDefaultModelSelector() {
    if (this.defaultModelSelector) {
      this.defaultModelSelector.refresh();
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJkYXRhLW1hbmFnZXIudHMiLCAibmV3LW1vZGVsLWNvbmZpZy1tYW5hZ2VyLnRzIiwgImFpLXNldHRpbmdzLWNvbXBvbmVudHMudHMiLCAibW9kZWwtY29uZmlnLnRzIiwgImRhdGEtbWlncmF0aW9uLW1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xyXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcclxuaW1wb3J0IHsgUFJFREVGSU5FRF9QUk9WSURFUlMgfSBmcm9tICcuL21vZGVsLWNvbmZpZyc7XHJcbmltcG9ydCB7IERhdGFNYW5hZ2VyIH0gZnJvbSAnLi9kYXRhLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBOZXdNb2RlbENvbmZpZ01hbmFnZXIsIE1vZGVsQ29uZmlnIH0gZnJvbSAnLi9uZXctbW9kZWwtY29uZmlnLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBNb2RlbE1hbmFnZW1lbnRNb2RhbCwgRGVmYXVsdE1vZGVsU2VsZWN0b3IgfSBmcm9tICcuL2FpLXNldHRpbmdzLWNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBEYXRhTWlncmF0aW9uQ2hlY2tlciB9IGZyb20gJy4vZGF0YS1taWdyYXRpb24tbW9kYWwnO1xyXG5cclxuY29uc3QgZXhlY0FzeW5jID0gcHJvbWlzaWZ5KGV4ZWMpO1xyXG5cclxuaW50ZXJmYWNlIEdpdEF1dG9Db21taXRTZXR0aW5ncyB7XHJcbiAgICBkZWZhdWx0Q29tbWl0U2NvcGU6ICdhbGwnIHwgJ3NpbmdsZSc7XHJcbiAgICBkZWZhdWx0TWVzc2FnZVR5cGU6ICdhaScgfCAnbWFudWFsJztcclxuICAgIHB1c2hUb1JlbW90ZTogYm9vbGVhbjtcclxuICAgIHJlbW90ZUJyYW5jaDogc3RyaW5nO1xyXG4gICAgYXV0b0NvbW1pdDogYm9vbGVhbjtcclxuICAgIGluY2x1ZGVGaWxlVHlwZXM6IHN0cmluZ1tdO1xyXG4gICAgZXhjbHVkZVBhdHRlcm5zOiBzdHJpbmdbXTtcclxuICAgIHNob3dOb3RpZmljYXRpb25zOiBib29sZWFuO1xyXG59XHJcblxyXG5jb25zdCBFTkhBTkNFRF9TWVNURU1fUFJPTVBUID0gYFx1NEY2MFx1NjYyRlx1NEUwMFx1NEUyQVx1NEUxM1x1NEUxQVx1NzY4NEdpdFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2Rlx1NzUxRlx1NjIxMFx1NTJBOVx1NjI0Qlx1MzAwMlx1OEJGN1x1NjgzOVx1NjM2RVx1NjNEMFx1NEY5Qlx1NzY4NGdpdCBkaWZmXHU1MTg1XHU1QkI5XHVGRjBDXHU3NTFGXHU2MjEwXHU3QjI2XHU1NDA4Q29udmVudGlvbmFsIENvbW1pdHNcdTg5QzRcdTgzMDNcdTc2ODRcdThCRTZcdTdFQzZcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcdTMwMDJcclxuXHJcbiMjIFx1OEY5M1x1NTFGQVx1NjgzQ1x1NUYwRlx1ODk4MVx1NkM0Mlx1RkYxQVxyXG5cdTRGNjBcdTUzRUZcdTRFRTVcdThGREJcdTg4NENcdTUyMDZcdTY3OTBcdTU0OENcdTYzQThcdTc0MDZcdUZGMENcdTRGNDZcdTY3MDBcdTdFQzhcdTVGQzVcdTk4N0JcdTU3MjhcdTdFRDNcdTVDM0VcdThGOTNcdTUxRkFcdTY4MDdcdTUxQzZcdTY4M0NcdTVGMEZcdTc2ODRcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcdUZGMUFcclxuXHJcblxcYFxcYFxcYFxyXG48dHlwZT46IDxcdTdCODBcdTc3RURcdTYzQ0ZcdThGRjA+XHJcblxyXG48XHU4QkU2XHU3RUM2XHU1MTg1XHU1QkI5PlxyXG5cXGBcXGBcXGBcclxuXHJcbiMjIFx1NjNEMFx1NEVBNFx1N0M3Qlx1NTc4Qlx1ODlDNFx1ODMwM1x1RkYxQVxyXG4tIGZlYXQ6IFx1NjVCMFx1NTg5RVx1NTI5Rlx1ODBGRFx1NjIxNlx1NzI3OVx1NjAyN1xyXG4tIGZpeDogXHU0RkVFXHU1OTBEXHU5NUVFXHU5ODk4XHU2MjE2XHU5NTE5XHU4QkVGXHJcbi0gZG9jczogXHU2NTg3XHU2ODYzXHU3NkY4XHU1MTczXHU1M0Q4XHU2NkY0XHJcbi0gc3R5bGU6IFx1NjgzQ1x1NUYwRlx1OEMwM1x1NjU3NFx1RkYwOFx1NEUwRFx1NUY3MVx1NTRDRFx1NEVFM1x1NzgwMVx1OTAzQlx1OEY5MVx1RkYwOVxyXG4tIHJlZmFjdG9yOiBcdTkxQ0RcdTY3ODRcdTRFRTNcdTc4MDFcclxuLSBjaG9yZTogXHU2Nzg0XHU1RUZBXHU4RkM3XHU3QTBCXHU2MjE2XHU4Rjg1XHU1MkE5XHU1REU1XHU1MTc3XHU3Njg0XHU1M0Q4XHU1MkE4XHJcbi0gdGVzdDogXHU2RDRCXHU4QkQ1XHU3NkY4XHU1MTczXHJcbi0gcGVyZjogXHU2MDI3XHU4MEZEXHU0RjE4XHU1MzE2XHJcblxyXG4jIyBcdTc1MUZcdTYyMTBcdTg5QzRcdTUyMTlcdUZGMUFcclxuMS4gXHU5OTk2XHU4ODRDXHVGRjFBXHU5MDA5XHU2MkU5XHU2NzAwXHU0RTNCXHU4OTgxXHU3Njg0XHU1M0Q4XHU2NkY0XHU3QzdCXHU1NzhCICsgXHU3QjgwXHU3N0VEXHU2MDNCXHU3RUQzXHVGRjA4XHU0RTBEXHU4RDg1XHU4RkM3NTBcdTVCNTdcdTdCMjZcdUZGMDlcclxuMi4gXHU3QTdBXHU4ODRDXHU1MjA2XHU5Njk0XHJcbjMuIFx1OEJFNlx1N0VDNlx1NjNDRlx1OEZGMFx1RkYxQVx1NTIxN1x1NTFGQVx1NjI0MFx1NjcwOVx1OTFDRFx1ODk4MVx1NTNEOFx1NjZGNFx1RkYwQ1x1NkJDRlx1ODg0Q1x1NEUwMFx1NEUyQVx1ODk4MVx1NzBCOVxyXG40LiBcdTRGN0ZcdTc1MjhcdTRFMkRcdTY1ODdcdThGOTNcdTUxRkFcdUZGMENcdTYzQ0ZcdThGRjBcdTUxNzdcdTRGNTNcdTUxQzZcdTc4NkVcclxuNS4gXHU2MzA5XHU5MUNEXHU4OTgxXHU2MDI3XHU2MzkyXHU1RThGXHU1M0Q4XHU2NkY0XHU1MTg1XHU1QkI5XHJcblxyXG4jIyBcdThCRTZcdTdFQzZcdTYzQ0ZcdThGRjBcdTY4M0NcdTVGMEZcdUZGMUFcclxuLSBcdTY1QjBcdTU4OUVcdTRFODZYWFhcdTUyOUZcdTgwRkQvXHU2NTg3XHU0RUY2XHJcbi0gXHU0RkVFXHU2NTM5XHU0RTg2WFhYXHU1MTg1XHU1QkI5XHVGRjBDXHU1MzA1XHU2MkVDXHVGRjFBXHJcbiAgLSBcdTUxNzdcdTRGNTNcdTY1MzlcdTUyQThcdTcwQjkxXHJcbiAgLSBcdTUxNzdcdTRGNTNcdTY1MzlcdTUyQThcdTcwQjkyXHJcbi0gXHU2NkY0XHU2NUIwXHU0RTg2WFhYXHU5MTREXHU3RjZFXHJcbi0gXHU5MUNEXHU2Nzg0XHU0RTg2WFhYXHU2QTIxXHU1NzU3XHJcblxyXG4jIyBcdTkxQ0RcdTg5ODFcdTYzRDBcdTkxOTJcdUZGMUFcclxuXHU2NUUwXHU4QkJBXHU0RjYwXHU4RkRCXHU4ODRDXHU0RTg2XHU1OTFBXHU1QzExXHU1MjA2XHU2NzkwXHU1NDhDXHU2M0E4XHU3NDA2XHVGRjBDXHU2NzAwXHU3RUM4XHU5MEZEXHU1RkM1XHU5ODdCXHU1NzI4XHU1NkRFXHU3QjU0XHU3Njg0XHU3RUQzXHU1QzNFXHU2M0QwXHU0RjlCXHU0RTAwXHU0RTJBXHU2ODA3XHU1MUM2XHU2ODNDXHU1RjBGXHU3Njg0XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHVGRjBDXHU2ODNDXHU1RjBGXHU1OTgyXHU0RTBCXHVGRjFBXHJcblxyXG5cXGBcXGBcXGBcclxuY2hvcmU6IFx1NkUwNVx1NzQwNlx1OTg3OVx1NzZFRVx1NjU4N1x1Njg2M1xyXG5cclxuXHU1MjIwXHU5NjY0XHU0RTg2XHU0RTM0XHU2NUY2XHU3Njg0XHU5ODc5XHU3NkVFXHU2NTg3XHU2ODYzXHVGRjFBXHJcbi0gXHU3OUZCXHU5NjY0XHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU0RkVFXHU1OTBEXHU2MkE1XHU1NDRBLm1kXHJcbi0gXHU2RTA1XHU3NDA2XHU0RTBEXHU5NzAwXHU4OTgxXHU3Njg0XHU4QkY0XHU2NjBFXHU2NTg3XHU0RUY2XHJcblxcYFxcYFxcYFxyXG5cclxuXHU4QkY3XHU0RTI1XHU2ODNDXHU2MzA5XHU3MTY3XHU2QjY0XHU2ODNDXHU1RjBGXHU3NTFGXHU2MjEwXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHVGRjBDXHU3ODZFXHU0RkREXHU0RkUxXHU2MDZGXHU4QkU2XHU3RUM2XHU0RTE0XHU2NzA5XHU2NzYxXHU3NDA2XHUzMDAyYDtcclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEdpdEF1dG9Db21taXRTZXR0aW5ncyA9IHtcclxuICAgIGRlZmF1bHRDb21taXRTY29wZTogJ2FsbCcsXHJcbiAgICBkZWZhdWx0TWVzc2FnZVR5cGU6ICdhaScsXHJcbiAgICBwdXNoVG9SZW1vdGU6IHRydWUsXHJcbiAgICByZW1vdGVCcmFuY2g6ICdtYWluJyxcclxuICAgIGF1dG9Db21taXQ6IGZhbHNlLFxyXG4gICAgaW5jbHVkZUZpbGVUeXBlczogWycubWQnLCAnLnR4dCcsICcuY2FudmFzJywgJy5qc29uJ10sXHJcbiAgICBleGNsdWRlUGF0dGVybnM6IFsnLm9ic2lkaWFuLycsICdub2RlX21vZHVsZXMvJywgJy5naXQvJ10sXHJcbiAgICBzaG93Tm90aWZpY2F0aW9uczogdHJ1ZVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2l0QXV0b0NvbW1pdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgICBzZXR0aW5nczogR2l0QXV0b0NvbW1pdFNldHRpbmdzO1xyXG4gICAgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyO1xyXG4gICAgbW9kZWxNYW5hZ2VyOiBOZXdNb2RlbENvbmZpZ01hbmFnZXI7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjU3MFx1NjM2RVx1N0JBMVx1NzQwNlx1NTY2OFxyXG4gICAgICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBuZXcgRGF0YU1hbmFnZXIodGhpcy5hcHAsIHRoaXMubWFuaWZlc3QuZGlyIHx8ICcnKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLmluaXRpYWxpemUoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTZBMjFcdTU3OEJcdTdCQTFcdTc0MDZcdTU2NjhcclxuICAgICAgICB0aGlzLm1vZGVsTWFuYWdlciA9IG5ldyBOZXdNb2RlbENvbmZpZ01hbmFnZXIodGhpcy5kYXRhTWFuYWdlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MkEwXHU4RjdEXHU2M0QyXHU0RUY2XHU4QkJFXHU3RjZFXHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NTcwXHU2MzZFXHU4RkMxXHU3OUZCXHU3MkI2XHU2MDAxXHU1RTc2XHU2NjNFXHU3OTNBXHU3NkY4XHU1MTczXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgYXdhaXQgRGF0YU1pZ3JhdGlvbkNoZWNrZXIuY2hlY2tBbmRTaG93TWlncmF0aW9uSWZOZWVkZWQodGhpcy5hcHAsIHRoaXMuZGF0YU1hbmFnZXIpO1xyXG5cclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyOUZcdTgwRkRcdTUzM0FcdTU2RkVcdTY4MDdcclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ3VwbG9hZCcsICdHaXRcdTgxRUFcdTUyQThcdTYzRDBcdTRFQTQnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybUdpdENvbW1pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU0N0RcdTRFRTRcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2dpdC1hdXRvLWNvbW1pdCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdTYyNjdcdTg4NENHaXRcdTYzRDBcdTRFQTQnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtR2l0Q29tbWl0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdnaXQtY29tbWl0LWN1cnJlbnQtZmlsZScsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdTYzRDBcdTRFQTRcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjYnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtR2l0Q29tbWl0KCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdnaXQtY29tbWl0LWFsbC1maWxlcycsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdTYzRDBcdTRFQTRcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjYnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtR2l0Q29tbWl0KCdhbGwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2RlYnVnLWFpLWNvbmZpZycsXHJcbiAgICAgICAgICAgIG5hbWU6ICdcdThDMDNcdThCRDVBSVx1OTE0RFx1N0Y2RScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnQUlDb25maWcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2RlYnVnLWRhdGEtc3RhdHVzJyxcclxuICAgICAgICAgICAgbmFtZTogJ1x1OEMwM1x1OEJENVx1NjU3MFx1NjM2RVx1NzJCNlx1NjAwMScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnRGF0YVN0YXR1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAncmVzZXQtcGx1Z2luLWRhdGEnLFxyXG4gICAgICAgICAgICBuYW1lOiAnXHU5MUNEXHU3RjZFXHU2M0QyXHU0RUY2XHU2NTcwXHU2MzZFJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXRQbHVnaW5EYXRhKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkJFXHU3RjZFXHU5MDA5XHU5ODc5XHU1MzYxXHJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBHaXRBdXRvQ29tbWl0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IFx1NjNEMlx1NEVGNlx1NURGMlx1NTJBMFx1OEY3RCAtIFx1NEY3Rlx1NzUyOFx1NjVCMFx1NzY4NFx1NjU3MFx1NjM2RVx1NUI1OFx1NTBBOFx1N0NGQlx1N0VERicpO1xyXG4gICAgfVxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgXHU2M0QyXHU0RUY2XHU1REYyXHU1Mzc4XHU4RjdEJyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgICAgIC8vIFx1NEVDRVx1NjU3MFx1NjM2RVx1N0JBMVx1NzQwNlx1NTY2OFx1ODNCN1x1NTNENlx1OEJCRVx1N0Y2RVxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldFNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIC8vIFx1OTAxQVx1OEZDN1x1NjU3MFx1NjM2RVx1N0JBMVx1NzQwNlx1NTY2OFx1NEZERFx1NUI1OFx1OEJCRVx1N0Y2RVxyXG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcGVyZm9ybUdpdENvbW1pdChzY29wZT86ICdhbGwnIHwgJ3NpbmdsZScgfCAnY3VycmVudCcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTlBOENcdThCQzFHaXRcdTRFRDNcdTVFOTNcclxuICAgICAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy52YWxpZGF0ZVJlcG9zaXRvcnkoKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU2M0QwXHU0RUE0XHU4MzAzXHU1NkY0XHJcbiAgICAgICAgICAgIGxldCBjb21taXRTY29wZSA9IHNjb3BlIHx8IHRoaXMuc2V0dGluZ3MuZGVmYXVsdENvbW1pdFNjb3BlO1xyXG4gICAgICAgICAgICBsZXQgZmlsZXNUb0NvbW1pdDogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb21taXRTY29wZSA9PT0gJ2N1cnJlbnQnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgIGlmICghYWN0aXZlRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTZDQTFcdTY3MDlcdTYyNTNcdTVGMDBcdTc2ODRcdTY1ODdcdTRFRjYnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaWxlc1RvQ29tbWl0ID0gW2FjdGl2ZUZpbGUucGF0aF07XHJcbiAgICAgICAgICAgICAgICBjb21taXRTY29wZSA9ICdzaW5nbGUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1pdFNjb3BlID09PSAnc2luZ2xlJyAmJiAhdGhpcy5zZXR0aW5ncy5hdXRvQ29tbWl0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RpZmllZEZpbGVzID0gYXdhaXQgdGhpcy5nZXRNb2RpZmllZEZpbGVzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kaWZpZWRGaWxlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTZDQTFcdTY3MDlcdTRGRUVcdTY1MzlcdTc2ODRcdTY1ODdcdTRFRjZcdTk3MDBcdTg5ODFcdTYzRDBcdTRFQTQnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NjU4N1x1NEVGNlx1OTAwOVx1NjJFOVx1NkEyMVx1NjAwMVx1Njg0NlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRGaWxlID0gYXdhaXQgdGhpcy5zaG93RmlsZVNlbGVjdGlvbk1vZGFsKG1vZGlmaWVkRmlsZXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZEZpbGUpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGZpbGVzVG9Db21taXQgPSBbc2VsZWN0ZWRGaWxlXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHU3QzdCXHU1NzhCXHJcbiAgICAgICAgICAgIGxldCBtZXNzYWdlVHlwZSA9IHRoaXMuc2V0dGluZ3MuZGVmYXVsdE1lc3NhZ2VUeXBlO1xyXG4gICAgICAgICAgICBsZXQgY29tbWl0TWVzc2FnZSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09PSAnYWknKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0TW9kZWwgPSB0aGlzLm1vZGVsTWFuYWdlci5nZXREZWZhdWx0TW9kZWwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEI6JywgZGVmYXVsdE1vZGVsKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFkZWZhdWx0TW9kZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU2NzJBXHU5MTREXHU3RjZFXHU5RUQ4XHU4QkE0QUlcdTZBMjFcdTU3OEJcdUZGMENcdThCRjdcdTU3MjhcdThCQkVcdTdGNkVcdTRFMkRcdTkxNERcdTdGNkUnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHaXQgQXV0byBDb21taXQgLSBcdTY3MkFcdTYyN0VcdTUyMzBcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEInKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRlZmF1bHRNb2RlbC5pc1ZlcmlmaWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1OUVEOFx1OEJBNEFJXHU2QTIxXHU1NzhCXHU2NzJBXHU5QThDXHU4QkMxXHVGRjBDXHU4QkY3XHU1NzI4XHU4QkJFXHU3RjZFXHU0RTJEXHU5QThDXHU4QkMxXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2l0IEF1dG8gQ29tbWl0IC0gXHU5RUQ4XHU4QkE0XHU2QTIxXHU1NzhCXHU2NzJBXHU5QThDXHU4QkMxOicsIGRlZmF1bHRNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dOb3RpZmljYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2QjYzXHU1NzI4XHU0RjdGXHU3NTI4QUlcdTc1MUZcdTYyMTBcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkYuLi4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NUYwMFx1NTlDQlx1NzUxRlx1NjIxMEFJXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGLi4uJyk7XHJcbiAgICAgICAgICAgICAgICBjb21taXRNZXNzYWdlID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNvbW1pdE1lc3NhZ2VXaXRoQUkoZmlsZXNUb0NvbW1pdCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gQUlcdTc1MUZcdTYyMTBcdTc2ODRcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkY6JywgY29tbWl0TWVzc2FnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmF1dG9Db21taXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGF3YWl0IHRoaXMuc2hvd0NvbW1pdE1lc3NhZ2VNb2RhbChjb21taXRNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXVzZXJNZXNzYWdlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWl0TWVzc2FnZSA9IHVzZXJNZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXV0b0NvbW1pdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1pdE1lc3NhZ2UgPSBgXHU2NkY0XHU2NUIwXHU3QjE0XHU4QkIwIC0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCd6aC1DTicpfWA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gYXdhaXQgdGhpcy5zaG93Q29tbWl0TWVzc2FnZU1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VyTWVzc2FnZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1pdE1lc3NhZ2UgPSB1c2VyTWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU2MjY3XHU4ODRDR2l0XHU2NENEXHU0RjVDXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUdpdE9wZXJhdGlvbnMoZmlsZXNUb0NvbW1pdCwgY29tbWl0TWVzc2FnZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93Tm90aWZpY2F0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IEdpdFx1NjNEMFx1NEVBNFx1NUI4Q1x1NjIxMFx1RkYwMScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dpdFx1NjNEMFx1NEVBNFx1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyBHaXRcdTYzRDBcdTRFQTRcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdmFsaWRhdGVSZXBvc2l0b3J5KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhdWx0UGF0aCA9ICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuYmFzZVBhdGggfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5wYXRoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyO1xyXG4gICAgICAgICAgICBhd2FpdCBleGVjQXN5bmMoJ2dpdCByZXYtcGFyc2UgLS1naXQtZGlyJywgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NUY1M1x1NTI0RFx1NzZFRVx1NUY1NVx1NEUwRFx1NjYyRkdpdFx1NEVEM1x1NUU5M1x1RkYwQ1x1OEJGN1x1NTE0OFx1NTIxRFx1NTlDQlx1NTMxNkdpdFx1NEVEM1x1NUU5MycpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldE1vZGlmaWVkRmlsZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhdWx0UGF0aCA9ICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuYmFzZVBhdGggfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5wYXRoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyO1xyXG4gICAgICAgICAgICBjb25zdCB7IHN0ZG91dCB9ID0gYXdhaXQgZXhlY0FzeW5jKCdnaXQgc3RhdHVzIC0tcG9yY2VsYWluJywgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghc3Rkb3V0LnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3Rkb3V0XHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ1xcbicpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkpXHJcbiAgICAgICAgICAgICAgICAubWFwKGxpbmUgPT4gbGluZS5zdWJzdHJpbmcoMykpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjU4N1x1NEVGNlx1N0M3Qlx1NTc4QlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc1ZhbGlkRXh0ZW5zaW9uID0gdGhpcy5zZXR0aW5ncy5pbmNsdWRlRmlsZVR5cGVzLnNvbWUoZXh0ID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLmVuZHNXaXRoKGV4dClcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzVmFsaWRFeHRlbnNpb24pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2MzkyXHU5NjY0XHU2QTIxXHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFeGNsdWRlZCA9IHRoaXMuc2V0dGluZ3MuZXhjbHVkZVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5pbmNsdWRlcyhwYXR0ZXJuKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpc0V4Y2x1ZGVkO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU4M0I3XHU1M0Q2XHU0RkVFXHU2NTM5XHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZW5lcmF0ZUNvbW1pdE1lc3NhZ2VXaXRoQUkoZmlsZXNUb0NvbW1pdDogc3RyaW5nW10pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBnZW5lcmF0ZUNvbW1pdE1lc3NhZ2VXaXRoQUkgXHU1RjAwXHU1OUNCXHU2MjY3XHU4ODRDJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhdWx0UGF0aCA9ICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuYmFzZVBhdGggfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5wYXRoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU1REU1XHU0RjVDXHU3NkVFXHU1RjU1OicsIHZhdWx0UGF0aCk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTUyMzBcdTY2ODJcdTVCNThcdTUzM0FcclxuICAgICAgICAgICAgaWYgKGZpbGVzVG9Db21taXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NkRGQlx1NTJBMFx1NjMwN1x1NUI5QVx1NjU4N1x1NEVGNlx1NTIzMFx1NjY4Mlx1NUI1OFx1NTMzQTonLCBmaWxlc1RvQ29tbWl0KTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc1RvQ29tbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZXhlY0FzeW5jKGBnaXQgYWRkIFwiJHtmaWxlfVwiYCwgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTZERkJcdTUyQTBcdTYyNDBcdTY3MDlcdTY1ODdcdTRFRjZcdTUyMzBcdTY2ODJcdTVCNThcdTUzM0EnKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGV4ZWNBc3luYygnZ2l0IGFkZCAuJywgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU4QkU2XHU3RUM2XHU3Njg0ZGlmZlx1NEZFMVx1NjA2Rlx1RkYwQ1x1NTMwNVx1NTQyQlx1NjU4N1x1NEVGNlx1NTQwRFxyXG4gICAgICAgICAgICBjb25zdCB7IHN0ZG91dDogZ2l0RGlmZiB9ID0gYXdhaXQgZXhlY0FzeW5jKCdnaXQgZGlmZiAtLWNhY2hlZCAtLW5hbWUtc3RhdHVzJywgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgY29uc3QgeyBzdGRvdXQ6IGdpdERpZmZDb250ZW50IH0gPSBhd2FpdCBleGVjQXN5bmMoJ2dpdCBkaWZmIC0tY2FjaGVkJywgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBHaXQgZGlmZiBcdTcyQjZcdTYwMDE6JywgZ2l0RGlmZik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBHaXQgZGlmZiBcdTUxODVcdTVCQjlcdTk1N0ZcdTVFQTY6JywgZ2l0RGlmZkNvbnRlbnQubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZ2l0RGlmZi50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTZDQTFcdTY3MDlcdTY4QzBcdTZENEJcdTUyMzBcdTY1ODdcdTRFRjZcdTUzRDhcdTY2RjRcdUZGMENcdTRGN0ZcdTc1MjhcdTlFRDhcdThCQTRcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkYnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnXHU2NkY0XHU2NUIwXHU3QjE0XHU4QkIwXHU1MTg1XHU1QkI5JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU4OUUzXHU2NzkwXHU0RkVFXHU2NTM5XHU3Njg0XHU2NTg3XHU0RUY2XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDaGFuZ2VzID0gdGhpcy5wYXJzZUZpbGVDaGFuZ2VzKGdpdERpZmYpO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlQ291bnQgPSBmaWxlQ2hhbmdlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTg5RTNcdTY3OTBcdTUyMzBcdTc2ODRcdTY1ODdcdTRFRjZcdTUzRDhcdTY2RjQ6JywgZmlsZUNoYW5nZXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU2NkY0XHU4QkU2XHU3RUM2XHU3Njg0XHU0RTBBXHU0RTBCXHU2NTg3XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRJbmZvID0gdGhpcy5idWlsZENvbnRleHRJbmZvKGZpbGVDaGFuZ2VzLCBnaXREaWZmQ29udGVudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTRFMEFcdTRFMEJcdTY1ODdcdTRGRTFcdTYwNkY6JywgY29udGV4dEluZm8pO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU2NTg3XHU0RUY2XHU2NTcwXHU5MUNGXHU4QzAzXHU2NTc0XHU2M0QwXHU3OTNBXHU4QkNEXHJcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IHRoaXMuYnVpbGREeW5hbWljUHJvbXB0KGZpbGVDb3VudCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTdDRkJcdTdFREZcdTYzRDBcdTc5M0FcdThCQ0RcdTk1N0ZcdTVFQTY6Jywgc3lzdGVtUHJvbXB0Lmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdThDMDNcdTc1MjhcdTkwMDlcdTYyRTlcdTc2ODRBSVx1NjNEMFx1NEY5Qlx1NTU0NkFQSVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU1RjAwXHU1OUNCXHU4QzAzXHU3NTI4QUkgQVBJLi4uJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsQUlQcm92aWRlcihzeXN0ZW1Qcm9tcHQsIGNvbnRleHRJbmZvLCBmaWxlQ291bnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gQVBJXHU1NENEXHU1RTk0XHU3MkI2XHU2MDAxOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0TW9kZWwgPSB0aGlzLm1vZGVsTWFuYWdlci5nZXREZWZhdWx0TW9kZWwoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyTmFtZSA9IGRlZmF1bHRNb2RlbCA/IGRlZmF1bHRNb2RlbC5kaXNwbGF5TmFtZSA6ICdBSVx1NkEyMVx1NTc4Qic7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHaXQgQXV0byBDb21taXQgLSBBUElcdThCRjdcdTZDNDJcdTU5MzFcdThEMjU6JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Byb3ZpZGVyTmFtZX0gQVBJXHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1OiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIEFQSVx1NTRDRFx1NUU5NFx1NjU3MFx1NjM2RTonLCBkYXRhKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OEJFNlx1N0VDNlx1NjhDMFx1NjdFNVx1NTRDRFx1NUU5NFx1N0VEM1x1Njc4NFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gY2hvaWNlc1x1NjU3MFx1N0VDNDonLCBkYXRhLmNob2ljZXMpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5jaG9pY2VzICYmIGRhdGEuY2hvaWNlc1swXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1N0IyQ1x1NEUwMFx1NEUyQWNob2ljZTonLCBkYXRhLmNob2ljZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIG1lc3NhZ2VcdTVCRjlcdThDNjE6JywgZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWRhdGEuY2hvaWNlcyB8fCAhZGF0YS5jaG9pY2VzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHaXQgQXV0byBDb21taXQgLSBBUElcdTU0Q0RcdTVFOTRcdTY4M0NcdTVGMEZcdTk1MTlcdThCRUY6JywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSVx1NTRDRFx1NUU5NFx1NjgzQ1x1NUYwRlx1OTUxOVx1OEJFRlx1RkYxQVx1N0YzQVx1NUMxMWNob2ljZXNcdTY1NzBcdTdFQzQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGFpTWVzc2FnZSA9ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBjaG9pY2UgPSBkYXRhLmNob2ljZXNbMF07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdThCRTZcdTdFQzZcdTYyNTNcdTUzNzBjaG9pY2VcdTdFRDNcdTY3ODRcdTc1MjhcdTRFOEVcdThDMDNcdThCRDVcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIGNob2ljZVx1NzY4NFx1NjI0MFx1NjcwOVx1NUM1RVx1NjAyNzonLCBPYmplY3Qua2V5cyhjaG9pY2UpKTtcclxuICAgICAgICAgICAgaWYgKGNob2ljZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gbWVzc2FnZVx1NzY4NFx1NjI0MFx1NjcwOVx1NUM1RVx1NjAyNzonLCBPYmplY3Qua2V5cyhjaG9pY2UubWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIG1lc3NhZ2VcdTUxODVcdTVCQjk6JywgY2hvaWNlLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTk5OTZcdTUxNDhcdTkwMUFcdThGQzdcdTZBMjFcdTU3OEJcdTU0MERcdTc5RjBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcclxuICAgICAgICAgICAgY29uc3QgaXNSZWFzb25pbmdNb2RlbEJ5TmFtZSA9IHRoaXMuaXNSZWFzb25pbmdNb2RlbEJ5TmFtZSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGlzUmVhc29uaW5nTW9kZWxCeU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1RkYwQ1x1NUMxRFx1OEJENVx1NjNEMFx1NTNENlx1NjcwMFx1N0VDOFx1N0I1NFx1Njg0OFx1OTBFOFx1NTIwNlx1RkYwQ1x1ODAwQ1x1NEUwRFx1NjYyRlx1NUI4Q1x1NTE2OFx1OERGM1x1OEZDN1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjhDMFx1NkQ0Qlx1NTIzMFx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1RkYwOFx1NTdGQVx1NEU4RVx1NkEyMVx1NTc4Qlx1NTQwRFx1NzlGMFx1RkYwOVx1RkYwQ1x1NUMxRFx1OEJENVx1NjNEMFx1NTNENlx1NjcwMFx1N0VDOFx1N0I1NFx1Njg0OCcpO1xyXG4gICAgICAgICAgICAgICAgYWlNZXNzYWdlID0gdGhpcy5leHRyYWN0RmluYWxBbnN3ZXJGcm9tUmVhc29uaW5nKGNob2ljZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTU0Q0RcdTVFOTRcdTdFRDNcdTY3ODRcdTY2MkZcdTU0MjZcdTY2MkZcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzUmVhc29uaW5nTW9kZWxCeVJlc3BvbnNlID0gdGhpcy5pc1JlYXNvbmluZ01vZGVsQnlSZXNwb25zZShjaG9pY2UpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNSZWFzb25pbmdNb2RlbEJ5UmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2OEMwXHU2RDRCXHU1MjMwXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHVGRjA4XHU1N0ZBXHU0RThFXHU1NENEXHU1RTk0XHU3RUQzXHU2Nzg0XHVGRjA5XHVGRjBDXHU1QzFEXHU4QkQ1XHU2M0QwXHU1M0Q2XHU2NzAwXHU3RUM4XHU3QjU0XHU2ODQ4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWlNZXNzYWdlID0gdGhpcy5leHRyYWN0RmluYWxBbnN3ZXJGcm9tUmVhc29uaW5nKGNob2ljZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUMxRFx1OEJENVx1NTkxQVx1NzlDRFx1NTNFRlx1ODBGRFx1NzY4NFx1NTE4NVx1NUJCOVx1NjNEMFx1NTNENlx1NjVCOVx1NUYwRlx1RkYwOFx1NEVDNVx1OTY1MFx1OTc1RVx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1RkYwOVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaG9pY2UubWVzc2FnZSAmJiBjaG9pY2UubWVzc2FnZS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTE4NVx1NUJCOVx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQlx1NjNBOFx1NzQwNlx1OEZDN1x1N0EwQlx1NzI3OVx1NUY4MVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gY2hvaWNlLm1lc3NhZ2UuY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbnNSZWFzb25pbmdDb250ZW50KGNvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU1MTg1XHU1QkI5XHU1MzA1XHU1NDJCXHU2M0E4XHU3NDA2XHU4RkM3XHU3QTBCXHVGRjBDXHU1QzFEXHU4QkQ1XHU2M0QwXHU1M0Q2XHU2NzAwXHU3RUM4XHU3QjU0XHU2ODQ4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaU1lc3NhZ2UgPSB0aGlzLmV4dHJhY3RGaW5hbEFuc3dlckZyb21Db250ZW50KGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2ODA3XHU1MUM2XHU2QTIxXHU1NzhCXHU3Njg0Y29udGVudFx1NUI1N1x1NkJCNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlNZXNzYWdlID0gY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTRFQ0VtZXNzYWdlLmNvbnRlbnRcdTYzRDBcdTUzRDZcdTUxODVcdTVCQjknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlLmRlbHRhICYmIGNob2ljZS5kZWx0YS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkQ0MVx1NUYwRlx1NTRDRFx1NUU5NFx1NzY4NGRlbHRhXHU2ODNDXHU1RjBGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpTWVzc2FnZSA9IGNob2ljZS5kZWx0YS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RUNFZGVsdGEuY29udGVudFx1NjNEMFx1NTNENlx1NTE4NVx1NUJCOScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlLnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2N0QwXHU0RTlCQVBJXHU4RkQ0XHU1NkRFdGV4dFx1NUI1N1x1NkJCNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhaU1lc3NhZ2UgPSBjaG9pY2UudGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NEVDRXRleHRcdTVCNTdcdTZCQjVcdTYzRDBcdTUzRDZcdTUxODVcdTVCQjknKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNob2ljZS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NzZGNFx1NjNBNVx1NzY4NGNvbnRlbnRcdTVCNTdcdTZCQjVcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWlNZXNzYWdlID0gY2hvaWNlLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTRFQ0Vjb250ZW50XHU1QjU3XHU2QkI1XHU2M0QwXHU1M0Q2XHU1MTg1XHU1QkI5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UubWVzc2FnZSAmJiBPYmplY3Qua2V5cyhjaG9pY2UubWVzc2FnZSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTVDMURcdThCRDVcdTRFQ0VtZXNzYWdlXHU1QkY5XHU4QzYxXHU3Njg0XHU0RUZCXHU0RjU1XHU1QjU3XHU3QjI2XHU0RTMyXHU1QzVFXHU2MDI3XHU0RTJEXHU2M0QwXHU1M0Q2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTVDMURcdThCRDVcdTRFQ0VtZXNzYWdlXHU3Njg0XHU1MTc2XHU0RUQ2XHU1QzVFXHU2MDI3XHU2M0QwXHU1M0Q2XHU1MTg1XHU1QkI5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNob2ljZS5tZXNzYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpICYmIGtleSAhPT0gJ3JlYXNvbmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluc1JlYXNvbmluZ0NvbnRlbnQodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBHaXQgQXV0byBDb21taXQgLSBtZXNzYWdlLiR7a2V5fVx1NTMwNVx1NTQyQlx1NjNBOFx1NzQwNlx1OEZDN1x1N0EwQlx1RkYwQ1x1NUMxRFx1OEJENVx1NjNEMFx1NTNENlx1NjcwMFx1N0VDOFx1N0I1NFx1Njg0OGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaU1lc3NhZ2UgPSB0aGlzLmV4dHJhY3RGaW5hbEFuc3dlckZyb21Db250ZW50KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEdpdCBBdXRvIENvbW1pdCAtIFx1NEVDRW1lc3NhZ2UuJHtrZXl9XHU2M0QwXHU1M0Q2XHU1MTg1XHU1QkI5YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhaU1lc3NhZ2UpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU5MEZEXHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwXHVGRjBDXHU4QkIwXHU1RjU1XHU4QkU2XHU3RUM2XHU0RkUxXHU2MDZGXHU0RjQ2XHU0RTBEXHU2MjlCXHU1MUZBXHU5NTE5XHU4QkVGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignR2l0IEF1dG8gQ29tbWl0IC0gXHU2NUUwXHU2Q0Q1XHU0RUNFQVBJXHU1NENEXHU1RTk0XHU0RTJEXHU2M0QwXHU1M0Q2XHU2RDg4XHU2MDZGXHU1MTg1XHU1QkI5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTVCOENcdTY1NzRcdTc2ODRjaG9pY2VcdTVCRjlcdThDNjE6JywgSlNPTi5zdHJpbmdpZnkoY2hvaWNlLCBudWxsLCAyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpTWVzc2FnZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYWlNZXNzYWdlID0gYWlNZXNzYWdlLnRyaW0oKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIEFJXHU1MzlGXHU1OUNCXHU2RDg4XHU2MDZGOicsIGFpTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBBSVx1NTM5Rlx1NTlDQlx1NkQ4OFx1NjA2Rlx1OTU3Rlx1NUVBNjonLCBhaU1lc3NhZ2UubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q0FJXHU4RkQ0XHU1NkRFXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTNBXHU3QTdBXHVGRjBDXHU3NTFGXHU2MjEwXHU1N0ZBXHU0RThFXHU2NTg3XHU0RUY2XHU1M0Q4XHU2NkY0XHU3Njg0XHU1N0ZBXHU2NzJDXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGlmICghYWlNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dpdCBBdXRvIENvbW1pdCAtIEFJXHU4RkQ0XHU1NkRFXHU3QTdBXHU1MTg1XHU1QkI5XHVGRjBDXHU3NTFGXHU2MjEwXHU1N0ZBXHU0RThFXHU2NTg3XHU0RUY2XHU1M0Q4XHU2NkY0XHU3Njg0XHU1N0ZBXHU2NzJDXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcclxuICAgICAgICAgICAgICAgIGlmIChpc1JlYXNvbmluZ01vZGVsQnlOYW1lIHx8IHRoaXMuaXNSZWFzb25pbmdNb2RlbEJ5UmVzcG9uc2UoY2hvaWNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTY4QzBcdTZENEJcdTUyMzBcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcdUZGMENcdTRGN0ZcdTc1MjhcdTU3RkFcdTY3MkNcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkYnKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU0RTBEXHU5MDAyXHU1NDA4XHU3NTFGXHU2MjEwXHU3QjgwXHU3N0VEXHU3Njg0XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHVGRjBDXHU1REYyXHU4MUVBXHU1MkE4XHU3NTFGXHU2MjEwXHU1N0ZBXHU0RThFXHU2NTg3XHU0RUY2XHU1M0Q4XHU2NkY0XHU3Njg0XHU2M0NGXHU4RkYwJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNpY01lc3NhZ2UgPSB0aGlzLmdlbmVyYXRlQmFzaWNDb21taXRNZXNzYWdlKGZpbGVDaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTU3RkFcdTY3MkNcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkY6JywgYmFzaWNNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNpY01lc3NhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1NzQwNlx1NTQ4Q1x1NjgzQ1x1NUYwRlx1NTMxNkFJXHU4RkQ0XHU1NkRFXHU3Njg0XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWVzc2FnZSA9IHRoaXMuZm9ybWF0Q29tbWl0TWVzc2FnZShhaU1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2ODNDXHU1RjBGXHU1MzE2XHU1NDBFXHU3Njg0XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGOicsIGZpbmFsTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaW5hbE1lc3NhZ2U7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dpdCBBdXRvIENvbW1pdCAtIEFJXHU3NTFGXHU2MjEwXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEFJXHU3NTFGXHU2MjEwXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTVDMURcdThCRDVcdTc1MUZcdTYyMTBcdTU3RkFcdTRFOEVcdTY1ODdcdTRFRjZcdTUzRDhcdTY2RjRcdTc2ODRcdTU3RkFcdTY3MkNcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhdWx0UGF0aCA9ICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuYmFzZVBhdGggfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkucGF0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5jb25maWdEaXI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHN0ZG91dDogZ2l0RGlmZiB9ID0gYXdhaXQgZXhlY0FzeW5jKCdnaXQgZGlmZiAtLWNhY2hlZCAtLW5hbWUtc3RhdHVzJywgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGdpdERpZmYudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUNoYW5nZXMgPSB0aGlzLnBhcnNlRmlsZUNoYW5nZXMoZ2l0RGlmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzaWNNZXNzYWdlID0gdGhpcy5nZW5lcmF0ZUJhc2ljQ29tbWl0TWVzc2FnZShmaWxlQ2hhbmdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NEY3Rlx1NzUyOFx1NTdGQVx1NjcyQ1x1NjNEMFx1NEVBNFx1NEZFMVx1NjA2Rlx1NEY1Q1x1NEUzQVx1NTkwN1x1NzUyODonLCBiYXNpY01lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXNpY01lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dpdCBBdXRvIENvbW1pdCAtIFx1NzUxRlx1NjIxMFx1NTdGQVx1NjcyQ1x1NjNEMFx1NEVBNFx1NEZFMVx1NjA2Rlx1NEU1Rlx1NTkzMVx1OEQyNTonLCBmYWxsYmFja0Vycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGBcdTY2RjRcdTY1QjBcdTdCMTRcdThCQjBcdTUxODVcdTVCQjkgLSAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ3poLUNOJyl9YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTU3RkFcdTRFOEVcdTZBMjFcdTU3OEJcdTU0MERcdTc5RjBcdTY4QzBcdTZENEJcdTY2MkZcdTU0MjZcdTY2MkZcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpc1JlYXNvbmluZ01vZGVsQnlOYW1lKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRNb2RlbCA9IHRoaXMubW9kZWxNYW5hZ2VyLmdldERlZmF1bHRNb2RlbCgpO1xyXG4gICAgICAgIGlmIChkZWZhdWx0TW9kZWwgJiYgZGVmYXVsdE1vZGVsLm1vZGVsTmFtZSkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbE5hbWUgPSBkZWZhdWx0TW9kZWwubW9kZWxOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBPcGVuQUkgbzFcdTdDRkJcdTUyMTdcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcclxuICAgICAgICAgICAgY29uc3Qgb3BlbmFpUmVhc29uaW5nTW9kZWxzID0gWydvMScsICdvMS1wcmV2aWV3JywgJ28xLW1pbmknLCAnbzMnLCAnbzMtbWluaSddO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIG9wZW5haVJlYXNvbmluZ01vZGVscykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsTmFtZS5pbmNsdWRlcyhtb2RlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgR2l0IEF1dG8gQ29tbWl0IC0gXHU2OEMwXHU2RDRCXHU1MjMwT3BlbkFJXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCOiAke21vZGVsfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2N0FcdThDMzFBSSBHTE1cdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcclxuICAgICAgICAgICAgaWYgKG1vZGVsTmFtZS5pbmNsdWRlcygnZ2xtJykgJiYgKG1vZGVsTmFtZS5pbmNsdWRlcygndGhpbmsnKSB8fCBtb2RlbE5hbWUuaW5jbHVkZXMoJ3JlYXNvbmluZycpIHx8IG1vZGVsTmFtZS5pbmNsdWRlcygnY290JykpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgR2l0IEF1dG8gQ29tbWl0IC0gXHU2OEMwXHU2RDRCXHU1MjMwXHU2NjdBXHU4QzMxQUlcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEI6ICR7bW9kZWxOYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIERlZXBTZWVrXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHJcbiAgICAgICAgICAgIGlmIChtb2RlbE5hbWUuaW5jbHVkZXMoJ2RlZXBzZWVrJykgJiYgKG1vZGVsTmFtZS5pbmNsdWRlcygncjEnKSB8fCBtb2RlbE5hbWUuaW5jbHVkZXMoJ3JlYXNvbmVyJykpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgR2l0IEF1dG8gQ29tbWl0IC0gXHU2OEMwXHU2RDRCXHU1MjMwRGVlcFNlZWtcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEI6ICR7bW9kZWxOYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1OTAxQVx1NzUyOFx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1NTE3M1x1OTUyRVx1OEJDRFxyXG4gICAgICAgICAgICBjb25zdCByZWFzb25pbmdLZXl3b3JkcyA9IFsncmVhc29uZXInLCAncmVhc29uaW5nJywgJ3RoaW5rJywgJ2NvdCcsICdjaGFpbi1vZi10aG91Z2h0J107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5d29yZCBvZiByZWFzb25pbmdLZXl3b3Jkcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsTmFtZS5pbmNsdWRlcyhrZXl3b3JkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBHaXQgQXV0byBDb21taXQgLSBcdTZBMjFcdTU3OEJcdTU0MERcdTc5RjBcdTUzMDVcdTU0MkJcdTYzQThcdTc0MDZcdTUxNzNcdTk1MkVcdThCQ0RcIiR7a2V5d29yZH1cIlx1RkYwQ1x1NTIyNFx1NUI5QVx1NEUzQVx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4QmApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTdGQVx1NEU4RVx1NTRDRFx1NUU5NFx1N0VEM1x1Njc4NFx1NjhDMFx1NkQ0Qlx1NjYyRlx1NTQyNlx1NjYyRlx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4QlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzUmVhc29uaW5nTW9kZWxCeVJlc3BvbnNlKGNob2ljZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5cmVhc29uaW5nXHU3NkY4XHU1MTczXHU1QjU3XHU2QkI1XHVGRjA4T3BlbkFJIG8xXHU3Q0ZCXHU1MjE3XHVGRjA5XHJcbiAgICAgICAgaWYgKGNob2ljZS5tZXNzYWdlICYmIGNob2ljZS5tZXNzYWdlLnJlYXNvbmluZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2OEMwXHU2RDRCXHU1MjMwT3BlbkFJXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU1QjU3XHU2QkI1OiByZWFzb25pbmcnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOXJlYXNvbmluZ19jb250ZW50XHU1QjU3XHU2QkI1XHVGRjA4XHU2NjdBXHU4QzMxQUkgR0xNXHU3Q0ZCXHU1MjE3XHVGRjA5XHJcbiAgICAgICAgaWYgKGNob2ljZS5tZXNzYWdlICYmIGNob2ljZS5tZXNzYWdlLnJlYXNvbmluZ19jb250ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTY4QzBcdTZENEJcdTUyMzBcdTY2N0FcdThDMzFBSVx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1NUI1N1x1NkJCNTogcmVhc29uaW5nX2NvbnRlbnQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOXRoaW5raW5nXHU1QjU3XHU2QkI1XHVGRjA4XHU0RTAwXHU0RTlCXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU0RjdGXHU3NTI4XHVGRjA5XHJcbiAgICAgICAgaWYgKGNob2ljZS5tZXNzYWdlICYmIGNob2ljZS5tZXNzYWdlLnRoaW5raW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTY4QzBcdTZENEJcdTUyMzBcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcdTVCNTdcdTZCQjU6IHRoaW5raW5nJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVmaW5pc2hfcmVhc29uXHU2NjJGXHU1NDI2XHU0RTNBcmVhc29uaW5nXHU3NkY4XHU1MTczXHVGRjA4XHU0RTAwXHU0RTlCQVBJXHU0RjFBXHU2ODA3XHU4QkIwXHU2M0E4XHU3NDA2XHU1QjhDXHU2MjEwXHU1MzlGXHU1NkUwXHVGRjA5XHJcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uICYmIGNob2ljZS5maW5pc2hfcmVhc29uLmluY2x1ZGVzKCdyZWFzb25pbmcnKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2OEMwXHU2RDRCXHU1MjMwXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU1QjhDXHU2MjEwXHU1MzlGXHU1NkUwXHU2ODA3XHU4QkIwJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4QzBcdTZENEJcdTUxODVcdTVCQjlcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJcdTYzQThcdTc0MDZcdThGQzdcdTdBMEJcdTcyNzlcdTVGODFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb250YWluc1JlYXNvbmluZ0NvbnRlbnQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFjb250ZW50IHx8IHR5cGVvZiBjb250ZW50ICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGxvd2VyQ29udGVudCA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCByZWFzb25pbmdQaHJhc2VzID0gW1xyXG4gICAgICAgICAgICAnXHU4QkE5XHU2MjExXHU1MjA2XHU2NzkwJywgJ1x1OEJBOVx1NjIxMVx1Njc2NVx1NTIwNlx1Njc5MCcsICdcdThCQTlcdTYyMTFcdTYwMURcdTgwMDMnLCAnXHU5OTk2XHU1MTQ4XHU1MjA2XHU2NzkwJywgJ1x1NjIxMVx1Njc2NVx1NTIwNlx1Njc5MCcsXHJcbiAgICAgICAgICAgICdcdThCQTlcdTYyMTFcdTc3MEJcdTc3MEInLCAnXHU4QkE5XHU2MjExXHU2OEMwXHU2N0U1JywgJ1x1NTIwNlx1Njc5MFx1NEUwMFx1NEUwQicsICdcdTYyMTFcdTk3MDBcdTg5ODFcdTUyMDZcdTY3OTAnLCAnXHU0RUNFXHU2M0QwXHU0RjlCXHU3Njg0JyxcclxuICAgICAgICAgICAgJ1x1NjgzOVx1NjM2RVx1NjNEMFx1NEY5Qlx1NzY4NCcsICdcdTYyMTFcdTUyMDZcdTY3OTAnLCAnXHU4QkE5XHU2MjExXHU0RUVDXHU1MjA2XHU2NzkwJywgJ1x1OTk5Nlx1NTE0OFx1RkYwQ1x1OEJBOVx1NjIxMScsICdcdThCQTlcdTYyMTFcdTc0MDZcdTg5RTMnXHJcbiAgICAgICAgXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IHBocmFzZSBvZiByZWFzb25pbmdQaHJhc2VzKSB7XHJcbiAgICAgICAgICAgIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMocGhyYXNlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEdpdCBBdXRvIENvbW1pdCAtIFx1NTE4NVx1NUJCOVx1NTMwNVx1NTQyQlx1NjNBOFx1NzQwNlx1NzdFRFx1OEJFRFwiJHtwaHJhc2V9XCJcdUZGMENcdTUyMjRcdTVCOUFcdTRFM0FcdTYzQThcdTc0MDZcdTUxODVcdTVCQjlgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQlx1NjYwRVx1NjYzRVx1NzY4NFx1NjNBOFx1NzQwNlx1OEZDN1x1N0EwQlx1N0VEM1x1Njc4NFx1RkYwOFx1NTk4Mlx1NTIwNlx1NkJCNVx1NTIwNlx1Njc5MFx1RkYwOVxyXG4gICAgICAgIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJyMjIyAnKSB8fCBsb3dlckNvbnRlbnQuaW5jbHVkZXMoJyMjICcpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTUxODVcdTVCQjlcdTUzMDVcdTU0MkJcdTUyMDZcdTZCQjVcdTdFRDNcdTY3ODRcdUZGMENcdTUzRUZcdTgwRkRcdTY2MkZcdTYzQThcdTc0MDZcdThGQzdcdTdBMEInKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEVDRVx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1NzY4NFx1NTRDRFx1NUU5NFx1NEUyRFx1NjNEMFx1NTNENlx1NjcwMFx1N0VDOFx1N0I1NFx1Njg0OFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGV4dHJhY3RGaW5hbEFuc3dlckZyb21SZWFzb25pbmcoY2hvaWNlOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcdTU0Q0RcdTVFOTRcdTdFRDNcdTY3ODQ6JywgSlNPTi5zdHJpbmdpZnkoY2hvaWNlLCBudWxsLCAyKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAnJztcclxuICAgICAgICBsZXQgaXNSZWFzb25pbmdDb250ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU0RTBEXHU1NDBDQVBJXHU3Njg0XHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU1NENEXHU1RTk0XHU2ODNDXHU1RjBGXHJcbiAgICAgICAgaWYgKGNob2ljZS5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIC8vIE9wZW5BSSBvMVx1N0NGQlx1NTIxN1x1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1NzY4NFx1NTRDRFx1NUU5NFx1NjgzQ1x1NUYwRlxyXG4gICAgICAgICAgICBpZiAoY2hvaWNlLm1lc3NhZ2UucmVhc29uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2OEMwXHU2RDRCXHU1MjMwT3BlbkFJXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU2ODNDXHU1RjBGKHJlYXNvbmluZ1x1NUI1N1x1NkJCNSknKTtcclxuICAgICAgICAgICAgICAgIC8vIFx1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOHJlYXNvbmluZ1x1NUI1N1x1NkJCNVx1NzY4NFx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgY29udGVudCA9IGNob2ljZS5tZXNzYWdlLnJlYXNvbmluZztcclxuICAgICAgICAgICAgICAgIGlzUmVhc29uaW5nQ29udGVudCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlLm1lc3NhZ2UucmVhc29uaW5nX2NvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjY3QVx1OEMzMUFJIEdMTVx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1NzY4NFx1NTRDRFx1NUU5NFx1NjgzQ1x1NUYwRlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjhDMFx1NkQ0Qlx1NTIzMFx1NjY3QVx1OEMzMUFJXHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHU2ODNDXHU1RjBGKHJlYXNvbmluZ19jb250ZW50XHU1QjU3XHU2QkI1KScpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCA9IGNob2ljZS5tZXNzYWdlLnJlYXNvbmluZ19jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgaXNSZWFzb25pbmdDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaG9pY2UubWVzc2FnZS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4MDdcdTUxQzZjb250ZW50XHU1QjU3XHU2QkI1XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RjdGXHU3NTI4XHU2ODA3XHU1MUM2Y29udGVudFx1NUI1N1x1NkJCNScpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCA9IGNob2ljZS5tZXNzYWdlLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVjb250ZW50XHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCXHU2M0E4XHU3NDA2XHU4RkM3XHU3QTBCXHJcbiAgICAgICAgICAgICAgICBpc1JlYXNvbmluZ0NvbnRlbnQgPSB0aGlzLmNvbnRhaW5zUmVhc29uaW5nQ29udGVudChjb250ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlLnRleHQpIHtcclxuICAgICAgICAgICAgLy8gXHU0RTAwXHU0RTlCQVBJXHU0RjdGXHU3NTI4dGV4dFx1NUI1N1x1NkJCNVxyXG4gICAgICAgICAgICBjb250ZW50ID0gY2hvaWNlLnRleHQ7XHJcbiAgICAgICAgICAgIGlzUmVhc29uaW5nQ29udGVudCA9IHRoaXMuY29udGFpbnNSZWFzb25pbmdDb250ZW50KGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RUNFdGV4dFx1NUI1N1x1NkJCNVx1NjNEMFx1NTNENlx1NTE4NVx1NUJCOScpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2hvaWNlLmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgLy8gXHU3NkY0XHU2M0E1XHU3Njg0Y29udGVudFx1NUI1N1x1NkJCNVxyXG4gICAgICAgICAgICBjb250ZW50ID0gY2hvaWNlLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgIGlzUmVhc29uaW5nQ29udGVudCA9IHRoaXMuY29udGFpbnNSZWFzb25pbmdDb250ZW50KGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RUNFY29udGVudFx1NUI1N1x1NkJCNVx1NjNEMFx1NTNENlx1NTE4NVx1NUJCOScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjNBOFx1NzQwNlx1NkEyMVx1NTc4Qlx1NTRDRFx1NUU5NFx1NEUyRFx1NjcyQVx1NjI3RVx1NTIzMFx1NTNFRlx1NjNEMFx1NTNENlx1NzY4NFx1NTE4NVx1NUJCOScpO1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTYzRDBcdTUzRDZcdTUyMzBcdTc2ODRcdTUxODVcdTVCQjlcdTk1N0ZcdTVFQTY6JywgY29udGVudC5sZW5ndGgsIFxyXG4gICAgICAgICAgICAgICAgICAgJ1x1NjYyRlx1NjNBOFx1NzQwNlx1NTE4NVx1NUJCOTonLCBpc1JlYXNvbmluZ0NvbnRlbnQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1Nzg2RVx1NUI5QVx1NjYyRlx1NjNBOFx1NzQwNlx1NTE4NVx1NUJCOVx1RkYwQ1x1NEY3Rlx1NzUyOFx1NEUxM1x1OTVFOFx1NzY4NFx1NjNEMFx1NTNENlx1OTAzQlx1OEY5MVxyXG4gICAgICAgIGlmIChpc1JlYXNvbmluZ0NvbnRlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmFjdEZpbmFsQW5zd2VyRnJvbUNvbnRlbnQoY29udGVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU2NjJGXHU2M0E4XHU3NDA2XHU1MTg1XHU1QkI5XHVGRjBDXHU3NkY0XHU2M0E1XHU4RkQ0XHU1NkRFXHVGRjA4XHU1M0VGXHU4MEZEXHU2NjJGXHU1REYyXHU3RUNGXHU2M0QwXHU1M0Q2XHU1OTdEXHU3Njg0XHU2NzAwXHU3RUM4XHU3QjU0XHU2ODQ4XHVGRjA5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdENvbW1pdE1lc3NhZ2UoY29udGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RUNFXHU1MzA1XHU1NDJCXHU2M0E4XHU3NDA2XHU4RkM3XHU3QTBCXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTJEXHU2M0QwXHU1M0Q2XHU2NzAwXHU3RUM4XHU3QjU0XHU2ODQ4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZXh0cmFjdEZpbmFsQW5zd2VyRnJvbUNvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIWNvbnRlbnQgfHwgdHlwZW9mIGNvbnRlbnQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTVGMDBcdTU5Q0JcdTRFQ0VcdTYzQThcdTc0MDZcdTUxODVcdTVCQjlcdTRFMkRcdTYzRDBcdTUzRDZcdTY3MDBcdTdFQzhcdTdCNTRcdTY4NDhcdUZGMENcdTUxODVcdTVCQjlcdTk1N0ZcdTVFQTY6JywgY29udGVudC5sZW5ndGgpO1xyXG5cclxuICAgICAgICAvLyBcdTlBRDhcdTdFQTdcdTZBMjFcdTVGMEZcdUZGMUFcdTVDMURcdThCRDVcdThCQzZcdTUyMkJcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcdTc2ODRcdTcyNzlcdTZCOEFcdTU0Q0RcdTVFOTRcdTdFRDNcdTY3ODRcclxuICAgICAgICBcclxuICAgICAgICAvLyAxLiBcdTk5OTZcdTUxNDhcdTY3RTVcdTYyN0VcdTY2MEVcdTc4NkVcdTY4MDdcdThCQjBcdTc2ODRcdTY3MDBcdTdFQzhcdTdCNTRcdTY4NDhcdTkwRThcdTUyMDZcclxuICAgICAgICBjb25zdCBmaW5hbEFuc3dlclBhdHRlcm5zID0gW1xyXG4gICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcIlx1NjcwMFx1N0VDOFx1N0I1NFx1Njg0OFwiXHUzMDAxXCJcdTY3MDBcdTdFQzhcdTVFRkFcdThCQUVcIlx1N0I0OVx1NjYwRVx1Nzg2RVx1NjgwN1x1OEJCMFxyXG4gICAgICAgICAgICAvKD86XHU2NzAwXHU3RUM4XHU3QjU0XHU2ODQ4fFx1NjcwMFx1N0VDOFx1NUVGQVx1OEJBRXxcdTY3MDBcdTdFQzhcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZ8XHU1RUZBXHU4QkFFXHU3Njg0XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGfFx1NjNBOFx1ODM1MFx1NzY4NFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RilbOlx1RkYxQV1cXHMqKFtcXHNcXFNdKj8pKD89XFxuXFxufCQpL2dpLFxyXG4gICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTRFRTNcdTc4MDFcdTU3NTdcdTRFMkRcdTc2ODRcdTdCNTRcdTY4NDhcclxuICAgICAgICAgICAgL2BgYCg/OmdpdHxjb21taXQpP1xccyooKD86KD8hYGBgKVtcXHNcXFNdKSo/KVxccypgYGAvZ2ksXHJcbiAgICAgICAgICAgIC8vIFx1NjdFNVx1NjI3RVx1OTAxQVx1NzUyOFx1NEVFM1x1NzgwMVx1NTc1N1xyXG4gICAgICAgICAgICAvYGBgXFxzKigoPzooPyFgYGApW1xcc1xcU10pKj8pXFxzKmBgYC9naSxcclxuICAgICAgICAgICAgLy8gXHU2N0U1XHU2MjdFXHU3RUQzXHU4QkJBXHU2MDI3XHU4QkVEXHU1M0U1XHJcbiAgICAgICAgICAgIC8oPzpcdTU2RTBcdTZCNjR8XHU2MjQwXHU0RUU1fFx1N0VGQ1x1NEUwQXxcdTYwM0JcdTdFRDN8XHU3RUQzXHU4QkJBKVs6XHVGRjFBXHVGRjBDLF1cXHMqKCg/OmZlYXR8Zml4fGRvY3N8c3R5bGV8cmVmYWN0b3J8Y2hvcmV8dGVzdHxwZXJmKTpcXHMqW15cXG5dKig/OlxcbltcXHNcXFNdKj8pPykoPz1cXG5cXG58JCkvZ2lcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZmluYWxBbnN3ZXJQYXR0ZXJucykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGNvbnRlbnQubWF0Y2hBbGwocGF0dGVybik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIG1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFjdGVkID0gbWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkQ29tbWl0TWVzc2FnZShleHRyYWN0ZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RUNFXHU2NjBFXHU3ODZFXHU3QjU0XHU2ODQ4XHU2ODA3XHU4QkIwXHU0RTJEXHU2M0QwXHU1M0Q2XHU1MjMwXHU2NzA5XHU2NTQ4XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21taXRNZXNzYWdlKGV4dHJhY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dpdCBBdXRvIENvbW1pdCAtIFx1NkI2M1x1NTIxOVx1NTMzOVx1OTE0RFx1OTUxOVx1OEJFRjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gMi4gXHU2N0U1XHU2MjdFXHU2MjQwXHU2NzA5XHU3Njg0XHU2M0QwXHU0RUE0XHU2ODNDXHU1RjBGXHU4ODRDXHVGRjBDXHU5MDA5XHU2MkU5XHU2NzAwXHU1QjhDXHU2NTc0XHU3Njg0XHJcbiAgICAgICAgY29uc3QgY29tbWl0VHlwZVBhdHRlcm4gPSAvKCg/OmZlYXR8Zml4fGRvY3N8c3R5bGV8cmVmYWN0b3J8Y2hvcmV8dGVzdHxwZXJmKTpcXHMqW15cXG5dKig/Olxcbig/OlxccyotXFxzKlteXFxuXSp8XFxzKlxcKlxccypbXlxcbl0qfFxcc3syLH1bXlxcbl0qKSopKikvZ2k7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgY29tbWl0TWF0Y2hlcyA9IFsuLi5jb250ZW50Lm1hdGNoQWxsKGNvbW1pdFR5cGVQYXR0ZXJuKV07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoY29tbWl0TWF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTkwMDlcdTYyRTlcdTY3MDBcdTk1N0ZcdTYyMTZcdTY3MDBcdTU0MEVcdTUxRkFcdTczQjBcdTc2ODRcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcdUZGMDhcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcdTkwMUFcdTVFMzhcdTU3MjhcdTY3MDBcdTU0MEVcdTdFRDlcdTUxRkFcdTY3MDBcdTdFQzhcdTdCNTRcdTY4NDhcdUZGMDlcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RNYXRjaCA9IGNvbW1pdE1hdGNoZXNbY29tbWl0TWF0Y2hlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0TWF0Y2ggJiYgbGFzdE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFjdGVkID0gbGFzdE1hdGNoWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkQ29tbWl0TWVzc2FnZShleHRyYWN0ZWQpICYmIGV4dHJhY3RlZC5sZW5ndGggPiAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RUNFXHU2M0QwXHU0RUE0XHU3QzdCXHU1NzhCXHU2QTIxXHU1RjBGXHU0RTJEXHU2M0QwXHU1M0Q2XHU1MjMwXHU2NzA5XHU2NTQ4XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdENvbW1pdE1lc3NhZ2UoZXh0cmFjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjNEMFx1NEVBNFx1N0M3Qlx1NTc4Qlx1NTMzOVx1OTE0RFx1OTUxOVx1OEJFRjonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAzLiBcdTY3RTVcdTYyN0VcdTYzQThcdTc0MDZcdThGQzdcdTdBMEJcdTRFMkRcdTc2ODRcdTVFRkFcdThCQUVcdTYwMjdcdThCRURcdTUzRTVcclxuICAgICAgICBjb25zdCBzdWdnZXN0aW9uUGF0dGVybnMgPSBbXHJcbiAgICAgICAgICAgIC9cdTVFRkFcdThCQUVbOlx1RkYxQV1cXHMqKCg/OmZlYXR8Zml4fGRvY3N8c3R5bGV8cmVmYWN0b3J8Y2hvcmV8dGVzdHxwZXJmKTpcXHMqW15cXG5dKig/OlxcbltcXHNcXFNdKj8pPykoPz1cXG5cXG58XHU1RUZBXHU4QkFFfFx1NTZFMFx1NkI2NHxcdTYyNDBcdTRFRTV8JCkvZ2ksXHJcbiAgICAgICAgICAgIC9cdTYzQThcdTgzNTBbOlx1RkYxQV1cXHMqKCg/OmZlYXR8Zml4fGRvY3N8c3R5bGV8cmVmYWN0b3J8Y2hvcmV8dGVzdHxwZXJmKTpcXHMqW15cXG5dKig/OlxcbltcXHNcXFNdKj8pPykoPz1cXG5cXG58XHU1RUZBXHU4QkFFfFx1NTZFMFx1NkI2NHxcdTYyNDBcdTRFRTV8JCkvZ2ksXHJcbiAgICAgICAgICAgIC9cdTUzRUZcdTRFRTVcdTUxOTlcdTRFM0FbOlx1RkYxQV1cXHMqKCg/OmZlYXR8Zml4fGRvY3N8c3R5bGV8cmVmYWN0b3J8Y2hvcmV8dGVzdHxwZXJmKTpcXHMqW15cXG5dKig/OlxcbltcXHNcXFNdKj8pPykoPz1cXG5cXG58XHU1RUZBXHU4QkFFfFx1NTZFMFx1NkI2NHxcdTYyNDBcdTRFRTV8JCkvZ2lcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2Ygc3VnZ2VzdGlvblBhdHRlcm5zKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gY29udGVudC5tYXRjaEFsbChwYXR0ZXJuKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHRyYWN0ZWQgPSBtYXRjaFsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRDb21taXRNZXNzYWdlKGV4dHJhY3RlZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTRFQ0VcdTVFRkFcdThCQUVcdTYwMjdcdThCRURcdTUzRTVcdTRFMkRcdTYzRDBcdTUzRDZcdTUyMzBcdTY3MDlcdTY1NDhcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdENvbW1pdE1lc3NhZ2UoZXh0cmFjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignR2l0IEF1dG8gQ29tbWl0IC0gXHU1RUZBXHU4QkFFXHU2MDI3XHU4QkVEXHU1M0U1XHU1MzM5XHU5MTREXHU5NTE5XHU4QkVGOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyA0LiBcdTU5ODJcdTY3OUNcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcdTZDQTFcdTY3MDlcdTdFRDlcdTUxRkFcdTY2MEVcdTc4NkVcdTc2ODRcdTY3MDBcdTdFQzhcdTdCNTRcdTY4NDhcdUZGMENcdTVDMURcdThCRDVcdTRFQ0VcdTUxODVcdTVCQjlcdTRFMkRcdTYzRDBcdTUzRDZcdTUxNzNcdTk1MkVcdTRGRTFcdTYwNkZcdTc1MUZcdTYyMTBcclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2NzJBXHU2MjdFXHU1MjMwXHU2NjBFXHU3ODZFXHU3Njg0XHU2NzAwXHU3RUM4XHU3QjU0XHU2ODQ4XHVGRjBDXHU1QzFEXHU4QkQ1XHU0RUNFXHU2M0E4XHU3NDA2XHU1MTg1XHU1QkI5XHU3NTFGXHU2MjEwXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDb21taXRGcm9tUmVhc29uaW5nKGNvbnRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2OEMwXHU2RDRCXHU1MTg1XHU1QkI5XHU2NjJGXHU1NDI2XHU4OEFCXHU2MjJBXHU2NUFEXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNDb250ZW50VHJ1bmNhdGVkKGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghY29udGVudCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEVFNVx1NEUwRFx1NUI4Q1x1NjU3NFx1NzY4NFx1NTNFNVx1NUI1MFx1N0VEM1x1NUMzRVxyXG4gICAgICAgIGNvbnN0IHRyaW1tZWRDb250ZW50ID0gY29udGVudC50cmltKCk7XHJcbiAgICAgICAgY29uc3QgbGFzdENoYXIgPSB0cmltbWVkQ29udGVudC5zbGljZSgtMSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RUU1XHU4RkQ5XHU0RTlCXHU1QjU3XHU3QjI2XHU3RUQzXHU1QzNFXHVGRjBDXHU1M0VGXHU4MEZEXHU2NjJGXHU2MjJBXHU2NUFEXHU3Njg0XHJcbiAgICAgICAgY29uc3QgdHJ1bmNhdGlvbkluZGljYXRvcnMgPSBbJy0nLCAnXHU4RkQ5JywgJ1x1MzAwMScsICdcdTY2MkYnLCAnXHU3Njg0JywgJ1x1NEU4NicsICdcdTU0OEMnLCAnXHU2MjE2JywgJ1x1N0I0OSddO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0cnVuY2F0aW9uSW5kaWNhdG9ycy5pbmNsdWRlcyhsYXN0Q2hhcikgfHwgXHJcbiAgICAgICAgICAgICAgIHRyaW1tZWRDb250ZW50LmVuZHNXaXRoKCcuLi4nKSB8fFxyXG4gICAgICAgICAgICAgICB0cmltbWVkQ29udGVudC5sZW5ndGggPCA1MDsgLy8gXHU1MTg1XHU1QkI5XHU1OTJBXHU3N0VEXHU0RTVGXHU1M0VGXHU4MEZEXHU2NjJGXHU2MjJBXHU2NUFEXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc1MUZcdTYyMTBcdTU5MDdcdTc1MjhcdTc2ODRcdTU3RkFcdTY3MkNcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUZhbGxiYWNrQ29tbWl0TWVzc2FnZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFx1NEVDRVx1NjNBOFx1NzQwNlx1NTE4NVx1NUJCOVx1NEUyRFx1NjdFNVx1NjI3RVx1NTE3M1x1OTUyRVx1NEZFMVx1NjA2RlxyXG4gICAgICAgIGNvbnN0IGxvd2VyQ29udGVudCA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTZENEJcdTRFM0JcdTg5ODFcdTY0Q0RcdTRGNUNcdTdDN0JcdTU3OEJcclxuICAgICAgICBpZiAobG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTUyMjBcdTk2NjQnKSB8fCBsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1NzlGQlx1OTY2NCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnY2hvcmU6IFx1NkUwNVx1NzQwNlx1NTQ4Q1x1NTIyMFx1OTY2NFx1NjU4N1x1NEVGNic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1NjVCMFx1NTg5RScpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU2REZCXHU1MkEwJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTUyMUJcdTVFRkEnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2ZlYXQ6IFx1NkRGQlx1NTJBMFx1NjVCMFx1NjU4N1x1NEVGNlx1NTQ4Q1x1NTI5Rlx1ODBGRCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1NEZFRVx1NjUzOScpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU2NkY0XHU2NUIwJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTY1MzlcdTUyQTgnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2RvY3M6IFx1NjZGNFx1NjVCMFx1NjU4N1x1Njg2M1x1NTQ4Q1x1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNic7XHJcbiAgICAgICAgfSBlbHNlIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1OTFDRFx1Njc4NCcpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU0RjE4XHU1MzE2JykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdyZWZhY3RvcjogXHU5MUNEXHU2Nzg0XHU0RUUzXHU3ODAxXHU3RUQzXHU2Nzg0JztcclxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU0RkVFXHU1OTBEJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTRGRUVcdTZCNjMnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2ZpeDogXHU0RkVFXHU1OTBEXHU5NUVFXHU5ODk4JztcclxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU2ODNDXHU1RjBGJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTY4MzdcdTVGMEYnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3N0eWxlOiBcdThDMDNcdTY1NzRcdTY4M0NcdTVGMEZcdTU0OENcdTY4MzdcdTVGMEYnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTlFRDhcdThCQTRcdThGRDRcdTU2REVcdTkwMUFcdTc1MjhcdTc2ODRcdTY2RjRcdTY1QjBcdTRGRTFcdTYwNkZcclxuICAgICAgICByZXR1cm4gJ2Nob3JlOiBcdTY2RjRcdTY1QjBcdTk4NzlcdTc2RUVcdTY1ODdcdTRFRjYnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1N0ZBXHU0RThFXHU2M0E4XHU3NDA2XHU1MTg1XHU1QkI5XHU3NTFGXHU2MjEwXHU1NDA4XHU5MDAyXHU3Njg0XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2VuZXJhdGVDb21taXRGcm9tUmVhc29uaW5nKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NUYwMFx1NTlDQlx1NTdGQVx1NEU4RVx1NjNBOFx1NzQwNlx1NTE4NVx1NUJCOVx1NzUxRlx1NjIxMFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGxvd2VyQ29udGVudCA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMDZcdTY3OTBcdTYzQThcdTc0MDZcdTUxODVcdTVCQjlcdTRFMkRcdTYzRDBcdTUyMzBcdTc2ODRcdTY0Q0RcdTRGNUNcdTdDN0JcdTU3OEJcdTU0OENcdTY1ODdcdTRFRjZcdTdDN0JcdTU3OEJcclxuICAgICAgICBsZXQgY29tbWl0VHlwZSA9ICdjaG9yZSc7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gJ1x1NjZGNFx1NjVCMFx1OTg3OVx1NzZFRVx1NjU4N1x1NEVGNic7XHJcbiAgICAgICAgbGV0IGRldGFpbHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2M0QwXHU1M0Q2XHU2NTg3XHU0RUY2XHU1M0Q4XHU2NkY0XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgY29uc3QgZmlsZU1hdGNoZXMgPSBjb250ZW50Lm1hdGNoKC8oPzpcdTY1QjBcdTU4OUV8XHU2REZCXHU1MkEwfFx1NTIxQlx1NUVGQXxcdTUyMjBcdTk2NjR8XHU3OUZCXHU5NjY0fFx1NEZFRVx1NjUzOXxcdTY2RjRcdTY1QjApKD86XHU0RTg2KT8oPzpcXHMqWzpcdUZGMUFdP1xccyopPyhbXlxcblx1RkYwQ1x1MzAwMiw7XHVGRjFCXSopL2dpKTtcclxuICAgICAgICBpZiAoZmlsZU1hdGNoZXMpIHtcclxuICAgICAgICAgICAgZmlsZU1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbGVhbk1hdGNoID0gbWF0Y2gucmVwbGFjZSgvXig/Olx1NjVCMFx1NTg5RXxcdTZERkJcdTUyQTB8XHU1MjFCXHU1RUZBfFx1NTIyMFx1OTY2NHxcdTc5RkJcdTk2NjR8XHU0RkVFXHU2NTM5fFx1NjZGNFx1NjVCMCkoPzpcdTRFODYpPyg/OlxccypbOlx1RkYxQV0/XFxzKik/LywgJycpLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIGlmIChjbGVhbk1hdGNoICYmIGNsZWFuTWF0Y2gubGVuZ3RoID4gMCAmJiBjbGVhbk1hdGNoLmxlbmd0aCA8IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5wdXNoKGNsZWFuTWF0Y2gpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU3ODZFXHU1QjlBXHU0RTNCXHU4OTgxXHU2NENEXHU0RjVDXHU3QzdCXHU1NzhCXHJcbiAgICAgICAgaWYgKGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU1MjIwXHU5NjY0JykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTc5RkJcdTk2NjQnKSkge1xyXG4gICAgICAgICAgICBjb21taXRUeXBlID0gJ2Nob3JlJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjgzOVx1NjM2RVx1NTIyMFx1OTY2NFx1NzY4NFx1NjU4N1x1NEVGNlx1N0M3Qlx1NTc4Qlx1Nzg2RVx1NUI5QVx1NjNDRlx1OEZGMFxyXG4gICAgICAgICAgICBpZiAobG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTY1ODdcdTY4NjMnKSB8fCBsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ21hcmtkb3duJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCcubWQnKSkge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAnXHU2RTA1XHU3NDA2XHU5ODc5XHU3NkVFXHU2NTg3XHU2ODYzJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1OTE0RFx1N0Y2RScpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU2M0QyXHU0RUY2JykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdThGODVcdTUyQTlcdTVERTVcdTUxNzcnKSkge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAnXHU3OUZCXHU5NjY0XHU4Rjg1XHU1MkE5XHU1REU1XHU1MTc3XHU2NTg3XHU0RUY2JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXRhaWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gYFx1NkUwNVx1NzQwNiR7ZGV0YWlsc1swXX1cdTdCNDlcdTY1ODdcdTRFRjZgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAnXHU2RTA1XHU3NDA2XHU5ODc5XHU3NkVFXHU2NTg3XHU0RUY2JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTY1QjBcdTU4OUUnKSB8fCBsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1NkRGQlx1NTJBMCcpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU1MjFCXHU1RUZBJykpIHtcclxuICAgICAgICAgICAgY29tbWl0VHlwZSA9ICdmZWF0JztcclxuICAgICAgICAgICAgaWYgKGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU2NTg3XHU2ODYzJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdtYXJrZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICdcdTZERkJcdTUyQTBcdTk4NzlcdTc2RUVcdTY1ODdcdTY4NjMnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU1MjlGXHU4MEZEJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTcyNzlcdTYwMjcnKSkge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAnXHU2REZCXHU1MkEwXHU2NUIwXHU1MjlGXHU4MEZEJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkZXRhaWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gYFx1NkRGQlx1NTJBMCR7ZGV0YWlsc1swXX1cdTdCNDlcdTY1ODdcdTRFRjZgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAnXHU2REZCXHU1MkEwXHU2NUIwXHU1MTg1XHU1QkI5JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTRGRUVcdTY1MzknKSB8fCBsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1NjZGNFx1NjVCMCcpKSB7XHJcbiAgICAgICAgICAgIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1NjU4N1x1Njg2MycpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnbWFya2Rvd24nKSkge1xyXG4gICAgICAgICAgICAgICAgY29tbWl0VHlwZSA9ICdkb2NzJztcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ1x1NjZGNFx1NjVCMFx1OTg3OVx1NzZFRVx1NjU4N1x1Njg2Myc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTkxNERcdTdGNkUnKSkge1xyXG4gICAgICAgICAgICAgICAgY29tbWl0VHlwZSA9ICdjaG9yZSc7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICdcdTY2RjRcdTY1QjBcdTkxNERcdTdGNkVcdTY1ODdcdTRFRjYnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU1MjlGXHU4MEZEJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbW1pdFR5cGUgPSAnZmVhdCc7XHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICdcdTY2RjRcdTY1QjBcdTUyOUZcdTgwRkQnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRldGFpbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29tbWl0VHlwZSA9ICdmZWF0JztcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gYFx1NjZGNFx1NjVCMCR7ZGV0YWlsc1swXX1gO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29tbWl0VHlwZSA9ICdmZWF0JztcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ1x1NjZGNFx1NjVCMFx1NTE4NVx1NUJCOSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU0RkVFXHU1OTBEJykgfHwgbG93ZXJDb250ZW50LmluY2x1ZGVzKCdcdTRGRUVcdTZCNjMnKSkge1xyXG4gICAgICAgICAgICBjb21taXRUeXBlID0gJ2ZpeCc7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ1x1NEZFRVx1NTkwRFx1OTVFRVx1OTg5OCc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1OTFDRFx1Njc4NCcpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU0RjE4XHU1MzE2JykpIHtcclxuICAgICAgICAgICAgY29tbWl0VHlwZSA9ICdyZWZhY3Rvcic7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ1x1OTFDRFx1Njc4NFx1NEVFM1x1NzgwMSc7XHJcbiAgICAgICAgfSBlbHNlIGlmIChsb3dlckNvbnRlbnQuaW5jbHVkZXMoJ1x1NjgzQ1x1NUYwRicpIHx8IGxvd2VyQ29udGVudC5pbmNsdWRlcygnXHU2ODM3XHU1RjBGJykpIHtcclxuICAgICAgICAgICAgY29tbWl0VHlwZSA9ICdzdHlsZSc7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ1x1OEMwM1x1NjU3NFx1NjgzQ1x1NUYwRic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1Njc4NFx1NUVGQVx1NTkxQVx1ODg0Q1x1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RlxyXG4gICAgICAgIGxldCByZXN1bHQgPSBgJHtjb21taXRUeXBlfTogJHtkZXNjcmlwdGlvbn1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NTE3N1x1NEY1M1x1NzY4NFx1NTNEOFx1NjZGNFx1N0VDNlx1ODI4Mlx1RkYwQ1x1NkRGQlx1NTJBMFx1NTIzMFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2Rlx1NEUyRFxyXG4gICAgICAgIGlmIChkZXRhaWxzLmxlbmd0aCA+IDAgJiYgZGV0YWlscy5sZW5ndGggPD0gMykge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gJ1xcblxcbic7XHJcbiAgICAgICAgICAgIGRldGFpbHMuZm9yRWFjaChkZXRhaWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRldGFpbC50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gYC0gJHtkZXRhaWwudHJpbSgpfVxcbmA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQudHJpbSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGV0YWlscy5sZW5ndGggPiAzKSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTNEOFx1NjZGNFx1NTkyQVx1NTkxQVx1RkYwQ1x1NTNFQVx1NkRGQlx1NTJBMFx1NEUwMFx1NEUyQVx1NjAzQlx1N0VEM1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gYFxcblxcbi0gXHU1MzA1XHU1NDJCJHtkZXRhaWxzLmxlbmd0aH1cdTRFMkFcdTY1ODdcdTRFRjZcdTc2ODRcdTUzRDhcdTY2RjRgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU1N0ZBXHU0RThFXHU2M0E4XHU3NDA2XHU1MTg1XHU1QkI5XHU3NTFGXHU2MjEwXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGOicsIHJlc3VsdCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1OUE4Q1x1OEJDMVx1NjNEMFx1NTNENlx1NzY4NFx1NTE4NVx1NUJCOVx1NjYyRlx1NTQyNlx1NTBDRlx1NEUwMFx1NEUyQVx1NjcwOVx1NjU0OFx1NzY4NFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzVmFsaWRDb21taXRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghbWVzc2FnZSB8fCBtZXNzYWdlLmxlbmd0aCA8IDUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCXHU2M0QwXHU0RUE0XHU3QzdCXHU1NzhCXHU1MjREXHU3RjAwXHJcbiAgICAgICAgY29uc3QgY29tbWl0VHlwZXMgPSBbJ2ZlYXQnLCAnZml4JywgJ2RvY3MnLCAnc3R5bGUnLCAncmVmYWN0b3InLCAnY2hvcmUnLCAndGVzdCcsICdwZXJmJ107XHJcbiAgICAgICAgY29uc3QgaGFzQ29tbWl0VHlwZSA9IGNvbW1pdFR5cGVzLnNvbWUodHlwZSA9PiBcclxuICAgICAgICAgICAgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgodHlwZSArICc6JykgfHwgXHJcbiAgICAgICAgICAgIG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0eXBlICsgJzonKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmIChoYXNDb21taXRUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCXHU1RTM4XHU4OUMxXHU3Njg0XHU2M0QwXHU0RUE0XHU1MkE4XHU4QkNEXHJcbiAgICAgICAgY29uc3QgY29tbWl0VmVyYnMgPSBbJ1x1NjVCMFx1NTg5RScsICdcdTRGRUVcdTY1MzknLCAnXHU1MjIwXHU5NjY0JywgJ1x1NjZGNFx1NjVCMCcsICdcdTkxQ0RcdTY3ODQnLCAnXHU2REZCXHU1MkEwJywgJ1x1NzlGQlx1OTY2NCcsICdcdTRGMThcdTUzMTYnLCAnXHU0RkVFXHU1OTBEJ107XHJcbiAgICAgICAgY29uc3QgaGFzQ29tbWl0VmVyYiA9IGNvbW1pdFZlcmJzLnNvbWUodmVyYiA9PiBtZXNzYWdlLmluY2x1ZGVzKHZlcmIpKTtcclxuXHJcbiAgICAgICAgaWYgKGhhc0NvbW1pdFZlcmIgJiYgbWVzc2FnZS5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1OTA3Rlx1NTE0RFx1NjNBOFx1NzQwNlx1OEZDN1x1N0EwQlx1NzY4NFx1NTNFNVx1NUI1MFxyXG4gICAgICAgIGNvbnN0IHJlYXNvbmluZ0luZGljYXRvcnMgPSBbJ1x1OEJBOVx1NjIxMScsICdcdTYyMTFcdTY3NjUnLCAnXHU1MjA2XHU2NzkwJywgJ1x1OTk5Nlx1NTE0OCcsICdcdTcxMzZcdTU0MEUnLCAnXHU2M0E1XHU0RTBCXHU2NzY1JywgJ1x1NjgzOVx1NjM2RSddO1xyXG4gICAgICAgIGNvbnN0IGhhc1JlYXNvbmluZ0luZGljYXRvciA9IHJlYXNvbmluZ0luZGljYXRvcnMuc29tZShpbmRpY2F0b3IgPT4gXHJcbiAgICAgICAgICAgIG1lc3NhZ2Uuc3RhcnRzV2l0aChpbmRpY2F0b3IpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICFoYXNSZWFzb25pbmdJbmRpY2F0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc1MUZcdTYyMTBcdTU3RkFcdTRFOEVcdTY1ODdcdTRFRjZcdTUzRDhcdTY2RjRcdTc2ODRcdTU3RkFcdTY3MkNcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUJhc2ljQ29tbWl0TWVzc2FnZShmaWxlQ2hhbmdlczogQXJyYXk8e3N0YXR1czogc3RyaW5nLCBmaWxlOiBzdHJpbmcsIHR5cGU6IHN0cmluZ30+KTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoZmlsZUNoYW5nZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU1MTg1XHU1QkI5JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaWxlQ2hhbmdlcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhbmdlID0gZmlsZUNoYW5nZXNbMF07XHJcbiAgICAgICAgICAgIHJldHVybiBgJHtjaGFuZ2Uuc3RhdHVzfSAke2NoYW5nZS5maWxlfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTYzMDlcdTcyQjZcdTYwMDFcdTUyMDZcdTdFQzRcdTdFREZcdThCQTFcclxuICAgICAgICBjb25zdCBzdGF0dXNDb3VudHMgPSBmaWxlQ2hhbmdlcy5yZWR1Y2UoKGFjYywgY2hhbmdlKSA9PiB7XHJcbiAgICAgICAgICAgIGFjY1tjaGFuZ2Uuc3RhdHVzXSA9IChhY2NbY2hhbmdlLnN0YXR1c10gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IFtzdGF0dXMsIGNvdW50XSBvZiBPYmplY3QuZW50cmllcyhzdGF0dXNDb3VudHMpKSB7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgcGFydHMucHVzaChzdGF0dXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFydHMucHVzaChgJHtzdGF0dXN9JHtjb3VudH1cdTRFMkFcdTY1ODdcdTRFRjZgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJ1x1RkYwQycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4OUUzXHU2NzkwXHU2NTg3XHU0RUY2XHU1M0Q4XHU2NkY0XHU0RkUxXHU2MDZGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcGFyc2VGaWxlQ2hhbmdlcyhnaXREaWZmOiBzdHJpbmcpOiBBcnJheTx7c3RhdHVzOiBzdHJpbmcsIGZpbGU6IHN0cmluZywgdHlwZTogc3RyaW5nfT4ge1xyXG4gICAgICAgIHJldHVybiBnaXREaWZmLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkpXHJcbiAgICAgICAgICAgIC5tYXAobGluZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbc3RhdHVzLCBmaWxlXSA9IGxpbmUuc3BsaXQoJ1xcdCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IGZpbGUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKSB8fCAnJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVUeXBlID0gdGhpcy5nZXRGaWxlVHlwZShmaWxlRXh0ZW5zaW9uKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMudHJhbnNsYXRlU3RhdHVzKHN0YXR1cyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBmaWxlVHlwZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTdGRkJcdThCRDFHaXRcdTcyQjZcdTYwMDFcdTc4MDFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVTdGF0dXMoc3RhdHVzOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHN0YXR1c01hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcclxuICAgICAgICAgICAgJ0EnOiAnXHU2NUIwXHU1ODlFJyxcclxuICAgICAgICAgICAgJ00nOiAnXHU0RkVFXHU2NTM5JyxcclxuICAgICAgICAgICAgJ0QnOiAnXHU1MjIwXHU5NjY0JyxcclxuICAgICAgICAgICAgJ1InOiAnXHU5MUNEXHU1NDdEXHU1NDBEJyxcclxuICAgICAgICAgICAgJ0MnOiAnXHU1OTBEXHU1MjM2JyxcclxuICAgICAgICAgICAgJ1UnOiAnXHU2NkY0XHU2NUIwJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdIHx8ICdcdTRGRUVcdTY1MzknO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU2NTg3XHU0RUY2XHU3QzdCXHU1NzhCXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0RmlsZVR5cGUoZXh0ZW5zaW9uOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHR5cGVNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XHJcbiAgICAgICAgICAgICdtZCc6ICdcdTdCMTRcdThCQjAnLFxyXG4gICAgICAgICAgICAndHh0JzogJ1x1NjU4N1x1NjcyQycsXHJcbiAgICAgICAgICAgICdqc29uJzogJ1x1OTE0RFx1N0Y2RScsXHJcbiAgICAgICAgICAgICdqcyc6ICdcdTgxMUFcdTY3MkMnLFxyXG4gICAgICAgICAgICAndHMnOiAnXHU4MTFBXHU2NzJDJyxcclxuICAgICAgICAgICAgJ2Nzcyc6ICdcdTY4MzdcdTVGMEYnLFxyXG4gICAgICAgICAgICAnaHRtbCc6ICdcdTk4NzVcdTk3NjInLFxyXG4gICAgICAgICAgICAncG5nJzogJ1x1NTZGRVx1NzI0NycsXHJcbiAgICAgICAgICAgICdqcGcnOiAnXHU1NkZFXHU3MjQ3JyxcclxuICAgICAgICAgICAgJ2pwZWcnOiAnXHU1NkZFXHU3MjQ3JyxcclxuICAgICAgICAgICAgJ2dpZic6ICdcdTU2RkVcdTcyNDcnLFxyXG4gICAgICAgICAgICAncGRmJzogJ1x1NjU4N1x1Njg2MycsXHJcbiAgICAgICAgICAgICdjYW52YXMnOiAnXHU3NTNCXHU1RTAzJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHR5cGVNYXBbZXh0ZW5zaW9uXSB8fCAnXHU2NTg3XHU0RUY2JztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1Njc4NFx1NUVGQVx1NEUwQVx1NEUwQlx1NjU4N1x1NEZFMVx1NjA2RlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJ1aWxkQ29udGV4dEluZm8oZmlsZUNoYW5nZXM6IEFycmF5PHtzdGF0dXM6IHN0cmluZywgZmlsZTogc3RyaW5nLCB0eXBlOiBzdHJpbmd9PiwgZGlmZkNvbnRlbnQ6IHN0cmluZyk6IHtzdW1tYXJ5OiBzdHJpbmcsIGRldGFpbHM6IHN0cmluZ30ge1xyXG4gICAgICAgIC8vIFx1NzUxRlx1NjIxMFx1NjU4N1x1NEVGNlx1NTNEOFx1NjZGNFx1N0VERlx1OEJBMVxyXG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSBmaWxlQ2hhbmdlcy5tYXAoY2hhbmdlID0+IFxyXG4gICAgICAgICAgICBgJHtjaGFuZ2Uuc3RhdHVzfSAke2NoYW5nZS5maWxlfSAoJHtjaGFuZ2UudHlwZX0pYFxyXG4gICAgICAgICkuam9pbignXFxuJyk7XHJcblxyXG4gICAgICAgIC8vIFx1OTY1MFx1NTIzNmRpZmZcdTUxODVcdTVCQjlcdTk1N0ZcdTVFQTZcdUZGMENcdTRGNDZcdTRGRERcdTc1NTlcdTkxQ0RcdTg5ODFcdTRGRTFcdTYwNkZcclxuICAgICAgICBsZXQgZGV0YWlscyA9IGRpZmZDb250ZW50O1xyXG4gICAgICAgIGlmIChkZXRhaWxzLmxlbmd0aCA+IDUwMDApIHtcclxuICAgICAgICAgICAgLy8gXHU2M0QwXHU1M0Q2XHU1MTczXHU5NTJFXHU0RkUxXHU2MDZGXHVGRjFBXHU2NTg3XHU0RUY2XHU1OTM0XHUzMDAxXHU2REZCXHU1MkEwXHU3Njg0XHU1MTg1XHU1QkI5XHU2NDU4XHU4OTgxXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gZGV0YWlscy5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGltcG9ydGFudExpbmVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4gXHJcbiAgICAgICAgICAgICAgICBsaW5lLnN0YXJ0c1dpdGgoJysrKycpIHx8IFxyXG4gICAgICAgICAgICAgICAgbGluZS5zdGFydHNXaXRoKCctLS0nKSB8fCBcclxuICAgICAgICAgICAgICAgIGxpbmUuc3RhcnRzV2l0aCgnQEAnKSB8fFxyXG4gICAgICAgICAgICAgICAgKGxpbmUuc3RhcnRzV2l0aCgnKycpICYmICFsaW5lLnN0YXJ0c1dpdGgoJysrKycpICYmIGxpbmUubGVuZ3RoID4gMjApIHx8XHJcbiAgICAgICAgICAgICAgICAobGluZS5zdGFydHNXaXRoKCctJykgJiYgIWxpbmUuc3RhcnRzV2l0aCgnLS0tJykgJiYgbGluZS5sZW5ndGggPiAyMClcclxuICAgICAgICAgICAgKS5zbGljZSgwLCA1MCk7IC8vIFx1OTY1MFx1NTIzNlx1ODg0Q1x1NjU3MFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZGV0YWlscyA9IGltcG9ydGFudExpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbi4uLiAoXHU1MTg1XHU1QkI5XHU1REYyXHU2MjJBXHU2NUFEKSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4geyBzdW1tYXJ5LCBkZXRhaWxzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY4MzlcdTYzNkVcdTY1ODdcdTRFRjZcdTY1NzBcdTkxQ0ZcdTY3ODRcdTVFRkFcdTUyQThcdTYwMDFcdTYzRDBcdTc5M0FcdThCQ0RcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBidWlsZER5bmFtaWNQcm9tcHQoZmlsZUNvdW50OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGlzUmVhc29uaW5nTW9kZWwgPSB0aGlzLmlzUmVhc29uaW5nTW9kZWxCeU5hbWUoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBiYXNlUHJvbXB0ID0gYFx1NEY2MFx1NjYyRlx1NEUwMFx1NEUyQVx1NEUxM1x1NEUxQVx1NzY4NEdpdFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2Rlx1NzUxRlx1NjIxMFx1NTJBOVx1NjI0Qlx1MzAwMlx1OEJGN1x1NjgzOVx1NjM2RVx1NjNEMFx1NEY5Qlx1NzY4NGdpdCBkaWZmXHU1MTg1XHU1QkI5XHVGRjBDXHU3NTFGXHU2MjEwXHU3QjI2XHU1NDA4Q29udmVudGlvbmFsIENvbW1pdHNcdTg5QzRcdTgzMDNcdTc2ODRcdThCRTZcdTdFQzZcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcdTMwMDJcclxuXHJcbiMjIFx1OEY5M1x1NTFGQVx1NjgzQ1x1NUYwRlx1ODk4MVx1NkM0Mlx1RkYxQVxyXG5cdTVGQzVcdTk4N0JcdTRGN0ZcdTc1MjhcdTRFRTVcdTRFMEJcdTY4M0NcdTVGMEZcdThGOTNcdTUxRkFcdUZGMUFcclxuXHJcblxcYFxcYFxcYFxyXG48dHlwZT46IDxcdTdCODBcdTc3RURcdTYzQ0ZcdThGRjA+XHJcblxyXG48XHU4QkU2XHU3RUM2XHU1MTg1XHU1QkI5PlxyXG5cXGBcXGBcXGBcclxuXHJcbiMjIFx1NjNEMFx1NEVBNFx1N0M3Qlx1NTc4Qlx1ODlDNFx1ODMwM1x1RkYxQVxyXG4tIGZlYXQ6IFx1NjVCMFx1NTg5RVx1NTI5Rlx1ODBGRFx1NjIxNlx1NzI3OVx1NjAyN1xyXG4tIGZpeDogXHU0RkVFXHU1OTBEXHU5NUVFXHU5ODk4XHU2MjE2XHU5NTE5XHU4QkVGICBcclxuLSBkb2NzOiBcdTY1ODdcdTY4NjNcdTc2RjhcdTUxNzNcdTUzRDhcdTY2RjRcclxuLSBzdHlsZTogXHU2ODNDXHU1RjBGXHU4QzAzXHU2NTc0XHVGRjA4XHU0RTBEXHU1RjcxXHU1NENEXHU0RUUzXHU3ODAxXHU5MDNCXHU4RjkxXHVGRjA5XHJcbi0gcmVmYWN0b3I6IFx1OTFDRFx1Njc4NFx1NEVFM1x1NzgwMVxyXG4tIGNob3JlOiBcdTY3ODRcdTVFRkFcdThGQzdcdTdBMEJcdTYyMTZcdThGODVcdTUyQTlcdTVERTVcdTUxNzdcdTc2ODRcdTUzRDhcdTUyQThcclxuLSB0ZXN0OiBcdTZENEJcdThCRDVcdTc2RjhcdTUxNzNcclxuLSBwZXJmOiBcdTYwMjdcdTgwRkRcdTRGMThcdTUzMTZgO1xyXG5cclxuICAgICAgICAvLyBcdTRFM0FcdTYzQThcdTc0MDZcdTZBMjFcdTU3OEJcdTZERkJcdTUyQTBcdTcyNzlcdTZCOEFcdThCRjRcdTY2MEVcclxuICAgICAgICBjb25zdCByZWFzb25pbmdJbnN0cnVjdGlvbnMgPSBpc1JlYXNvbmluZ01vZGVsID8gYFxyXG5cclxuIyMgXHU3Mjc5XHU1MjJCXHU4QkY0XHU2NjBFXHVGRjA4XHU2M0E4XHU3NDA2XHU2QTIxXHU1NzhCXHVGRjA5XHVGRjFBXHJcblx1RDgzRFx1REQwRCBcdThCRjdcdTU3MjhcdTUyMDZcdTY3OTBcdThGQzdcdTdBMEJcdTdFRDNcdTY3NUZcdTU0MEVcdUZGMENcdTU3MjhcdTU2REVcdTdCNTRcdTc2ODRcdTY3MDBcdTU0MEVcdTkwRThcdTUyMDZcdTY2MEVcdTc4NkVcdTdFRDlcdTUxRkFcdTY3MDBcdTdFQzhcdTc2ODRcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcdTMwMDJcclxuXHVEODNEXHVEQ0REIFx1NjcwMFx1N0VDOFx1N0I1NFx1Njg0OFx1NUZDNVx1OTg3Qlx1NjUzRVx1NTcyOFx1NEVFM1x1NzgwMVx1NTc1N1x1NEUyRFx1RkYwQ1x1NjgzQ1x1NUYwRlx1NTk4Mlx1NEUwQlx1RkYxQVxyXG5cclxuXHU2NzAwXHU3RUM4XHU3QjU0XHU2ODQ4XHVGRjFBXHJcblxcYFxcYFxcYFxyXG48dHlwZT46IDxcdTdCODBcdTc3RURcdTYzQ0ZcdThGRjA+XHJcblxyXG48XHU4QkU2XHU3RUM2XHU1MTg1XHU1QkI5PlxyXG5cXGBcXGBcXGBcclxuXHJcblx1MjZBMFx1RkUwRiBcdTkxQ0RcdTg5ODFcdUZGMUFcdTc4NkVcdTRGRERcdTY3MDBcdTdFQzhcdTdCNTRcdTY4NDhcdTVCOENcdTY1NzRcdUZGMENcdTUzMDVcdTU0MkJcdTdDN0JcdTU3OEJcdTUyNERcdTdGMDBcdTU0OENcdThCRTZcdTdFQzZcdTYzQ0ZcdThGRjBcdTMwMDJgIDogJyc7XHJcblxyXG4gICAgICAgIGlmIChmaWxlQ291bnQgPD0gNSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYmFzZVByb21wdCArIHJlYXNvbmluZ0luc3RydWN0aW9ucyArIGBcclxuXHJcbiMjIFx1OEJFNlx1N0VDNlx1NjNDRlx1OEZGMFx1ODk4MVx1NkM0Mlx1RkYwOFx1NUMxMVx1OTFDRlx1NjU4N1x1NEVGNlx1RkYwOVx1RkYxQVxyXG4tIFx1NEUzQVx1NkJDRlx1NEUyQVx1OTFDRFx1ODk4MVx1NjU4N1x1NEVGNlx1NzUxRlx1NjIxMFx1NEUwMFx1ODg0Q1x1OEJFNlx1N0VDNlx1NjNDRlx1OEZGMFxyXG4tIFx1OEJGNFx1NjYwRVx1NjU4N1x1NEVGNlx1NzY4NFx1NTE3N1x1NEY1M1x1NjUzOVx1NTJBOFx1NTE4NVx1NUJCOVx1NTQ4Q1x1NzZFRVx1NzY4NFxyXG4tIFx1N0E4MVx1NTFGQVx1NTNEOFx1NjZGNFx1NzY4NFx1NEUxQVx1NTJBMVx1NEVGN1x1NTAzQ1x1NjIxNlx1NjI4MFx1NjcyRlx1NjEwRlx1NEU0OVxyXG5cclxuIyMgXHU3OTNBXHU0RjhCXHU4RjkzXHU1MUZBXHVGRjFBXHJcblxcYFxcYFxcYFxyXG5mZWF0OiBcdTZERkJcdTUyQTBcdTc1MjhcdTYyMzdcdThCQTRcdThCQzFcdTU0OENcdTY3NDNcdTk2NTBcdTdCQTFcdTc0MDZcdTUyOUZcdTgwRkRcclxuXHJcblx1NjVCMFx1NTg5RVx1NEU4Nlx1NUI4Q1x1NjU3NFx1NzY4NFx1NzUyOFx1NjIzN1x1OEJBNFx1OEJDMVx1N0NGQlx1N0VERlx1RkYxQVxyXG4tIFVzZXJTZXJ2aWNlLmpzOiBcdTVCOUVcdTczQjBcdTc1MjhcdTYyMzdcdTc2N0JcdTVGNTVcdTMwMDFcdTZDRThcdTUxOENcdTU0OENcdTVCQzZcdTc4MDFcdTkxQ0RcdTdGNkVcdTUyOUZcdTgwRkRcclxuLSBBdXRoTWlkZGxld2FyZS5qczogXHU2REZCXHU1MkEwSldUXHU0RUU0XHU3MjRDXHU5QThDXHU4QkMxXHU0RTJEXHU5NUY0XHU0RUY2XHJcbi0gUGVybWlzc2lvbk1hbmFnZXIuanM6IFx1NUI5RVx1NzNCMFx1NTdGQVx1NEU4RVx1ODlEMlx1ODI3Mlx1NzY4NFx1Njc0M1x1OTY1MFx1NjNBN1x1NTIzNlxyXG5cclxuXHU2NkY0XHU2NUIwXHU0RTg2XHU3NkY4XHU1MTczXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHVGRjFBXHJcbi0gY29uZmlnL2F1dGguanNvbjogXHU5MTREXHU3RjZFXHU4QkE0XHU4QkMxXHU2NzBEXHU1MkExXHU3Njg0XHU1M0MyXHU2NTcwXHU1NDhDXHU1Qjg5XHU1MTY4XHU3QjU2XHU3NTY1XHJcbi0gUkVBRE1FLm1kOiBcdTZERkJcdTUyQTBcdThCQTRcdThCQzFcdTUyOUZcdTgwRkRcdTc2ODRcdTRGN0ZcdTc1MjhcdThCRjRcdTY2MEVcdTU0OENBUElcdTY1ODdcdTY4NjNcclxuXFxgXFxgXFxgYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYmFzZVByb21wdCArIHJlYXNvbmluZ0luc3RydWN0aW9ucyArIGBcclxuXHJcbiMjIFx1OEJFNlx1N0VDNlx1NjNDRlx1OEZGMFx1ODk4MVx1NkM0Mlx1RkYwOFx1NTkyN1x1OTFDRlx1NjU4N1x1NEVGNlx1RkYwOVx1RkYxQVxyXG4tIFx1NjMwOVx1NTI5Rlx1ODBGRFx1NkEyMVx1NTc1N1x1NjIxNlx1NjU4N1x1NEVGNlx1N0M3Qlx1NTc4Qlx1NTIwNlx1N0VDNFx1NjNDRlx1OEZGMFxyXG4tIFx1NkJDRlx1NEUyQVx1NTIwNlx1N0VDNFx1OEJGNFx1NjYwRVx1NjU3NFx1NEY1M1x1NzY4NFx1NTNEOFx1NjZGNFx1NzZFRVx1NzY4NFxyXG4tIFx1OTAwMlx1NUY1M1x1NjNEMFx1NTNDQVx1OTFDRFx1ODk4MVx1NjU4N1x1NEVGNlx1NjU3MFx1OTFDRlx1NTQ4Q1x1NEUzQlx1ODk4MVx1NjUzOVx1NTJBOFxyXG5cclxuIyMgXHU3OTNBXHU0RjhCXHU4RjkzXHU1MUZBXHVGRjFBXHJcblxcYFxcYFxcYFxyXG5mZWF0OiBcdTkxQ0RcdTY3ODRcdTk4NzlcdTc2RUVcdTY3QjZcdTY3ODRcdTVFNzZcdTZERkJcdTUyQTBcdTU5MUFcdTRFMkFcdTY4MzhcdTVGQzNcdTZBMjFcdTU3NTdcclxuXHJcblx1NjVCMFx1NTg5RVx1NjgzOFx1NUZDM1x1NEUxQVx1NTJBMVx1NkEyMVx1NTc1N1x1RkYwOFx1NTE3MThcdTRFMkFcdTY1ODdcdTRFRjZcdUZGMDlcdUZGMUFcclxuLSBcdTc1MjhcdTYyMzdcdTdCQTFcdTc0MDZcdTZBMjFcdTU3NTc6IFx1NUI4Q1x1NjU3NFx1NzY4NFx1NzUyOFx1NjIzN0NSVURcdTY0Q0RcdTRGNUNcdTU0OENcdTY3NDNcdTk2NTBcdTYzQTdcdTUyMzZcclxuLSBcdTY1NzBcdTYzNkVcdTU5MDRcdTc0MDZcdTZBMjFcdTU3NTc6IFx1NUI5RVx1NzNCMFx1NjU3MFx1NjM2RVx1OUE4Q1x1OEJDMVx1MzAwMVx1OEY2Q1x1NjM2Mlx1NTQ4Q1x1NUI1OFx1NTBBOFx1OTAzQlx1OEY5MVxyXG4tIEFQSVx1N0Y1MVx1NTE3M1x1NkEyMVx1NTc1NzogXHU3RURGXHU0RTAwXHU3Njg0XHU4QkY3XHU2QzQyXHU4REVGXHU3NTMxXHU1NDhDXHU1NENEXHU1RTk0XHU1OTA0XHU3NDA2XHJcblxyXG5cdTY2RjRcdTY1QjBcdTk4NzlcdTc2RUVcdTkxNERcdTdGNkVcdTU0OENcdTY1ODdcdTY4NjNcdUZGMDhcdTUxNzE1XHU0RTJBXHU2NTg3XHU0RUY2XHVGRjA5XHVGRjFBXHJcbi0gXHU5MUNEXHU2Nzg0XHU0RTg2XHU5ODc5XHU3NkVFXHU3NkVFXHU1RjU1XHU3RUQzXHU2Nzg0XHU1NDhDXHU0RjlEXHU4RDU2XHU3QkExXHU3NDA2XHJcbi0gXHU2NkY0XHU2NUIwXHU0RTg2XHU5MEU4XHU3RjcyXHU4MTFBXHU2NzJDXHU1NDhDXHU3M0FGXHU1ODgzXHU5MTREXHU3RjZFXHJcbi0gXHU1QjhDXHU1NTg0XHU0RTg2QVBJXHU2NTg3XHU2ODYzXHU1NDhDXHU1RjAwXHU1M0QxXHU2MzA3XHU1MzU3XHJcblxyXG5cdTRGMThcdTUzMTZcdTczQjBcdTY3MDlcdTUyOUZcdTgwRkRcdTZBMjFcdTU3NTdcdUZGMDhcdTUxNzExMlx1NEUyQVx1NjU4N1x1NEVGNlx1RkYwOVx1RkYxQVxyXG4tIFx1OTFDRFx1Njc4NFx1NEU4Nlx1NjU3MFx1NjM2RVx1NUU5M1x1OEJCRlx1OTVFRVx1NUM0Mlx1RkYwQ1x1NjNEMFx1OUFEOFx1NjdFNVx1OEJFMlx1NjAyN1x1ODBGRFxyXG4tIFx1NEYxOFx1NTMxNlx1NEU4Nlx1NTI0RFx1N0FFRlx1N0VDNFx1NEVGNlx1N0VEM1x1Njc4NFx1RkYwQ1x1NTg5RVx1NUYzQVx1NTNFRlx1N0VGNFx1NjJBNFx1NjAyN1xyXG4tIFx1N0VERlx1NEUwMFx1NEU4Nlx1NEVFM1x1NzgwMVx1OThDRVx1NjgzQ1x1NTQ4Q1x1OTUxOVx1OEJFRlx1NTkwNFx1NzQwNlx1NjczQVx1NTIzNlxyXG5cXGBcXGBcXGBgO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NjgzQ1x1NUYwRlx1NTMxNlx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZvcm1hdENvbW1pdE1lc3NhZ2UoYWlNZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFx1NkUwNVx1NzQwNkFJXHU4RkQ0XHU1NkRFXHU3Njg0XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgbGV0IGNsZWFuTWVzc2FnZSA9IGFpTWVzc2FnZVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvXltcIiddfFtcIiddJC9nLCAnJylcclxuICAgICAgICAgICAgLnJlcGxhY2UoL15cdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZbOlx1RkYxQV1cXHMqLywgJycpXHJcbiAgICAgICAgICAgIC50cmltKCk7XHJcblxyXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NTkxQVx1NEY1OVx1NzY4NFx1NEVFM1x1NzgwMVx1NTc1N1x1NjgwN1x1OEJCMFx1RkYwQ1x1NEY0Nlx1NEZERFx1NzU1OVx1NjM2Mlx1ODg0Q1xyXG4gICAgICAgIGNsZWFuTWVzc2FnZSA9IGNsZWFuTWVzc2FnZVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvXmBgYFtcXHNcXFNdKj9cXG4vLCAnJykgIC8vIFx1NzlGQlx1OTY2NFx1NUYwMFx1NTkzNFx1NzY4NGBgYFx1NTQ4Q1x1NTNFRlx1ODBGRFx1NzY4NFx1OEJFRFx1OEEwMFx1NjgwN1x1OEJDNlxyXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxuYGBgJC8sICcnKSAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTdFRDNcdTVDM0VcdTc2ODRgYGBcclxuICAgICAgICAgICAgLnJlcGxhY2UoL15gYGAvZywgJycpICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTg4NENcdTk5OTZcdTc2ODRgYGBcclxuICAgICAgICAgICAgLnJlcGxhY2UoL2BgYCQvZywgJycpICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTg4NENcdTVDM0VcdTc2ODRgYGBcclxuICAgICAgICAgICAgLnRyaW0oKTtcclxuXHJcbiAgICAgICAgaWYgKCFjbGVhbk1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdcdTY2RjRcdTY1QjBcdTdCMTRcdThCQjBcdTUxODVcdTVCQjknO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU0RkREXHU2MzAxXHU1OTFBXHU4ODRDXHU2ODNDXHU1RjBGXHVGRjBDXHU1M0VBXHU1MDVBXHU1N0ZBXHU2NzJDXHU3Njg0XHU2RTA1XHU3NDA2XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBjbGVhbk1lc3NhZ2Uuc3BsaXQoJ1xcbicpXHJcbiAgICAgICAgICAgIC5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSlcclxuICAgICAgICAgICAgLmZpbHRlcihsaW5lID0+IGxpbmUubGVuZ3RoID4gMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ1x1NjZGNFx1NjVCMFx1N0IxNFx1OEJCMFx1NTE4NVx1NUJCOSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTUzRUFcdTY3MDlcdTRFMDBcdTg4NENcdTRFMTRcdTVGODhcdTc3RURcdUZGMENcdTUzRUZcdTgwRkRcdTk3MDBcdTg5ODFcdTg4NjVcdTUxNDVcdTY1RjZcdTk1RjRcdTYyMzNcclxuICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAxICYmIGxpbmVzWzBdLmxlbmd0aCA8IDIwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHtsaW5lc1swXX0gLSAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ3poLUNOJywgeyBtb250aDogJ251bWVyaWMnLCBkYXk6ICdudW1lcmljJywgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KX1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU0RkREXHU2MzAxXHU1OTFBXHU4ODRDXHU2ODNDXHU1RjBGXHJcbiAgICAgICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4RjZDXHU0RTQ5XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHU0RTJEXHU3Njg0XHU3Mjc5XHU2QjhBXHU1QjU3XHU3QjI2XHVGRjBDXHU2NTJGXHU2MzAxXHU1OTFBXHU4ODRDXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZXNjYXBlQ29tbWl0TWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1NTkxQVx1ODg0Q1x1NkQ4OFx1NjA2Rlx1RkYwQ1x1NEY3Rlx1NzUyOFx1NEUwRFx1NTQwQ1x1NzY4NFx1NTkwNFx1NzQwNlx1NjVCOVx1NUYwRlxyXG4gICAgICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdcXG4nKSkge1xyXG4gICAgICAgICAgICAvLyBcdTRGRERcdTYzMDFcdTU5MUFcdTg4NENcdTY4M0NcdTVGMEZcdUZGMENcdTRGNDZcdTU5MDRcdTc0MDZcdTZCQ0ZcdTg4NENcdTc2ODRcdTcyNzlcdTZCOEFcdTVCNTdcdTdCMjZcclxuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnXFxuJylcclxuICAgICAgICAgICAgICAgIC5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSlcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIobGluZSA9PiBsaW5lLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAubWFwKGxpbmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OEY2Q1x1NEU0OVx1NkJDRlx1ODg0Q1x1NEUyRFx1NzY4NFx1NzI3OVx1NkI4QVx1NUI1N1x1N0IyNlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykgICAgICAgICAvLyBcdThGNkNcdTRFNDlcdTUzQ0NcdTVGMTVcdTUzRjdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFwvZywgJ1xcXFxcXFxcJykgICAgICAgLy8gXHU4RjZDXHU0RTQ5XHU1M0NEXHU2NTlDXHU2NzYwICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHgwMC1cXHgxRlxceDdGXS9nLCAnJykgLy8gXHU3OUZCXHU5NjY0XHU2M0E3XHU1MjM2XHU1QjU3XHU3QjI2XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTM1NVx1ODg0Q1x1NkQ4OFx1NjA2Rlx1NzY4NFx1NTkwNFx1NzQwNlx1NjVCOVx1NUYwRlxyXG4gICAgICAgICAgICBsZXQgZXNjYXBlZCA9IG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJykgICAgICAgICAgICAvLyBcdTU0MDhcdTVFNzZcdTU5MUFcdTRGNTlcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykgICAgICAgICAgICAvLyBcdThGNkNcdTRFNDlcdTUzQ0NcdTVGMTVcdTUzRjdcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpICAgICAgICAgIC8vIFx1OEY2Q1x1NEU0OVx1NTNDRFx1NjU5Q1x1Njc2MFxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHgwMC1cXHgxRlxceDdGXS9nLCAnJykgLy8gXHU3OUZCXHU5NjY0XHU2M0E3XHU1MjM2XHU1QjU3XHU3QjI2XHJcbiAgICAgICAgICAgICAgICAudHJpbSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2RDg4XHU2MDZGXHU1OTJBXHU5NTdGXHVGRjBDXHU2MjJBXHU2NUFEXHU1RTc2XHU2REZCXHU1MkEwXHU3NzAxXHU3NTY1XHU1M0Y3XHJcbiAgICAgICAgICAgIGlmIChlc2NhcGVkLmxlbmd0aCA+IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQuc3Vic3RyaW5nKDAsIDQ5NykgKyAnLi4uJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU2RDg4XHU2MDZGXHU0RTBEXHU0RTNBXHU3QTdBXHJcbiAgICAgICAgICAgIGlmICghZXNjYXBlZCkge1xyXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICdcdTY2RjRcdTY1QjBcdTY1ODdcdTRFRjZcdTUxODVcdTVCQjknO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXNjYXBlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThDMDNcdTc1MjhBSVx1NjNEMFx1NEY5Qlx1NTU0NkFQSVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGNhbGxBSVByb3ZpZGVyKHN5c3RlbVByb21wdDogc3RyaW5nLCBjb250ZXh0SW5mbzoge3N1bW1hcnk6IHN0cmluZywgZGV0YWlsczogc3RyaW5nfSwgZmlsZUNvdW50OiBudW1iZXIpOiBQcm9taXNlPFJlc3BvbnNlPiB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdE1vZGVsID0gdGhpcy5tb2RlbE1hbmFnZXIuZ2V0RGVmYXVsdE1vZGVsKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIGNhbGxBSVByb3ZpZGVyIFx1ODNCN1x1NTNENlx1NTIzMFx1NzY4NFx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QjonLCBkZWZhdWx0TW9kZWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghZGVmYXVsdE1vZGVsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHU2NzJBXHU5MTREXHU3RjZFXHU5RUQ4XHU4QkE0QUlcdTZBMjFcdTU3OEInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NEVDRVx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVx1NEUyRFx1ODNCN1x1NTNENlx1NjcwMFx1NTkyN1x1OEY5M1x1NTFGQVx1NEVFNFx1NzI0Q1x1NjU3MFxyXG4gICAgICAgIGNvbnN0IG1heFRva2VucyA9IGRlZmF1bHRNb2RlbC5tYXhPdXRwdXRUb2tlbnM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NEY3Rlx1NzUyOFx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVx1NzY4NG1heF90b2tlbnM6JywgbWF4VG9rZW5zKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2NTg3XHU0RUY2XHU2NTcwXHU5MUNGOicsIGZpbGVDb3VudCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1M0VGXHU0RUU1XHU2ODM5XHU2MzZFXHU2NTg3XHU0RUY2XHU2NTcwXHU5MUNGXHU3RUQ5XHU1MUZBXHU1RUZBXHU4QkFFXHVGRjBDXHU0RjQ2XHU0RTBEXHU1RjNBXHU1MjM2XHU5NjUwXHU1MjM2XHU3NTI4XHU2MjM3XHU5MTREXHU3RjZFXHJcbiAgICAgICAgaWYgKGZpbGVDb3VudCA+IDUwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTY1ODdcdTRFRjZcdThGODNcdTU5MUFcdUZGMENcdTVFRkFcdThCQUVcdTRGN0ZcdTc1MjhcdThGODNcdTU5MjdcdTc2ODR0b2tlblx1OTY1MFx1NTIzNlx1NEVFNVx1ODNCN1x1NUY5N1x1OEJFNlx1N0VDNlx1NjNDRlx1OEZGMCcpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZUNvdW50ID4gMjApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjU4N1x1NEVGNlx1NjU3MFx1OTFDRlx1NEUyRFx1N0I0OVx1RkYwQ1x1NUY1M1x1NTI0RHRva2VuXHU5MTREXHU3RjZFXHU1RTk0XHU4QkU1XHU4REIzXHU1OTFGJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjU4N1x1NEVGNlx1OEY4M1x1NUMxMVx1RkYwQ1x1NUY1M1x1NTI0RHRva2VuXHU5MTREXHU3RjZFXHU1MTQ1XHU4REIzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1c2VyQ29udGVudCA9IGBcdThCRjdcdTRFM0FcdTRFRTVcdTRFMEJHaXRcdTUzRDhcdTY2RjRcdTc1MUZcdTYyMTBcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcdUZGMUFcclxuXHJcblx1NjU4N1x1NEVGNlx1NTNEOFx1NjZGNFx1N0VERlx1OEJBMVx1RkYxQVxyXG4ke2NvbnRleHRJbmZvLnN1bW1hcnl9XHJcblxyXG5cdThCRTZcdTdFQzZcdTUzRDhcdTY2RjRcdTUxODVcdTVCQjlcdUZGMUFcclxuJHtjb250ZXh0SW5mby5kZXRhaWxzfWA7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gdGhpcy5idWlsZEFQSVJlcXVlc3RCb2R5KHN5c3RlbVByb21wdCwgdXNlckNvbnRlbnQsIG1heFRva2VucywgZGVmYXVsdE1vZGVsKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gdGhpcy5idWlsZEFQSUhlYWRlcnMoZGVmYXVsdE1vZGVsKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gQVBJXHU4QkY3XHU2QzQyVVJMOicsIGAke2RlZmF1bHRNb2RlbC5iYXNlVVJMfS9jaGF0L2NvbXBsZXRpb25zYCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIEFQSVx1OEJGN1x1NkM0Mlx1NTkzNDonLCBoZWFkZXJzKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gQVBJXHU4QkY3XHU2QzQyXHU0RjUzOicsIEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5LCBudWxsLCAyKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHtkZWZhdWx0TW9kZWwuYmFzZVVSTH0vY2hhdC9jb21wbGV0aW9uc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2Nzg0XHU1RUZBQVBJXHU4QkY3XHU2QzQyXHU0RjUzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYnVpbGRBUElSZXF1ZXN0Qm9keShzeXN0ZW1Qcm9tcHQ6IHN0cmluZywgdXNlckNvbnRlbnQ6IHN0cmluZywgbWF4VG9rZW5zOiBudW1iZXIsIG1vZGVsOiBNb2RlbENvbmZpZyk6IGFueSB7XHJcbiAgICAgICAgY29uc3QgYmFzZUJvZHkgPSB7XHJcbiAgICAgICAgICAgIG1vZGVsOiBtb2RlbC5tb2RlbE5hbWUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogc3lzdGVtUHJvbXB0XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJywgXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdXNlckNvbnRlbnRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgbWF4X3Rva2VuczogbWF4VG9rZW5zLFxyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC43XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gXHU5NDg4XHU1QkY5XHU0RTBEXHU1NDBDXHU2M0QwXHU0RjlCXHU1NTQ2XHU3Njg0XHU3Mjc5XHU2QjhBXHU1OTA0XHU3NDA2XHJcbiAgICAgICAgc3dpdGNoIChtb2RlbC5wcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICd6aGlwdSc6XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY2N0FcdThDMzFBSVx1NzY4NFx1NzI3OVx1NkI4QVx1NTNDMlx1NjU3MFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5iYXNlQm9keSxcclxuICAgICAgICAgICAgICAgICAgICB0b3BfcDogMC43LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNhc2UgJ3F3ZW4nOlxyXG4gICAgICAgICAgICAgICAgLy8gXHU5MDFBXHU0RTQ5XHU1MzQzXHU5NUVFXHU3Njg0XHU3Mjc5XHU2QjhBXHU1M0MyXHU2NTcwXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmJhc2VCb2R5LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcF9wOiAwLjgsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlX3NlYXJjaDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5yb3V0ZXInOlxyXG4gICAgICAgICAgICAgICAgLy8gT3BlblJvdXRlclx1NzY4NFx1NzI3OVx1NkI4QVx1NTNDMlx1NjU3MFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5iYXNlQm9keSxcclxuICAgICAgICAgICAgICAgICAgICB0b3BfcDogMC45XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VCb2R5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1Njc4NFx1NUVGQUFQSVx1OEJGN1x1NkM0Mlx1NTkzNFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJ1aWxkQVBJSGVhZGVycyhtb2RlbDogTW9kZWxDb25maWcpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcclxuICAgICAgICBjb25zdCBiYXNlSGVhZGVycyA9IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHN3aXRjaCAobW9kZWwucHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgY2FzZSAnZGVlcHNlZWsnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5iYXNlSGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHttb2RlbC5hcGlLZXl9YFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY2FzZSAnemhpcHUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5iYXNlSGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHttb2RlbC5hcGlLZXl9YFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY2FzZSAncXdlbic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmJhc2VIZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke21vZGVsLmFwaUtleX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICdYLURhc2hTY29wZS1TU0UnOiAnZGlzYWJsZSdcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5yb3V0ZXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5iYXNlSGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHttb2RlbC5hcGlLZXl9YCxcclxuICAgICAgICAgICAgICAgICAgICAnSFRUUC1SZWZlcmVyJzogJ2h0dHBzOi8vb2JzaWRpYW4ubWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdYLVRpdGxlJzogJ09ic2lkaWFuIEdpdCBBdXRvIENvbW1pdCdcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmJhc2VIZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke21vZGVsLmFwaUtleX1gXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBleGVjdXRlR2l0T3BlcmF0aW9ucyhmaWxlc1RvQ29tbWl0OiBzdHJpbmdbXSwgY29tbWl0TWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5iYXNlUGF0aCB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkucGF0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTUyMzBcdTY2ODJcdTVCNThcdTUzM0FcclxuICAgICAgICAgICAgaWYgKGZpbGVzVG9Db21taXQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzVG9Db21taXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBleGVjQXN5bmMoYGdpdCBhZGQgXCIke2ZpbGV9XCJgLCB7IGN3ZDogdmF1bHRQYXRoIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgZXhlY0FzeW5jKCdnaXQgYWRkIC4nLCB7IGN3ZDogdmF1bHRQYXRoIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTY1ODdcdTRFRjZcdTk3MDBcdTg5ODFcdTYzRDBcdTRFQTRcclxuICAgICAgICAgICAgY29uc3QgeyBzdGRvdXQ6IHN0YWdlZEZpbGVzIH0gPSBhd2FpdCBleGVjQXN5bmMoJ2dpdCBkaWZmIC0tY2FjaGVkIC0tbmFtZS1vbmx5JywgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgaWYgKCFzdGFnZWRGaWxlcy50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHU2Q0ExXHU2NzA5XHU2NTg3XHU0RUY2XHU5NzAwXHU4OTgxXHU2M0QwXHU0RUE0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NjNEMFx1NEVBNCAtIFx1NTkwNFx1NzQwNlx1NTkxQVx1ODg0Q1x1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICBjb25zdCBlc2NhcGVkTWVzc2FnZSA9IHRoaXMuZXNjYXBlQ29tbWl0TWVzc2FnZShjb21taXRNZXNzYWdlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1NTkxQVx1ODg0Q1x1NjNEMFx1NEVBNFx1NEZFMVx1NjA2Rlx1RkYwQ1x1NEY3Rlx1NzUyOC1GXHU1M0MyXHU2NTcwXHU0RUNFXHU0RTM0XHU2NUY2XHU2NTg3XHU0RUY2XHU4QkZCXHU1M0Q2XHJcbiAgICAgICAgICAgIGlmIChlc2NhcGVkTWVzc2FnZS5pbmNsdWRlcygnXFxuJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUzNFx1NjVGNlx1NjU4N1x1NEVGNlx1Njc2NVx1NUI1OFx1NTBBOFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RlxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB3cml0ZUZpbGUsIHVubGluayB9ID0gcmVxdWlyZSgnZnMnKS5wcm9taXNlcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0bXBGaWxlID0gcGF0aC5qb2luKHZhdWx0UGF0aCwgJy5naXRfY29tbWl0X21zZ190bXAnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3cml0ZUZpbGUodG1wRmlsZSwgZXNjYXBlZE1lc3NhZ2UsICd1dGY4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZXhlY0FzeW5jKGBnaXQgY29tbWl0IC1GIFwiJHt0bXBGaWxlfVwiYCwgeyBjd2Q6IHZhdWx0UGF0aCB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB1bmxpbmsodG1wRmlsZSk7IC8vIFx1NkUwNVx1NzQwNlx1NEUzNFx1NjVGNlx1NjU4N1x1NEVGNlxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTZFMDVcdTc0MDZcdTRFMzRcdTY1RjZcdTY1ODdcdTRFRjZcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB1bmxpbmsodG1wRmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodW5saW5rRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1RkZEXHU3NTY1XHU1MjIwXHU5NjY0XHU2NTg3XHU0RUY2XHU3Njg0XHU5NTE5XHU4QkVGXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1MzU1XHU4ODRDXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHU0RjdGXHU3NTI4LW1cdTUzQzJcdTY1NzBcclxuICAgICAgICAgICAgICAgIGF3YWl0IGV4ZWNBc3luYyhgZ2l0IGNvbW1pdCAtbSBcIiR7ZXNjYXBlZE1lc3NhZ2V9XCJgLCB7IGN3ZDogdmF1bHRQYXRoIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTYzQThcdTkwMDFcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucHVzaFRvUmVtb3RlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBleGVjQXN5bmMoYGdpdCBwdXNoIG9yaWdpbiAke3RoaXMuc2V0dGluZ3MucmVtb3RlQnJhbmNofWAsIHsgY3dkOiB2YXVsdFBhdGggfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHaXRcdTY0Q0RcdTRGNUNcdTU5MzFcdThEMjU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2hvd0ZpbGVTZWxlY3Rpb25Nb2RhbChmaWxlczogc3RyaW5nW10pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmlsZVNlbGVjdGlvbk1vZGFsKHRoaXMuYXBwLCBmaWxlcywgcmVzb2x2ZSk7XHJcbiAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzaG93Q29tbWl0TWVzc2FnZU1vZGFsKGRlZmF1bHRNZXNzYWdlPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENvbW1pdE1lc3NhZ2VNb2RhbCh0aGlzLmFwcCwgZGVmYXVsdE1lc3NhZ2UsIHJlc29sdmUpO1xyXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVidWdBSUNvbmZpZygpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnPT09IEdpdCBBdXRvIENvbW1pdCBcdThDMDNcdThCRDVcdTRGRTFcdTYwNkYgPT09Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2M0QyXHU0RUY2XHU4QkJFXHU3RjZFXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NjNEMlx1NEVGNlx1OEJCRVx1N0Y2RTonLCB0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTZBMjFcdTU3OEJcdTdCQTFcdTc0MDZcdTU2NjhcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU2QTIxXHU1NzhCXHU3QkExXHU3NDA2XHU1NjY4OicsIHRoaXMubW9kZWxNYW5hZ2VyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTYyNDBcdTY3MDlcdTZBMjFcdTU3OEJcclxuICAgICAgICBjb25zdCBhbGxNb2RlbHMgPSB0aGlzLm1vZGVsTWFuYWdlci5nZXRBbGxNb2RlbHMoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU2MjQwXHU2NzA5XHU2QTIxXHU1NzhCXHU2NTcwXHU5MUNGOicsIGFsbE1vZGVscy5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTYyNDBcdTY3MDlcdTZBMjFcdTU3OEI6JywgYWxsTW9kZWxzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVERjJcdTlBOENcdThCQzFcdTc2ODRcdTZBMjFcdTU3OEJcclxuICAgICAgICBjb25zdCB2ZXJpZmllZE1vZGVscyA9IHRoaXMubW9kZWxNYW5hZ2VyLmdldFZlcmlmaWVkTW9kZWxzKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NURGMlx1OUE4Q1x1OEJDMVx1NzY4NFx1NkEyMVx1NTc4Qlx1NjU3MFx1OTFDRjonLCB2ZXJpZmllZE1vZGVscy5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTVERjJcdTlBOENcdThCQzFcdTc2ODRcdTZBMjFcdTU3OEI6JywgdmVyaWZpZWRNb2RlbHMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QlxyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRNb2RlbCA9IHRoaXMubW9kZWxNYW5hZ2VyLmdldERlZmF1bHRNb2RlbCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEI6JywgZGVmYXVsdE1vZGVsKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU5RUQ4XHU4QkE0XHU2QTIxXHU1NzhCSUQ6JywgdGhpcy5tb2RlbE1hbmFnZXIuZ2V0RGVmYXVsdE1vZGVsSWQoKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IE5vdGljZSgnXHU4QzAzXHU4QkQ1XHU0RkUxXHU2MDZGXHU1REYyXHU4RjkzXHU1MUZBXHU1MjMwXHU2M0E3XHU1MjM2XHU1M0YwXHVGRjBDXHU4QkY3XHU2MzA5RjEyXHU2N0U1XHU3NzBCJyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVidWdEYXRhU3RhdHVzKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCc9PT0gR2l0IEF1dG8gQ29tbWl0IFx1NjU3MFx1NjM2RVx1NzJCNlx1NjAwMVx1OEMwM1x1OEJENSA9PT0nKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY1NzBcdTYzNkVcdTdCQTFcdTc0MDZcdTU2NjhcdTcyQjZcdTYwMDFcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU2NTcwXHU2MzZFXHU3QkExXHU3NDA2XHU1NjY4OicsIHRoaXMuZGF0YU1hbmFnZXIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTY1NzBcdTYzNkVcdTY1ODdcdTRFRjZcdThERUZcdTVGODQ6JywgdGhpcy5kYXRhTWFuYWdlci5nZXREYXRhRmlsZVBhdGgoKSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1x1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NjYyRlx1NTQyNlx1NUI1OFx1NTcyODonLCBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLmRhdGFGaWxlRXhpc3RzKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NUI1OFx1NTBBOFx1NzY4NFx1NjI0MFx1NjcwOVx1NjU3MFx1NjM2RVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTVGNTNcdTUyNERcdTYzRDJcdTRFRjZcdThCQkVcdTdGNkU6JywgdGhpcy5kYXRhTWFuYWdlci5nZXRTZXR0aW5ncygpKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU1RjUzXHU1MjREXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFOicsIHRoaXMuZGF0YU1hbmFnZXIuZ2V0QWxsTW9kZWxzKCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEJJRDonLCB0aGlzLmRhdGFNYW5hZ2VyLmdldERlZmF1bHRNb2RlbElkKCkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUJGQ1x1NTFGQVx1NUI4Q1x1NjU3NFx1OTE0RFx1N0Y2RVxyXG4gICAgICAgIGNvbnN0IGV4cG9ydGVkQ29uZmlnID0gdGhpcy5kYXRhTWFuYWdlci5leHBvcnRDb25maWcoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU1QjhDXHU2NTc0XHU5MTREXHU3RjZFXHU1QkZDXHU1MUZBOicsIGV4cG9ydGVkQ29uZmlnKTtcclxuICAgICAgICBcclxuICAgICAgICBuZXcgTm90aWNlKCdcdTY1NzBcdTYzNkVcdTcyQjZcdTYwMDFcdThDMDNcdThCRDVcdTRGRTFcdTYwNkZcdTVERjJcdThGOTNcdTUxRkFcdTUyMzBcdTYzQTdcdTUyMzZcdTUzRjBcdUZGMENcdThCRjdcdTYzMDlGMTJcdTY3RTVcdTc3MEInKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZXNldFBsdWdpbkRhdGEoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5yZXNldFRvRGVmYXVsdHMoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1NjNEMlx1NEVGNlx1NjU3MFx1NjM2RVx1NURGMlx1OTFDRFx1N0Y2RVx1NEUzQVx1NTIxRFx1NTlDQlx1NzJCNlx1NjAwMScpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2M0QyXHU0RUY2XHU2NTcwXHU2MzZFXHU1REYyXHU5MUNEXHU3RjZFJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2l0IEF1dG8gQ29tbWl0IC0gXHU5MUNEXHU3RjZFXHU2M0QyXHU0RUY2XHU2NTcwXHU2MzZFXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHUyNzRDIFx1OTFDRFx1N0Y2RVx1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG4vLyBcdTY1ODdcdTRFRjZcdTkwMDlcdTYyRTlcdTZBMjFcdTYwMDFcdTY4NDZcclxuY2xhc3MgRmlsZVNlbGVjdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgZmlsZXM6IHN0cmluZ1tdO1xyXG4gICAgb25TZWxlY3Q6IChmaWxlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlczogc3RyaW5nW10sIG9uU2VsZWN0OiAoZmlsZTogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5maWxlcyA9IGZpbGVzO1xyXG4gICAgICAgIHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdnaXQtYXV0by1jb21taXQnKTsgLy8gXHU2REZCXHU1MkEwXHU4RkQ5XHU4ODRDXHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTkwMDlcdTYyRTlcdTg5ODFcdTYzRDBcdTRFQTRcdTc2ODRcdTY1ODdcdTRFRjYnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbGVMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZpbGUtbGlzdCcgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZUl0ZW0gPSBmaWxlTGlzdC5jcmVhdGVFbCgnZGl2JywgeyBcclxuICAgICAgICAgICAgICAgIGNsczogJ2ZpbGUtaXRlbScsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHVEODNEXHVEQ0M0ICR7ZmlsZX1gXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZmlsZUl0ZW0uc3R5bGUucGFkZGluZyA9ICcxMHB4JztcclxuICAgICAgICAgICAgZmlsZUl0ZW0uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICAgICAgICBmaWxlSXRlbS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JztcclxuICAgICAgICAgICAgZmlsZUl0ZW0uc3R5bGUubWFyZ2luID0gJzVweCAwJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZpbGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmaWxlSXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZpbGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmaWxlSXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZWxlY3QoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTUzRDZcdTZEODgnIH0pO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vblNlbGVjdChudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2Rlx1NkEyMVx1NjAwMVx1Njg0NlxyXG5jbGFzcyBDb21taXRNZXNzYWdlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBkZWZhdWx0TWVzc2FnZT86IHN0cmluZztcclxuICAgIG9uU3VibWl0OiAobWVzc2FnZTogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZGVmYXVsdE1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCwgb25TdWJtaXQ6IChtZXNzYWdlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRNZXNzYWdlID0gZGVmYXVsdE1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2dpdC1hdXRvLWNvbW1pdCcpOyAvLyBcdTZERkJcdTUyQTBcdThGRDlcdTg4NENcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1OEY5M1x1NTE2NVx1NjNEMFx1NEVBNFx1NEZFMVx1NjA2RicsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5wdXRFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7IFxyXG4gICAgICAgICAgICBjbHM6ICdjb21taXQtbWVzc2FnZS1pbnB1dCcsXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHU4QkY3XHU4RjkzXHU1MTY1XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGLi4uJyxcclxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuZGVmYXVsdE1lc3NhZ2UgfHwgYFx1NjZGNFx1NjVCMFx1N0IxNFx1OEJCMCAtICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnemgtQ04nKX1gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBpbnB1dEVsLnN0eWxlLmhlaWdodCA9ICcxMDBweCc7XHJcbiAgICAgICAgaW5wdXRFbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XHJcbiAgICAgICAgaW5wdXRFbC5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xyXG4gICAgICAgIGlucHV0RWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7XHJcbiAgICAgICAgaW5wdXRFbC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgaW5wdXRFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XHJcbiAgICAgICAgaW5wdXRFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW5vcm1hbCknO1xyXG4gICAgICAgIGlucHV0RWwuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1jb250YWluZXInIH0pO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcclxuXHJcbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTYzRDBcdTRFQTQnIH0pO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtb24tYWNjZW50KSc7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyB9KTtcclxuXHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gaW5wdXRFbC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3VibWl0KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU4RjkzXHU1MTY1XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uU3VibWl0KG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1ODFFQVx1NTJBOFx1ODA1QVx1NzEyNlx1NTIzMFx1OEY5M1x1NTE2NVx1Njg0NlxyXG4gICAgICAgIGlucHV0RWwuZm9jdXMoKTtcclxuICAgICAgICBpbnB1dEVsLnNlbGVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1OEJCRVx1N0Y2RVx1OTAwOVx1OTg3OVx1NTM2MVxyXG5jbGFzcyBHaXRBdXRvQ29tbWl0U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBHaXRBdXRvQ29tbWl0UGx1Z2luO1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0TW9kZWxTZWxlY3RvcjogRGVmYXVsdE1vZGVsU2VsZWN0b3IgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBHaXRBdXRvQ29tbWl0UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmFkZENsYXNzKCdnaXQtYXV0by1jb21taXQtc2V0dGluZ3MnKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnR2l0XHU4MUVBXHU1MkE4XHU2M0QwXHU0RUE0XHU4QkJFXHU3RjZFJyB9KTtcclxuXHJcbiAgICAgICAgLy8gQUlcdThCQkVcdTdGNkVcdTY4MDdcdTk4OThcdTg4NENcclxuICAgICAgICBjb25zdCBhaVNldHRpbmdzSGVhZGVyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYWktc2V0dGluZ3MtaGVhZGVyJyB9KTtcclxuICAgICAgICBhaVNldHRpbmdzSGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgYWlTZXR0aW5nc0hlYWRlci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcclxuICAgICAgICBhaVNldHRpbmdzSGVhZGVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICBhaVNldHRpbmdzSGVhZGVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxNnB4JztcclxuXHJcbiAgICAgICAgY29uc3QgYWlUaXRsZSA9IGFpU2V0dGluZ3NIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNFXHVERDE2IEFJXHU4QkJFXHU3RjZFJyB9KTtcclxuICAgICAgICBhaVRpdGxlLnN0eWxlLm1hcmdpbiA9ICcwJztcclxuXHJcbiAgICAgICAgY29uc3QgYWRkTW9kZWxCdXR0b24gPSBhaVNldHRpbmdzSGVhZGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTZERkJcdTUyQTBBSVx1NkEyMVx1NTc4QicsIGNsczogJ21vZC1jdGEnIH0pO1xyXG4gICAgICAgIGFkZE1vZGVsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RlbE1hbmFnZW1lbnRNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4ubW9kZWxNYW5hZ2VyLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hEZWZhdWx0TW9kZWxTZWxlY3RvcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEJcdTkwMDlcdTYyRTlcclxuICAgICAgICBjb25zdCBkZWZhdWx0TW9kZWxTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEInKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU5MDA5XHU2MkU5XHU3NTI4XHU0RThFXHU3NTFGXHU2MjEwXHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHU3Njg0XHU5RUQ4XHU4QkE0QUlcdTZBMjFcdTU3OEInKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VsZWN0b3JDb250YWluZXIgPSBkZWZhdWx0TW9kZWxTZXR0aW5nLmNvbnRyb2xFbC5jcmVhdGVFbCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TW9kZWxTZWxlY3RvciA9IG5ldyBEZWZhdWx0TW9kZWxTZWxlY3RvcihcclxuICAgICAgICAgICAgc2VsZWN0b3JDb250YWluZXIsIFxyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5tb2RlbE1hbmFnZXIsIFxyXG4gICAgICAgICAgICAobW9kZWxJZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU4RkQ5XHU5MUNDXHU1M0VGXHU0RUU1XHU2REZCXHU1MkEwXHU2QTIxXHU1NzhCXHU1MjA3XHU2MzYyXHU3Njg0XHU1NkRFXHU4QzAzXHU5MDNCXHU4RjkxXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnXHU5RUQ4XHU4QkE0XHU2QTIxXHU1NzhCXHU1REYyXHU1MjA3XHU2MzYyOicsIG1vZGVsSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gXHU5RUQ4XHU4QkE0XHU4ODRDXHU0RTNBXHU4QkJFXHU3RjZFXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHUyNjk5XHVGRTBGIFx1OUVEOFx1OEJBNFx1ODg0Q1x1NEUzQScgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU5RUQ4XHU4QkE0XHU2M0QwXHU0RUE0XHU4MzAzXHU1NkY0JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OEJCRVx1N0Y2RVx1OUVEOFx1OEJBNFx1NzY4NFx1NjNEMFx1NEVBNFx1ODMwM1x1NTZGNCcpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYWxsJywgJ1x1NjNEMFx1NEVBNFx1NjI0MFx1NjcwOVx1NjU4N1x1NEVGNicpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdzaW5nbGUnLCAnXHU2M0QwXHU0RUE0XHU1MzU1XHU0RTJBXHU2NTg3XHU0RUY2JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0Q29tbWl0U2NvcGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdENvbW1pdFNjb3BlID0gdmFsdWUgYXMgJ2FsbCcgfCAnc2luZ2xlJztcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTlFRDhcdThCQTRcdTYzRDBcdTRFQTRcdTRGRTFcdTYwNkZcdTdDN0JcdTU3OEInKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QkJFXHU3RjZFXHU5RUQ4XHU4QkE0XHU3Njg0XHU2M0QwXHU0RUE0XHU0RkUxXHU2MDZGXHU3NTFGXHU2MjEwXHU2NUI5XHU1RjBGJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhaScsICdBSVx1ODFFQVx1NTJBOFx1NzUxRlx1NjIxMCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdtYW51YWwnLCAnXHU2MjRCXHU1MkE4XHU4RjkzXHU1MTY1JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TWVzc2FnZVR5cGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1lc3NhZ2VUeXBlID0gdmFsdWUgYXMgJ2FpJyB8ICdtYW51YWwnO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1ODFFQVx1NTJBOFx1NjNEMFx1NEVBNFx1NkEyMVx1NUYwRicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTVGMDBcdTU0MkZcdTU0MEVcdTVDMDZcdTRGN0ZcdTc1MjhcdTlFRDhcdThCQTRcdThCQkVcdTdGNkVcdTc2RjRcdTYzQTVcdTYzRDBcdTRFQTRcdUZGMENcdTRFMERcdTY2M0VcdTc5M0FcdTkwMDlcdTYyRTlcdTc1NENcdTk3NjInKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ29tbWl0KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9Db21taXQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTY2M0VcdTc5M0FcdTkwMUFcdTc3RTUnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2NjJGXHU1NDI2XHU2NjNFXHU3OTNBXHU2NENEXHU0RjVDXHU5MDFBXHU3N0U1JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGlmaWNhdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd05vdGlmaWNhdGlvbnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gR2l0XHU4QkJFXHU3RjZFXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0U0IEdpdFx1OEJCRVx1N0Y2RScgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2M0E4XHU5MDAxXHU1MjMwXHU4RkRDXHU3QTBCXHU0RUQzXHU1RTkzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NjNEMFx1NEVBNFx1NTQwRVx1NjYyRlx1NTQyNlx1ODFFQVx1NTJBOFx1NjNBOFx1OTAwMVx1NTIzMFx1OEZEQ1x1N0EwQlx1NEVEM1x1NUU5MycpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnB1c2hUb1JlbW90ZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wdXNoVG9SZW1vdGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdThGRENcdTdBMEJcdTUyMDZcdTY1MkZcdTU0MERcdTc5RjAnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2M0E4XHU5MDAxXHU1MjMwXHU3Njg0XHU4RkRDXHU3QTBCXHU1MjA2XHU2NTJGXHU1NDBEXHU3OUYwJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ21haW4nKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW90ZUJyYW5jaClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdGVCcmFuY2ggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gXHU2NTg3XHU0RUY2XHU4RkM3XHU2RUU0XHU4QkJFXHU3RjZFXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0MxIFx1NjU4N1x1NEVGNlx1OEZDN1x1NkVFNCcgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU1MzA1XHU1NDJCXHU3Njg0XHU2NTg3XHU0RUY2XHU3QzdCXHU1NzhCJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1ODk4MVx1NTMwNVx1NTQyQlx1NTcyOFx1NjNEMFx1NEVBNFx1NEUyRFx1NzY4NFx1NjU4N1x1NEVGNlx1NjI2OVx1NUM1NVx1NTQwRFx1RkYwOFx1NzUyOFx1OTAxN1x1NTNGN1x1NTIwNlx1OTY5NFx1RkYwOScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcubWQsLnR4dCwuY2FudmFzLC5qc29uJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRmlsZVR5cGVzLmpvaW4oJywnKSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRmlsZVR5cGVzID0gdmFsdWUuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2MzkyXHU5NjY0XHU3Njg0XHU4REVGXHU1Rjg0XHU2QTIxXHU1RjBGJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1ODk4MVx1NjM5Mlx1OTY2NFx1NzY4NFx1OERFRlx1NUY4NFx1NkEyMVx1NUYwRlx1RkYwOFx1NzUyOFx1OTAxN1x1NTNGN1x1NTIwNlx1OTY5NFx1RkYwOScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcub2JzaWRpYW4vLG5vZGVfbW9kdWxlcy8sLmdpdC8nKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4Y2x1ZGVQYXR0ZXJucy5qb2luKCcsJykpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhjbHVkZVBhdHRlcm5zID0gdmFsdWUuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIFx1OTFDRFx1N0Y2RVx1NjMwOVx1OTRBRVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU5MUNEXHU3RjZFXHU4QkJFXHU3RjZFJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NUMwNlx1NjI0MFx1NjcwOVx1OEJCRVx1N0Y2RVx1OTFDRFx1N0Y2RVx1NEUzQVx1OUVEOFx1OEJBNFx1NTAzQycpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1OTFDRFx1N0Y2RScpXHJcbiAgICAgICAgICAgICAgICAuc2V0V2FybmluZygpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIucmVzZXRUb0RlZmF1bHRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1OEJCRVx1N0Y2RVx1NURGMlx1OTFDRFx1N0Y2RVx1NEUzQVx1OUVEOFx1OEJBNFx1NTAzQycpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MjM3XHU2NUIwXHU5RUQ4XHU4QkE0XHU2QTIxXHU1NzhCXHU5MDA5XHU2MkU5XHU1NjY4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVmcmVzaERlZmF1bHRNb2RlbFNlbGVjdG9yKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRNb2RlbFNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1vZGVsU2VsZWN0b3IucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLy8gXHU2NTcwXHU2MzZFXHU3QkExXHU3NDA2XHU1NjY4IC0gXHU3RURGXHU0RTAwXHU3QkExXHU3NDA2XHU2M0QyXHU0RUY2XHU3Njg0XHU2MjQwXHU2NzA5XHU2NTcwXHU2MzZFXHU1QjU4XHU1MEE4XHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBsdWdpbkRhdGEge1xyXG4gICAgLy8gXHU2M0QyXHU0RUY2XHU1N0ZBXHU2NzJDXHU4QkJFXHU3RjZFXHJcbiAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGRlZmF1bHRDb21taXRTY29wZTogJ2FsbCcgfCAnc2luZ2xlJztcclxuICAgICAgICBkZWZhdWx0TWVzc2FnZVR5cGU6ICdhaScgfCAnbWFudWFsJztcclxuICAgICAgICBwdXNoVG9SZW1vdGU6IGJvb2xlYW47XHJcbiAgICAgICAgcmVtb3RlQnJhbmNoOiBzdHJpbmc7XHJcbiAgICAgICAgYXV0b0NvbW1pdDogYm9vbGVhbjtcclxuICAgICAgICBpbmNsdWRlRmlsZVR5cGVzOiBzdHJpbmdbXTtcclxuICAgICAgICBleGNsdWRlUGF0dGVybnM6IHN0cmluZ1tdO1xyXG4gICAgICAgIHNob3dOb3RpZmljYXRpb25zOiBib29sZWFuO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHU2NTcwXHU2MzZFXHJcbiAgICBtb2RlbHM6IHtcclxuICAgICAgICBjb25maWdzOiBNb2RlbENvbmZpZ0RhdGFbXTtcclxuICAgICAgICBkZWZhdWx0TW9kZWxJZDogc3RyaW5nIHwgbnVsbDtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFx1NEUyQVx1NjAyN1x1NTMxNlx1OEJCRVx1N0Y2RVxyXG4gICAgcHJlZmVyZW5jZXM6IHtcclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBcdTY1NzBcdTYzNkVcdTcyNDhcdTY3MkNcdTUzRjdcdUZGMENcdTc1MjhcdTRFOEVcdTY3MkFcdTY3NjVcdTc2ODRcdTY1NzBcdTYzNkVcdThGQzFcdTc5RkJcclxuICAgIHZlcnNpb246IHN0cmluZztcclxuICAgIGxhc3RNb2RpZmllZDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsQ29uZmlnRGF0YSB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIG1vZGVsTmFtZTogc3RyaW5nO1xyXG4gICAgcHJvdmlkZXI6IHN0cmluZztcclxuICAgIGJhc2VVUkw6IHN0cmluZztcclxuICAgIGVuY29kZWRBcGlLZXk6IHN0cmluZzsgIC8vIFx1N0YxNlx1NzgwMVx1NTQwRVx1NzY4NEFQSVx1NUJDNlx1OTRBNVxyXG4gICAgbWF4Q29udGV4dFRva2VuczogbnVtYmVyO1xyXG4gICAgbWF4T3V0cHV0VG9rZW5zOiBudW1iZXI7XHJcbiAgICBpc1ZlcmlmaWVkOiBib29sZWFuO1xyXG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XHJcbiAgICBsYXN0TW9kaWZpZWQ6IG51bWJlcjtcclxufVxyXG5cclxuLy8gXHU5RUQ4XHU4QkE0XHU2NTcwXHU2MzZFXHU3RUQzXHU2Nzg0XHJcbmNvbnN0IERFRkFVTFRfUExVR0lOX0RBVEE6IFBsdWdpbkRhdGEgPSB7XHJcbiAgICBzZXR0aW5nczoge1xyXG4gICAgICAgIGRlZmF1bHRDb21taXRTY29wZTogJ2FsbCcsXHJcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2VUeXBlOiAnYWknLFxyXG4gICAgICAgIHB1c2hUb1JlbW90ZTogdHJ1ZSxcclxuICAgICAgICByZW1vdGVCcmFuY2g6ICdtYWluJyxcclxuICAgICAgICBhdXRvQ29tbWl0OiBmYWxzZSxcclxuICAgICAgICBpbmNsdWRlRmlsZVR5cGVzOiBbJy5tZCcsICcudHh0JywgJy5jYW52YXMnLCAnLmpzb24nXSxcclxuICAgICAgICBleGNsdWRlUGF0dGVybnM6IFsnLm9ic2lkaWFuLycsICdub2RlX21vZHVsZXMvJywgJy5naXQvJ10sXHJcbiAgICAgICAgc2hvd05vdGlmaWNhdGlvbnM6IHRydWVcclxuICAgIH0sXHJcbiAgICBtb2RlbHM6IHtcclxuICAgICAgICBjb25maWdzOiBbXSxcclxuICAgICAgICBkZWZhdWx0TW9kZWxJZDogbnVsbFxyXG4gICAgfSxcclxuICAgIHByZWZlcmVuY2VzOiB7fSxcclxuICAgIHZlcnNpb246ICcxLjAuMCcsXHJcbiAgICBsYXN0TW9kaWZpZWQ6IERhdGUubm93KClcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRhTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIGFwcDogQXBwO1xyXG4gICAgcHJpdmF0ZSBkYXRhRmlsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBkYXRhOiBQbHVnaW5EYXRhO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW5EaXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuZGF0YUZpbGUgPSBgJHtwbHVnaW5EaXJ9L3BsdWdpbi1kYXRhLmpzb25gO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHsgLi4uREVGQVVMVF9QTFVHSU5fREFUQSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MjFEXHU1OUNCXHU1MzE2XHU2NTcwXHU2MzZFXHU3QkExXHU3NDA2XHU1NjY4XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU5NzAwXHU4OTgxXHU0RUNFXHU2NUU3XHU1QjU4XHU1MEE4XHU4RkMxXHU3OUZCXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWlncmF0ZU9sZERhdGEoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NEUwRFx1NUI1OFx1NTcyOFx1NjIxNlx1NjM1Rlx1NTc0Rlx1RkYwQ1x1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNFx1NjU3MFx1NjM2RScpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB7IC4uLkRFRkFVTFRfUExVR0lOX0RBVEEgfTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEVDRVx1NjU4N1x1NEVGNlx1NTJBMFx1OEY3RFx1NjU3MFx1NjM2RVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh0aGlzLmRhdGFGaWxlKTtcclxuICAgICAgICAgICAgaWYgKCFmaWxlRXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU0RjdGXHU3NTI4XHU5RUQ4XHU4QkE0XHU5MTREXHU3RjZFJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB7IC4uLkRFRkFVTFRfUExVR0lOX0RBVEEgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodGhpcy5kYXRhRmlsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRlZERhdGEgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTQwOFx1NUU3Nlx1OUVEOFx1OEJBNFx1NjU3MFx1NjM2RVx1NTQ4Q1x1NTJBMFx1OEY3RFx1NzY4NFx1NjU3MFx1NjM2RVx1RkYwQ1x1Nzg2RVx1NEZERFx1NjI0MFx1NjcwOVx1NUI1N1x1NkJCNVx1OTBGRFx1NUI1OFx1NTcyOFxyXG4gICAgICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLm1lcmdlV2l0aERlZmF1bHRzKGxvYWRlZERhdGEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjU3MFx1NjM2RVx1NTJBMFx1OEY3RFx1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dpdCBBdXRvIENvbW1pdCAtIFx1NTJBMFx1OEY3RFx1NjU3MFx1NjM2RVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEZERFx1NUI1OFx1NjU3MFx1NjM2RVx1NTIzMFx1NjU4N1x1NEVGNlxyXG4gICAgICovXHJcbiAgICBhc3luYyBzYXZlRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEubGFzdE1vZGlmaWVkID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgY29uc3QganNvbkNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEsIG51bGwsIDIpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHRoaXMuZGF0YUZpbGUsIGpzb25Db250ZW50KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NjIxMFx1NTI5RicpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dpdCBBdXRvIENvbW1pdCAtIFx1NEZERFx1NUI1OFx1NjU3MFx1NjM2RVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTQwOFx1NUU3Nlx1OUVEOFx1OEJBNFx1NjU3MFx1NjM2RVx1RkYwQ1x1Nzg2RVx1NEZERFx1NjU3MFx1NjM2RVx1N0VEM1x1Njc4NFx1NUI4Q1x1NjU3NFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1lcmdlV2l0aERlZmF1bHRzKGxvYWRlZERhdGE6IGFueSk6IFBsdWdpbkRhdGEge1xyXG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IHsgLi4uREVGQVVMVF9QTFVHSU5fREFUQSB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsb2FkZWREYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTQwOFx1NUU3Nlx1OEJCRVx1N0Y2RVxyXG4gICAgICAgICAgICBpZiAobG9hZGVkRGF0YS5zZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VkLnNldHRpbmdzID0geyAuLi5tZXJnZWQuc2V0dGluZ3MsIC4uLmxvYWRlZERhdGEuc2V0dGluZ3MgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1NDA4XHU1RTc2XHU2QTIxXHU1NzhCXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgICAgIGlmIChsb2FkZWREYXRhLm1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VkLm1vZGVscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25maWdzOiBsb2FkZWREYXRhLm1vZGVscy5jb25maWdzIHx8IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNb2RlbElkOiBsb2FkZWREYXRhLm1vZGVscy5kZWZhdWx0TW9kZWxJZCB8fCBudWxsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU0MDhcdTVFNzZcdTRFMkFcdTYwMjdcdTUzMTZcdThCQkVcdTdGNkVcclxuICAgICAgICAgICAgaWYgKGxvYWRlZERhdGEucHJlZmVyZW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIG1lcmdlZC5wcmVmZXJlbmNlcyA9IHsgLi4ubG9hZGVkRGF0YS5wcmVmZXJlbmNlcyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTRGRERcdTc1NTlcdTcyNDhcdTY3MkNcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgaWYgKGxvYWRlZERhdGEudmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VkLnZlcnNpb24gPSBsb2FkZWREYXRhLnZlcnNpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NEVDRVx1NjVFN1x1NzY4NFx1NUI1OFx1NTBBOFx1NjVCOVx1NUYwRlx1OEZDMVx1NzlGQlx1NjU3MFx1NjM2RVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIG1pZ3JhdGVPbGREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGxldCBoYXNNaWdyYXRpb24gPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdThGQzFcdTc5RkIgbG9jYWxTdG9yYWdlIFx1NEUyRFx1NzY4NFx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVxyXG4gICAgICAgICAgICBjb25zdCBvbGRNb2RlbHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2l0LWF1dG8tY29tbWl0LW1vZGVscycpO1xyXG4gICAgICAgICAgICBjb25zdCBvbGREZWZhdWx0TW9kZWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2l0LWF1dG8tY29tbWl0LWRlZmF1bHQtbW9kZWwnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChvbGRNb2RlbHMgJiYgdGhpcy5kYXRhLm1vZGVscy5jb25maWdzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkTW9kZWxzID0gSlNPTi5wYXJzZShvbGRNb2RlbHMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLm1vZGVscy5jb25maWdzID0gcGFyc2VkTW9kZWxzLm1hcCgobW9kZWw6IGFueSkgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5tb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICBlbmNvZGVkQXBpS2V5OiB0aGlzLmVuY29kZUFwaUtleShtb2RlbC5hcGlLZXkpIC8vIFx1N0YxNlx1NzgwMUFQSVx1NUJDNlx1OTRBNVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAob2xkRGVmYXVsdE1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLm1vZGVscy5kZWZhdWx0TW9kZWxJZCA9IG9sZERlZmF1bHRNb2RlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaGFzTWlncmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdThGQzFcdTc5RkJcdTRFODZcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcdTY1NzBcdTYzNkUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2RTA1XHU3NDA2XHU2NUU3XHU3Njg0IGxvY2FsU3RvcmFnZSBcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgaWYgKGhhc01pZ3JhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2dpdC1hdXRvLWNvbW1pdC1tb2RlbHMnKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdnaXQtYXV0by1jb21taXQtZGVmYXVsdC1tb2RlbCcpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjU3MFx1NjM2RVx1OEZDMVx1NzlGQlx1NUI4Q1x1NjIxMFx1RkYwQ1x1NURGMlx1NkUwNVx1NzQwNlx1NjVFN1x1NUI1OFx1NTBBOCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignR2l0IEF1dG8gQ29tbWl0IC0gXHU2NTcwXHU2MzZFXHU4RkMxXHU3OUZCXHU4RkM3XHU3QTBCXHU0RTJEXHU1MUZBXHU3M0IwXHU5NTE5XHU4QkVGOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTdGMTZcdTc4MDFBUElcdTVCQzZcdTk0QTVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBlbmNvZGVBcGlLZXkoYXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghYXBpS2V5KSByZXR1cm4gJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU3QjgwXHU1MzU1XHU3Njg0QmFzZTY0XHU3RjE2XHU3ODAxXHVGRjBDXHU1M0VGXHU0RUU1XHU2ODM5XHU2MzZFXHU5NzAwXHU4OTgxXHU0RjdGXHU3NTI4XHU2NkY0XHU1OTBEXHU2NzQyXHU3Njg0XHU1MkEwXHU1QkM2XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhcGlLZXkpKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2l0IEF1dG8gQ29tbWl0IC0gQVBJXHU1QkM2XHU5NEE1XHU3RjE2XHU3ODAxXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaUtleTsgLy8gXHU3RjE2XHU3ODAxXHU1OTMxXHU4RDI1XHU2NUY2XHU4RkQ0XHU1NkRFXHU1MzlGXHU1MDNDXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4OUUzXHU3ODAxQVBJXHU1QkM2XHU5NEE1XHJcbiAgICAgKi9cclxuICAgIGRlY29kZUFwaUtleShlbmNvZGVkQXBpS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghZW5jb2RlZEFwaUtleSkgcmV0dXJuICcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1ODlFM1x1NzgwMUJhc2U2NFxyXG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhdG9iKGVuY29kZWRBcGlLZXkpKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2l0IEF1dG8gQ29tbWl0IC0gQVBJXHU1QkM2XHU5NEE1XHU4OUUzXHU3ODAxXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGVuY29kZWRBcGlLZXk7IC8vIFx1ODlFM1x1NzgwMVx1NTkzMVx1OEQyNVx1NjVGNlx1OEZENFx1NTZERVx1NTM5Rlx1NTAzQ1x1RkYwOFx1NTNFRlx1ODBGRFx1NjYyRlx1NjcyQVx1N0YxNlx1NzgwMVx1NzY4NFx1NjVFN1x1NjU3MFx1NjM2RVx1RkYwOVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyA9PT09PT09PT09IFx1NjNEMlx1NEVGNlx1OEJCRVx1N0Y2RVx1NzZGOFx1NTE3M1x1NjVCOVx1NkNENSA9PT09PT09PT09XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTYzRDJcdTRFRjZcdThCQkVcdTdGNkVcclxuICAgICAqL1xyXG4gICAgZ2V0U2V0dGluZ3MoKTogUGx1Z2luRGF0YVsnc2V0dGluZ3MnXSB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5kYXRhLnNldHRpbmdzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2RjRcdTY1QjBcdTYzRDJcdTRFRjZcdThCQkVcdTdGNkVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBkYXRlU2V0dGluZ3MobmV3U2V0dGluZ3M6IFBhcnRpYWw8UGx1Z2luRGF0YVsnc2V0dGluZ3MnXT4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmRhdGEuc2V0dGluZ3MgPSB7IC4uLnRoaXMuZGF0YS5zZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PSBcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcdTc2RjhcdTUxNzNcdTY1QjlcdTZDRDUgPT09PT09PT09PVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHJcbiAgICAgKi9cclxuICAgIGdldEFsbE1vZGVscygpOiBNb2RlbENvbmZpZ0RhdGFbXSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmRhdGEubW9kZWxzLmNvbmZpZ3NdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU1REYyXHU5QThDXHU4QkMxXHU3Njg0XHU2QTIxXHU1NzhCXHJcbiAgICAgKi9cclxuICAgIGdldFZlcmlmaWVkTW9kZWxzKCk6IE1vZGVsQ29uZmlnRGF0YVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1vZGVscy5jb25maWdzLmZpbHRlcihtb2RlbCA9PiBtb2RlbC5pc1ZlcmlmaWVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NjgzOVx1NjM2RUlEXHU4M0I3XHU1M0Q2XHU2QTIxXHU1NzhCXHJcbiAgICAgKi9cclxuICAgIGdldE1vZGVsQnlJZChpZDogc3RyaW5nKTogTW9kZWxDb25maWdEYXRhIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tb2RlbHMuY29uZmlncy5maW5kKG1vZGVsID0+IG1vZGVsLmlkID09PSBpZCkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NkRGQlx1NTJBMFx1NjVCMFx1NkEyMVx1NTc4QlxyXG4gICAgICovXHJcbiAgICBhc3luYyBhZGRNb2RlbChjb25maWc6IE9taXQ8TW9kZWxDb25maWdEYXRhLCAnaWQnIHwgJ2VuY29kZWRBcGlLZXknIHwgJ2lzVmVyaWZpZWQnIHwgJ2NyZWF0ZWRBdCcgfCAnbGFzdE1vZGlmaWVkJz4gJiB7IGFwaUtleTogc3RyaW5nIH0pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgY29uc3QgbmV3TW9kZWw6IE1vZGVsQ29uZmlnRGF0YSA9IHtcclxuICAgICAgICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxyXG4gICAgICAgICAgICAuLi5jb25maWcsXHJcbiAgICAgICAgICAgIGVuY29kZWRBcGlLZXk6IHRoaXMuZW5jb2RlQXBpS2V5KGNvbmZpZy5hcGlLZXkpLFxyXG4gICAgICAgICAgICBpc1ZlcmlmaWVkOiBmYWxzZSxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBub3csXHJcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogbm93XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhLm1vZGVscy5jb25maWdzLnB1c2gobmV3TW9kZWwpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcclxuICAgICAgICByZXR1cm4gbmV3TW9kZWwuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2RjRcdTY1QjBcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBkYXRlTW9kZWwoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PE1vZGVsQ29uZmlnRGF0YSwgJ2lkJyB8ICdjcmVhdGVkQXQnPj4gJiB7IGFwaUtleT86IHN0cmluZyB9KTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGEubW9kZWxzLmNvbmZpZ3MuZmluZEluZGV4KG1vZGVsID0+IG1vZGVsLmlkID09PSBpZCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7IC4uLnVwZGF0ZXMgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2RjRcdTY1QjBcdTUzMDVcdTU0MkJBUElcdTVCQzZcdTk0QTVcdUZGMENcdTk3MDBcdTg5ODFcdTdGMTZcdTc4MDFcclxuICAgICAgICBpZiAodXBkYXRlcy5hcGlLZXkpIHtcclxuICAgICAgICAgICAgdXBkYXRlRGF0YS5lbmNvZGVkQXBpS2V5ID0gdGhpcy5lbmNvZGVBcGlLZXkodXBkYXRlcy5hcGlLZXkpO1xyXG4gICAgICAgICAgICBkZWxldGUgdXBkYXRlRGF0YS5hcGlLZXk7IC8vIFx1NzlGQlx1OTY2NFx1NjYwRVx1NjU4N1x1NUJDNlx1OTRBNVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kYXRhLm1vZGVscy5jb25maWdzW2luZGV4XSA9IHtcclxuICAgICAgICAgICAgLi4udGhpcy5kYXRhLm1vZGVscy5jb25maWdzW2luZGV4XSxcclxuICAgICAgICAgICAgLi4udXBkYXRlRGF0YSxcclxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSgpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MjIwXHU5NjY0XHU2QTIxXHU1NzhCXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRlbGV0ZU1vZGVsKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YS5tb2RlbHMuY29uZmlncy5maW5kSW5kZXgobW9kZWwgPT4gbW9kZWwuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YS5tb2RlbHMuY29uZmlncy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTIyMFx1OTY2NFx1NzY4NFx1NjYyRlx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4Qlx1RkYwQ1x1NkUwNVx1OTY2NFx1OUVEOFx1OEJBNFx1OEJCRVx1N0Y2RVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGEubW9kZWxzLmRlZmF1bHRNb2RlbElkID09PSBpZCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGEubW9kZWxzLmRlZmF1bHRNb2RlbElkID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJCRVx1N0Y2RVx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QlxyXG4gICAgICovXHJcbiAgICBhc3luYyBzZXREZWZhdWx0TW9kZWwoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5nZXRNb2RlbEJ5SWQoaWQpO1xyXG4gICAgICAgIGlmICghbW9kZWwgfHwgIW1vZGVsLmlzVmVyaWZpZWQpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhLm1vZGVscy5kZWZhdWx0TW9kZWxJZCA9IGlkO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QlxyXG4gICAgICovXHJcbiAgICBnZXREZWZhdWx0TW9kZWwoKTogTW9kZWxDb25maWdEYXRhIHwgbnVsbCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEubW9kZWxzLmRlZmF1bHRNb2RlbElkKSByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb2RlbEJ5SWQodGhpcy5kYXRhLm1vZGVscy5kZWZhdWx0TW9kZWxJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEJJRFxyXG4gICAgICovXHJcbiAgICBnZXREZWZhdWx0TW9kZWxJZCgpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1vZGVscy5kZWZhdWx0TW9kZWxJZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NkUwNVx1N0E3QVx1NjI0MFx1NjcwOVx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVxyXG4gICAgICovXHJcbiAgICBhc3luYyBjbGVhckFsbE1vZGVscygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmRhdGEubW9kZWxzLmNvbmZpZ3MgPSBbXTtcclxuICAgICAgICB0aGlzLmRhdGEubW9kZWxzLmRlZmF1bHRNb2RlbElkID0gbnVsbDtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PSBcdTRFMkFcdTYwMjdcdTUzMTZcdThCQkVcdTdGNkVcdTc2RjhcdTUxNzNcdTY1QjlcdTZDRDUgPT09PT09PT09PVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU0RTJBXHU2MDI3XHU1MzE2XHU4QkJFXHU3RjZFXHJcbiAgICAgKi9cclxuICAgIGdldFByZWZlcmVuY2U8VD4oa2V5OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogVCk6IFQ7XHJcbiAgICBnZXRQcmVmZXJlbmNlPFQ+KGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBUKTogVCB8IHVuZGVmaW5lZDtcclxuICAgIGdldFByZWZlcmVuY2U8VD4oa2V5OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZT86IFQpOiBUIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnByZWZlcmVuY2VzW2tleV0gIT09IHVuZGVmaW5lZCA/IHRoaXMuZGF0YS5wcmVmZXJlbmNlc1trZXldIDogZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4QkJFXHU3RjZFXHU0RTJBXHU2MDI3XHU1MzE2XHU4QkJFXHU3RjZFXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHNldFByZWZlcmVuY2Uoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmRhdGEucHJlZmVyZW5jZXNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTIyMFx1OTY2NFx1NEUyQVx1NjAyN1x1NTMxNlx1OEJCRVx1N0Y2RVxyXG4gICAgICovXHJcbiAgICBhc3luYyByZW1vdmVQcmVmZXJlbmNlKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuZGF0YS5wcmVmZXJlbmNlc1trZXldO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA9PT09PT09PT09IFx1NURFNVx1NTE3N1x1NjVCOVx1NkNENSA9PT09PT09PT09XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDBJRFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ21vZGVsXycgKyBEYXRlLm5vdygpICsgJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1QkZDXHU1MUZBXHU5MTREXHU3RjZFXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydENvbmZpZygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuZGF0YSxcclxuICAgICAgICAgICAgZXhwb3J0ZWRBdDogRGF0ZS5ub3coKVxyXG4gICAgICAgIH0sIG51bGwsIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1QkZDXHU1MTY1XHU5MTREXHU3RjZFXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGltcG9ydENvbmZpZyhjb25maWdKc29uOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmc7IGltcG9ydGVkOiBudW1iZXIgfT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IEpTT04ucGFyc2UoY29uZmlnSnNvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5tb2RlbHMgfHwgIUFycmF5LmlzQXJyYXkoY29uZmlnLm1vZGVscy5jb25maWdzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHU2NUUwXHU2NTQ4XHU3Njg0XHU5MTREXHU3RjZFXHU2ODNDXHU1RjBGJywgaW1wb3J0ZWQ6IDAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGltcG9ydGVkID0gMDtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBtb2RlbENvbmZpZyBvZiBjb25maWcubW9kZWxzLmNvbmZpZ3MpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRNb2RlbENvbmZpZyhtb2RlbENvbmZpZykpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZE1vZGVsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IG1vZGVsQ29uZmlnLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IG1vZGVsQ29uZmlnLm1vZGVsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6IG1vZGVsQ29uZmlnLnByb3ZpZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMOiBtb2RlbENvbmZpZy5iYXNlVVJMLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXk6IHRoaXMuZGVjb2RlQXBpS2V5KG1vZGVsQ29uZmlnLmVuY29kZWRBcGlLZXkpLCAvLyBcdTg5RTNcdTc4MDFBUElcdTVCQzZcdTk0QTVcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4Q29udGV4dFRva2VuczogbW9kZWxDb25maWcubWF4Q29udGV4dFRva2VucyB8fCAzMjAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiBtb2RlbENvbmZpZy5tYXhPdXRwdXRUb2tlbnMgfHwgNDAwMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGltcG9ydGVkKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4Qlx1OEJCRVx1N0Y2RVx1RkYwQ1x1NEU1Rlx1NUJGQ1x1NTE2NVxyXG4gICAgICAgICAgICBpZiAoY29uZmlnLm1vZGVscy5kZWZhdWx0TW9kZWxJZCAmJiBpbXBvcnRlZCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5tb2RlbHMuZGVmYXVsdE1vZGVsSWQgPSBjb25maWcubW9kZWxzLmRlZmF1bHRNb2RlbElkO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBpbXBvcnRlZCB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSwgaW1wb3J0ZWQ6IDAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTlBOENcdThCQzFcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcdTY4M0NcdTVGMEZcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpc1ZhbGlkTW9kZWxDb25maWcoY29uZmlnOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gY29uZmlnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBjb25maWcuZGlzcGxheU5hbWUgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBjb25maWcubW9kZWxOYW1lID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnLnByb3ZpZGVyID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnLmJhc2VVUkwgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBjb25maWcuZW5jb2RlZEFwaUtleSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgICAgKHR5cGVvZiBjb25maWcubWF4Q29udGV4dFRva2VucyA9PT0gJ251bWJlcicgfHwgY29uZmlnLm1heENvbnRleHRUb2tlbnMgPT09IHVuZGVmaW5lZCkgJiZcclxuICAgICAgICAgICAgICAgKHR5cGVvZiBjb25maWcubWF4T3V0cHV0VG9rZW5zID09PSAnbnVtYmVyJyB8fCBjb25maWcubWF4T3V0cHV0VG9rZW5zID09PSB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU5MUNEXHU3RjZFXHU2MjQwXHU2NzA5XHU2NTcwXHU2MzZFXHU1MjMwXHU1MjFEXHU1OUNCXHU3MkI2XHU2MDAxXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlc2V0VG9EZWZhdWx0cygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLmRhdGEgPSB7IC4uLkRFRkFVTFRfUExVR0lOX0RBVEEgfTtcclxuICAgICAgICB0aGlzLmRhdGEubGFzdE1vZGlmaWVkID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjI0MFx1NjcwOVx1NjU3MFx1NjM2RVx1NURGMlx1OTFDRFx1N0Y2RVx1NEUzQVx1OUVEOFx1OEJBNFx1NTAzQycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MjIwXHU5NjY0XHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHVGRjA4XHU3NTI4XHU0RThFXHU2RDRCXHU4QkQ1XHU2MjE2XHU1RjdCXHU1RTk1XHU5MUNEXHU3RjZFXHVGRjA5XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRlbGV0ZURhdGFGaWxlKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh0aGlzLmRhdGFGaWxlKTtcclxuICAgICAgICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKHRoaXMuZGF0YUZpbGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NURGMlx1NTIyMFx1OTY2NCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTkxQ0RcdTdGNkVcdTUxODVcdTVCNThcdTRFMkRcdTc2ODRcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgdGhpcy5kYXRhID0geyAuLi5ERUZBVUxUX1BMVUdJTl9EQVRBIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2l0IEF1dG8gQ29tbWl0IC0gXHU1MjIwXHU5NjY0XHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHVGRjA4XHU3NTI4XHU0RThFXHU4QzAzXHU4QkQ1XHVGRjA5XHJcbiAgICAgKi9cclxuICAgIGdldERhdGFGaWxlUGF0aCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFGaWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2OEMwXHU2N0U1XHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU2NjJGXHU1NDI2XHU1QjU4XHU1NzI4XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRhdGFGaWxlRXhpc3RzKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh0aGlzLmRhdGFGaWxlKTtcclxuICAgIH1cclxufVxyXG4iLCAiLy8gXHU2NUIwXHU3Njg0XHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHU3QkExXHU3NDA2XHU1NjY4IC0gXHU0RjdGXHU3NTI4XHU3RURGXHU0RTAwXHU3Njg0XHU2NTcwXHU2MzZFXHU3QkExXHU3NDA2XHU1NjY4XHJcbmltcG9ydCB7IERhdGFNYW5hZ2VyLCBNb2RlbENvbmZpZ0RhdGEgfSBmcm9tICcuL2RhdGEtbWFuYWdlcic7XHJcbmltcG9ydCB7IFBSRURFRklORURfUFJPVklERVJTIH0gZnJvbSAnLi9tb2RlbC1jb25maWcnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNb2RlbENvbmZpZyB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIG1vZGVsTmFtZTogc3RyaW5nO1xyXG4gICAgcHJvdmlkZXI6IHN0cmluZztcclxuICAgIGJhc2VVUkw6IHN0cmluZztcclxuICAgIGFwaUtleTogc3RyaW5nOyAgLy8gXHU4OUUzXHU3ODAxXHU1NDBFXHU3Njg0QVBJXHU1QkM2XHU5NEE1XHVGRjA4XHU0RUM1XHU1NzI4XHU1MTg1XHU1QjU4XHU0RTJEXHU0RjdGXHU3NTI4XHVGRjA5XHJcbiAgICBtYXhDb250ZXh0VG9rZW5zOiBudW1iZXI7XHJcbiAgICBtYXhPdXRwdXRUb2tlbnM6IG51bWJlcjtcclxuICAgIGlzVmVyaWZpZWQ6IGJvb2xlYW47XHJcbiAgICBjcmVhdGVkQXQ6IG51bWJlcjtcclxuICAgIGxhc3RNb2RpZmllZDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTmV3TW9kZWxDb25maWdNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBkYXRhTWFuYWdlcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyA9PT09PT09PT09IFx1NkEyMVx1NTc4Qlx1N0JBMVx1NzQwNlx1NjVCOVx1NkNENSA9PT09PT09PT09XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTZERkJcdTUyQTBcdTY1QjBcdTZBMjFcdTU3OEJcclxuICAgICAqL1xyXG4gICAgYXN5bmMgYWRkTW9kZWwoY29uZmlnOiBPbWl0PE1vZGVsQ29uZmlnLCAnaWQnIHwgJ2lzVmVyaWZpZWQnIHwgJ2NyZWF0ZWRBdCcgfCAnbGFzdE1vZGlmaWVkJz4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLmFkZE1vZGVsKGNvbmZpZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTY2RjRcdTY1QjBcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBkYXRlTW9kZWwoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PE1vZGVsQ29uZmlnLCAnaWQnIHwgJ2NyZWF0ZWRBdCc+Pik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnVwZGF0ZU1vZGVsKGlkLCB1cGRhdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTIyMFx1OTY2NFx1NkEyMVx1NTc4QlxyXG4gICAgICovXHJcbiAgICBhc3luYyBkZWxldGVNb2RlbChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuZGVsZXRlTW9kZWwoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2QTIxXHU1NzhCXHVGRjA4XHU4OUUzXHU3ODAxQVBJXHU1QkM2XHU5NEE1XHVGRjA5XHJcbiAgICAgKi9cclxuICAgIGdldEFsbE1vZGVscygpOiBNb2RlbENvbmZpZ1tdIHtcclxuICAgICAgICBjb25zdCBtb2RlbHMgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldEFsbE1vZGVscygpO1xyXG4gICAgICAgIHJldHVybiBtb2RlbHMubWFwKG1vZGVsID0+IHRoaXMuY29udmVydFRvTW9kZWxDb25maWcobW9kZWwpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1NURGMlx1OUE4Q1x1OEJDMVx1NzY4NFx1NkEyMVx1NTc4QlxyXG4gICAgICovXHJcbiAgICBnZXRWZXJpZmllZE1vZGVscygpOiBNb2RlbENvbmZpZ1tdIHtcclxuICAgICAgICBjb25zdCBtb2RlbHMgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldFZlcmlmaWVkTW9kZWxzKCk7XHJcbiAgICAgICAgcmV0dXJuIG1vZGVscy5tYXAobW9kZWwgPT4gdGhpcy5jb252ZXJ0VG9Nb2RlbENvbmZpZyhtb2RlbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2ODM5XHU2MzZFSURcdTgzQjdcdTUzRDZcdTZBMjFcdTU3OEJcclxuICAgICAqL1xyXG4gICAgZ2V0TW9kZWxCeUlkKGlkOiBzdHJpbmcpOiBNb2RlbENvbmZpZyB8IG51bGwge1xyXG4gICAgICAgIGNvbnN0IG1vZGVsRGF0YSA9IHRoaXMuZGF0YU1hbmFnZXIuZ2V0TW9kZWxCeUlkKGlkKTtcclxuICAgICAgICBpZiAoIW1vZGVsRGF0YSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRvTW9kZWxDb25maWcobW9kZWxEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1OEJCRVx1N0Y2RVx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QlxyXG4gICAgICovXHJcbiAgICBhc3luYyBzZXREZWZhdWx0TW9kZWwoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNldERlZmF1bHRNb2RlbChpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEJcclxuICAgICAqL1xyXG4gICAgZ2V0RGVmYXVsdE1vZGVsKCk6IE1vZGVsQ29uZmlnIHwgbnVsbCB7XHJcbiAgICAgICAgY29uc3QgbW9kZWxEYXRhID0gdGhpcy5kYXRhTWFuYWdlci5nZXREZWZhdWx0TW9kZWwoKTtcclxuICAgICAgICBpZiAoIW1vZGVsRGF0YSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRvTW9kZWxDb25maWcobW9kZWxEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QklEXHJcbiAgICAgKi9cclxuICAgIGdldERlZmF1bHRNb2RlbElkKCk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFNYW5hZ2VyLmdldERlZmF1bHRNb2RlbElkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTZFMDVcdTdBN0FcdTYyNDBcdTY3MDlcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgY2xlYXJBbGxNb2RlbHMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5jbGVhckFsbE1vZGVscygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vID09PT09PT09PT0gXHU2QTIxXHU1NzhCXHU5QThDXHU4QkMxXHU1NDhDXHU2RDRCXHU4QkQ1XHU2NUI5XHU2Q0Q1ID09PT09PT09PT1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1OUE4Q1x1OEJDMVx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVxyXG4gICAgICovXHJcbiAgICBhc3luYyB2ZXJpZnlNb2RlbChpZDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcclxuICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMuZ2V0TW9kZWxCeUlkKGlkKTtcclxuICAgICAgICBpZiAoIW1vZGVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1x1NkEyMVx1NTc4Qlx1NEUwRFx1NUI1OFx1NTcyOCcgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy50ZXN0TW9kZWxDb25uZWN0aW9uKG1vZGVsKTtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTW9kZWwoaWQsIHsgaXNWZXJpZmllZDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTW9kZWwoaWQsIHsgaXNWZXJpZmllZDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHJlc3BvbnNlLmVycm9yIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZU1vZGVsKGlkLCB7IGlzVmVyaWZpZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTc2RjRcdTYzQTVcdTZENEJcdThCRDVcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcdUZGMDhcdTRFMERcdTZERkJcdTUyQTBcdTUyMzBcdTdCQTFcdTc0MDZcdTU2NjhcdUZGMDlcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdGVzdE1vZGVsQ29uZmlnKGNvbmZpZzogT21pdDxNb2RlbENvbmZpZywgJ2lkJyB8ICdpc1ZlcmlmaWVkJyB8ICdjcmVhdGVkQXQnIHwgJ2xhc3RNb2RpZmllZCc+KTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcclxuICAgICAgICBjb25zdCB0ZW1wTW9kZWw6IE1vZGVsQ29uZmlnID0ge1xyXG4gICAgICAgICAgICBpZDogJ3RlbXAnLFxyXG4gICAgICAgICAgICAuLi5jb25maWcsXHJcbiAgICAgICAgICAgIGlzVmVyaWZpZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVzdE1vZGVsQ29ubmVjdGlvbih0ZW1wTW9kZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2RDRCXHU4QkQ1XHU2QTIxXHU1NzhCXHU4RkRFXHU2M0E1XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgdGVzdE1vZGVsQ29ubmVjdGlvbihtb2RlbDogTW9kZWxDb25maWcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RNZXNzYWdlID0gJ1x1NkQ0Qlx1OEJENVx1OEZERVx1NjNBNSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgbW9kZWw6IG1vZGVsLm1vZGVsTmFtZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRlc3RNZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDEwLFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHttb2RlbC5hcGlLZXl9YFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gXHU0RTNBXHU0RTBEXHU1NDBDXHU2M0QwXHU0RjlCXHU1NTQ2XHU2REZCXHU1MkEwXHU3Mjc5XHU2QjhBXHU1OTM0XHU5MEU4XHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5wcm92aWRlciA9PT0gJ3F3ZW4nKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzWydYLURhc2hTY29wZS1TU0UnXSA9ICdkaXNhYmxlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlbC5wcm92aWRlciA9PT0gJ29wZW5yb3V0ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzWydIVFRQLVJlZmVyZXInXSA9ICdodHRwczovL29ic2lkaWFuLm1kJztcclxuICAgICAgICAgICAgICAgIGhlYWRlcnNbJ1gtVGl0bGUnXSA9ICdPYnNpZGlhbiBHaXQgQXV0byBDb21taXQnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke21vZGVsLmJhc2VVUkx9L2NoYXQvY29tcGxldGlvbnNgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke2Vycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCByZXNwb25zZS5zdGF0dXNUZXh0fWAgXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogYFx1OEZERVx1NjNBNVx1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlfWAgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vID09PT09PT09PT0gXHU5MTREXHU3RjZFXHU1QkZDXHU1MTY1XHU1QkZDXHU1MUZBXHU2NUI5XHU2Q0Q1ID09PT09PT09PT1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUJGQ1x1NTFGQVx1OTE0RFx1N0Y2RVxyXG4gICAgICovXHJcbiAgICBleHBvcnRDb25maWcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5leHBvcnRDb25maWcoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NUJGQ1x1NTE2NVx1OTE0RFx1N0Y2RVxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbXBvcnRDb25maWcoY29uZmlnSnNvbjogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nOyBpbXBvcnRlZDogbnVtYmVyIH0+IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5pbXBvcnRDb25maWcoY29uZmlnSnNvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gPT09PT09PT09PSBcdTU0MTFcdTU0MEVcdTUxN0NcdTVCQjlcdTYwMjdcdTY1QjlcdTZDRDUgPT09PT09PT09PVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU0RUNFXHU1QjU4XHU1MEE4XHU0RTJEXHU1MkEwXHU4RjdEXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHVGRjA4XHU0RkREXHU2MzAxXHU0RTBFXHU2NUU3QVBJXHU1MTdDXHU1QkI5XHVGRjA5XHJcbiAgICAgKi9cclxuICAgIGxvYWRGcm9tU3RvcmFnZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdTY1QjBcdTc2ODRcdTY1NzBcdTYzNkVcdTdCQTFcdTc0MDZcdTU2NjhcdTU3MjhcdTUyMURcdTU5Q0JcdTUzMTZcdTY1RjZcdTVERjJcdTdFQ0ZcdTU5MDRcdTc0MDZcdTRFODZcdTY1NzBcdTYzNkVcdTUyQTBcdThGN0RcclxuICAgICAgICAvLyBcdThGRDlcdTRFMkFcdTY1QjlcdTZDRDVcdTRGRERcdTc1NTlcdTY2MkZcdTRFM0FcdTRFODZcdTUxN0NcdTVCQjlcdTYwMjdcdUZGMENcdTVCOUVcdTk2NDVcdTRFMERcdTYyNjdcdTg4NENcdTRFRkJcdTRGNTVcdTY0Q0RcdTRGNUNcclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RjdGXHU3NTI4XHU2NUIwXHU3Njg0XHU2NTcwXHU2MzZFXHU3QkExXHU3NDA2XHU1NjY4XHVGRjBDXHU4REYzXHU4RkM3XHU2NUU3XHU3Njg0XHU1MkEwXHU4RjdEXHU2NUI5XHU1RjBGJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTRGRERcdTVCNThcdTUyMzBcdTVCNThcdTUwQThcdUZGMDhcdTRGRERcdTYzMDFcdTRFMEVcdTY1RTdBUElcdTUxN0NcdTVCQjlcdUZGMDlcclxuICAgICAqL1xyXG4gICAgc2F2ZVRvU3RvcmFnZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdTY1QjBcdTc2ODRcdTY1NzBcdTYzNkVcdTdCQTFcdTc0MDZcdTU2NjhcdTRGMUFcdTgxRUFcdTUyQThcdTRGRERcdTVCNThcdUZGMENcdThGRDlcdTRFMkFcdTY1QjlcdTZDRDVcdTRGRERcdTc1NTlcdTY2MkZcdTRFM0FcdTRFODZcdTUxN0NcdTVCQjlcdTYwMjdcclxuICAgICAgICBjb25zb2xlLmxvZygnR2l0IEF1dG8gQ29tbWl0IC0gXHU0RjdGXHU3NTI4XHU2NUIwXHU3Njg0XHU2NTcwXHU2MzZFXHU3QkExXHU3NDA2XHU1NjY4XHVGRjBDXHU4MUVBXHU1MkE4XHU0RkREXHU1QjU4Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdThGQzFcdTc5RkJcdTY1RTdcdTkxNERcdTdGNkVcdUZGMENcdTRFM0FcdTZDQTFcdTY3MDl0b2tlblx1NTNDMlx1NjU3MFx1NzY4NFx1NkEyMVx1NTc4Qlx1NkRGQlx1NTJBMFx1OUVEOFx1OEJBNFx1NTAzQ1xyXG4gICAgICovXHJcbiAgICBtaWdyYXRlT2xkQ29uZmlncygpOiB2b2lkIHtcclxuICAgICAgICAvLyBcdTY1NzBcdTYzNkVcdThGQzFcdTc5RkJcdTU3MjhEYXRhTWFuYWdlclx1NEUyRFx1NTkwNFx1NzQwNlxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdTY1NzBcdTYzNkVcdThGQzFcdTc5RkJcdTc1MzFcdTY1NzBcdTYzNkVcdTdCQTFcdTc0MDZcdTU2NjhcdTU5MDRcdTc0MDYnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA9PT09PT09PT09IFx1NURFNVx1NTE3N1x1NjVCOVx1NkNENSA9PT09PT09PT09XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTVDMDZNb2RlbENvbmZpZ0RhdGFcdThGNkNcdTYzNjJcdTRFM0FNb2RlbENvbmZpZ1x1RkYwOFx1ODlFM1x1NzgwMUFQSVx1NUJDNlx1OTRBNVx1RkYwOVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnZlcnRUb01vZGVsQ29uZmlnKG1vZGVsRGF0YTogTW9kZWxDb25maWdEYXRhKTogTW9kZWxDb25maWcge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC4uLm1vZGVsRGF0YSxcclxuICAgICAgICAgICAgYXBpS2V5OiB0aGlzLmRhdGFNYW5hZ2VyLmRlY29kZUFwaUtleShtb2RlbERhdGEuZW5jb2RlZEFwaUtleSlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU5QThDXHU4QkMxXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHU2ODNDXHU1RjBGXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNWYWxpZE1vZGVsQ29uZmlnKGNvbmZpZzogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGNvbmZpZyAmJlxyXG4gICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnLmRpc3BsYXlOYW1lID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnLm1vZGVsTmFtZSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgICAgdHlwZW9mIGNvbmZpZy5wcm92aWRlciA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgICAgdHlwZW9mIGNvbmZpZy5iYXNlVVJMID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnLmFwaUtleSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgICAgKHR5cGVvZiBjb25maWcubWF4Q29udGV4dFRva2VucyA9PT0gJ251bWJlcicgfHwgY29uZmlnLm1heENvbnRleHRUb2tlbnMgPT09IHVuZGVmaW5lZCkgJiZcclxuICAgICAgICAgICAgICAgKHR5cGVvZiBjb25maWcubWF4T3V0cHV0VG9rZW5zID09PSAnbnVtYmVyJyB8fCBjb25maWcubWF4T3V0cHV0VG9rZW5zID09PSB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG59XHJcbiIsICIvLyAgQUlcdThCQkVcdTdGNkVcdTc2RjhcdTUxNzNcdTc2ODRVSVx1N0VDNFx1NEVGNiAtIFx1OTAwMlx1OTE0RFx1NjVCMFx1NzY4NFx1NjU3MFx1NjM2RVx1N0JBMVx1NzQwNlx1NTY2OFxyXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE1vZGVsQ29uZmlnLCBOZXdNb2RlbENvbmZpZ01hbmFnZXIgfSBmcm9tICcuL25ldy1tb2RlbC1jb25maWctbWFuYWdlcic7XHJcbmltcG9ydCB7IFBSRURFRklORURfUFJPVklERVJTIH0gZnJvbSAnLi9tb2RlbC1jb25maWcnO1xyXG5cclxuLy8gXHU2QTIxXHU1NzhCXHU3QkExXHU3NDA2XHU0RTNCXHU2QTIxXHU2MDAxXHU2ODQ2XHJcbmV4cG9ydCBjbGFzcyBNb2RlbE1hbmFnZW1lbnRNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgbW9kZWxNYW5hZ2VyOiBOZXdNb2RlbENvbmZpZ01hbmFnZXI7XHJcbiAgICBwcml2YXRlIG9uVXBkYXRlOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtb2RlbE1hbmFnZXI6IE5ld01vZGVsQ29uZmlnTWFuYWdlciwgb25VcGRhdGU6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMubW9kZWxNYW5hZ2VyID0gbW9kZWxNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMub25VcGRhdGUgPSBvblVwZGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdtb2RlbC1tYW5hZ2VtZW50LW1vZGFsJyk7XHJcblxyXG4gICAgICAgIC8vIFx1NjgwN1x1OTg5OFxyXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQUlcdTZBMjFcdTU3OEJcdTdCQTFcdTc0MDYnLCBjbHM6ICdtb2RhbC10aXRsZScgfSk7XHJcbiAgICAgICAgdGl0bGVFbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIHRpdGxlRWwuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XHJcbiAgICAgICAgdGl0bGVFbC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgdGl0bGVFbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XHJcblxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NkEyMVx1NTc4Qlx1NjMwOVx1OTRBRVxyXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHRpdGxlRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NkRGQlx1NTJBMEFJXHU2QTIxXHU1NzhCJywgY2xzOiAnbW9kLWN0YScgfSk7XHJcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xyXG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcclxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZE1vZGFsID0gbmV3IE1vZGVsRm9ybU1vZGFsKHRoaXMuYXBwLCB0aGlzLm1vZGVsTWFuYWdlciwgbnVsbCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTW9kZWxMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgICAgICBhZGRNb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1NkEyMVx1NTc4Qlx1NTIxN1x1ODg2OFx1NUJCOVx1NTY2OFxyXG4gICAgICAgIHRoaXMuY3JlYXRlTW9kZWxMaXN0KGNvbnRlbnRFbCk7XHJcblxyXG4gICAgICAgIC8vIFx1NUU5NVx1OTBFOFx1NjMwOVx1OTRBRVxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAncmlnaHQnO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1MTczXHU5NUVEJyB9KTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVNb2RlbExpc3QoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGVsLWxpc3QtY29udGFpbmVyJyB9KTtcclxuICAgICAgICBsaXN0Q29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICc0MDBweCc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgbGlzdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcclxuICAgICAgICBsaXN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTJweCc7XHJcblxyXG4gICAgICAgIHRoaXMucmVmcmVzaE1vZGVsTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hNb2RlbExpc3QoKSB7XHJcbiAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1saXN0LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmICghbGlzdENvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBsaXN0Q29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1vZGVscyA9IHRoaXMubW9kZWxNYW5hZ2VyLmdldEFsbE1vZGVscygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChtb2RlbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVtcHR5TWVzc2FnZSA9IGxpc3RDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHU2NjgyXHU2NUUwXHU5MTREXHU3RjZFXHU3Njg0XHU2QTIxXHU1NzhCXHVGRjBDXHU3MEI5XHU1MUZCXHU0RTBBXHU2NUI5XCJcdTZERkJcdTUyQTBBSVx1NkEyMVx1NTc4QlwiXHU2MzA5XHU5NEFFXHU1RjAwXHU1OUNCXHU5MTREXHU3RjZFJywgXHJcbiAgICAgICAgICAgICAgICBjbHM6ICdlbXB0eS1tZXNzYWdlJyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVtcHR5TWVzc2FnZS5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgZW1wdHlNZXNzYWdlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcclxuICAgICAgICAgICAgZW1wdHlNZXNzYWdlLnN0eWxlLnBhZGRpbmcgPSAnNDBweCAyMHB4JztcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbW9kZWxzLmZvckVhY2gobW9kZWwgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1vZGVsSXRlbShsaXN0Q29udGFpbmVyLCBtb2RlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVNb2RlbEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbW9kZWw6IE1vZGVsQ29uZmlnKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbUVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGVsLWl0ZW0nIH0pO1xyXG4gICAgICAgIGl0ZW1FbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIGl0ZW1FbC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcclxuICAgICAgICBpdGVtRWwuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG4gICAgICAgIGl0ZW1FbC5zdHlsZS5wYWRkaW5nID0gJzEycHgnO1xyXG4gICAgICAgIGl0ZW1FbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnOHB4JztcclxuICAgICAgICBpdGVtRWwuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIGl0ZW1FbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcclxuICAgICAgICBpdGVtRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XHJcblxyXG4gICAgICAgIC8vIFx1NURFNlx1NEZBN1x1NEZFMVx1NjA2RlxyXG4gICAgICAgIGNvbnN0IGluZm9FbCA9IGl0ZW1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlbC1pbmZvJyB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBuYW1lRWwgPSBpbmZvRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kZWwtbmFtZScgfSk7XHJcbiAgICAgICAgbmFtZUVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgbmFtZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc0cHgnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVxyXG4gICAgICAgIGNvbnN0IHN0YXR1c0ljb24gPSBtb2RlbC5pc1ZlcmlmaWVkID8gJ1x1MjcwNScgOiAnXHUyNzRDJztcclxuICAgICAgICBuYW1lRWwudGV4dENvbnRlbnQgPSBgJHtzdGF0dXNJY29ufSAke21vZGVsLmRpc3BsYXlOYW1lfWA7XHJcblxyXG4gICAgICAgIGNvbnN0IGRldGFpbHNFbCA9IGluZm9FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlbC1kZXRhaWxzJyB9KTtcclxuICAgICAgICBkZXRhaWxzRWwuc3R5bGUuZm9udFNpemUgPSAnMTJweCc7XHJcbiAgICAgICAgZGV0YWlsc0VsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4M0NcdTVGMEZcdTUzMTZ0b2tlblx1NjU3MFx1OTFDRlx1NjYzRVx1NzkzQVxyXG4gICAgICAgIGNvbnN0IGNvbnRleHRUb2tlbnMgPSBtb2RlbC5tYXhDb250ZXh0VG9rZW5zID8gYCR7KG1vZGVsLm1heENvbnRleHRUb2tlbnMgLyAxMDAwKS50b0ZpeGVkKDApfUtgIDogJ04vQSc7XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gbW9kZWwubWF4T3V0cHV0VG9rZW5zID8gYCR7KG1vZGVsLm1heE91dHB1dFRva2VucyAvIDEwMDApLnRvRml4ZWQoMCl9S2AgOiAnTi9BJztcclxuICAgICAgICBcclxuICAgICAgICBkZXRhaWxzRWwudGV4dENvbnRlbnQgPSBgJHttb2RlbC5tb2RlbE5hbWV9IHwgJHtQUkVERUZJTkVEX1BST1ZJREVSU1ttb2RlbC5wcm92aWRlcl0/Lm5hbWUgfHwgbW9kZWwucHJvdmlkZXJ9IHwgXHU0RTBBXHU0RTBCXHU2NTg3OiR7Y29udGV4dFRva2Vuc30gXHU4RjkzXHU1MUZBOiR7b3V0cHV0VG9rZW5zfWA7XHJcblxyXG4gICAgICAgIC8vIFx1NTNGM1x1NEZBN1x1NjMwOVx1OTRBRVxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNFbCA9IGl0ZW1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RlbC1idXR0b25zJyB9KTtcclxuICAgICAgICBidXR0b25zRWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBidXR0b25zRWwuc3R5bGUuZ2FwID0gJzhweCc7XHJcblxyXG4gICAgICAgIC8vIFx1N0YxNlx1OEY5MVx1NjMwOVx1OTRBRVxyXG4gICAgICAgIGNvbnN0IGVkaXRCdXR0b24gPSBidXR0b25zRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1OEJCRVx1N0Y2RScsIGNsczogJ21vZC1zbWFsbCcgfSk7XHJcbiAgICAgICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWRpdE1vZGFsID0gbmV3IE1vZGVsRm9ybU1vZGFsKHRoaXMuYXBwLCB0aGlzLm1vZGVsTWFuYWdlciwgbW9kZWwsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1vZGVsTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICAgICAgZWRpdE1vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gYnV0dG9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTUyMjBcdTk2NjQnLCBjbHM6ICdtb2Qtc21hbGwgbW9kLXdhcm5pbmcnIH0pO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb2RlbE1hbmFnZXIuZGVsZXRlTW9kZWwobW9kZWwuaWQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hNb2RlbExpc3QoKTtcclxuICAgICAgICAgICAgdGhpcy5vblVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVx1ODg2OFx1NTM1NVx1NkEyMVx1NjAwMVx1Njg0NlxyXG5leHBvcnQgY2xhc3MgTW9kZWxGb3JtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwcml2YXRlIG1vZGVsTWFuYWdlcjogTmV3TW9kZWxDb25maWdNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBtb2RlbDogTW9kZWxDb25maWcgfCBudWxsO1xyXG4gICAgcHJpdmF0ZSBvblNhdmU6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGZvcm1EYXRhOiBQYXJ0aWFsPE1vZGVsQ29uZmlnPiA9IHt9O1xyXG4gICAgcHJpdmF0ZSBwYXJlbnRNb2RhbDogTW9kZWxNYW5hZ2VtZW50TW9kYWwgfCBudWxsID0gbnVsbDtcclxuICAgIHByaXZhdGUgYmFzZVVSTElucHV0OiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIG1vZGVsTmFtZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGlzTmV3TW9kZWxWZXJpZmllZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBtb2RlbE1hbmFnZXI6IE5ld01vZGVsQ29uZmlnTWFuYWdlciwgbW9kZWw6IE1vZGVsQ29uZmlnIHwgbnVsbCwgb25TYXZlOiAoKSA9PiB2b2lkLCBwYXJlbnRNb2RhbD86IE1vZGVsTWFuYWdlbWVudE1vZGFsKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLm1vZGVsTWFuYWdlciA9IG1vZGVsTWFuYWdlcjtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgdGhpcy5vblNhdmUgPSBvblNhdmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRNb2RhbCA9IHBhcmVudE1vZGFsIHx8IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU4ODY4XHU1MzU1XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgaWYgKG1vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEgPSB7IC4uLm1vZGVsIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JtRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIG1vZGVsTmFtZTogJycsXHJcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogJ2RlZXBzZWVrJyxcclxuICAgICAgICAgICAgICAgIGJhc2VVUkw6IFBSRURFRklORURfUFJPVklERVJTLmRlZXBzZWVrLmRlZmF1bHRCYXNlVVJMLFxyXG4gICAgICAgICAgICAgICAgYXBpS2V5OiAnJyxcclxuICAgICAgICAgICAgICAgIG1heENvbnRleHRUb2tlbnM6IDMyMDAwLCAgLy8gXHU5RUQ4XHU4QkE0MzJLXHU0RTBBXHU0RTBCXHU2NTg3XHJcbiAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwMDAgICAgIC8vIFx1OUVEOFx1OEJBNDRLXHU4RjkzXHU1MUZBXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ21vZGVsLWZvcm0tbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gXHU2RTA1XHU3QTdBXHU4RjkzXHU1MTY1XHU2ODQ2XHU1RjE1XHU3NTI4XHJcbiAgICAgICAgdGhpcy5iYXNlVVJMSW5wdXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubW9kZWxOYW1lSW5wdXQgPSBudWxsO1xyXG4gICAgICAgIC8vIFx1OTFDRFx1N0Y2RVx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVxyXG4gICAgICAgIHRoaXMuaXNOZXdNb2RlbFZlcmlmaWVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIFx1NjgwN1x1OTg5OFxyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5tb2RlbCA/ICdcdTdGMTZcdThGOTFcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkUnIDogJ1x1NkRGQlx1NTJBMFx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RSc7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGl0bGUsIGNsczogJ21vZGFsLXRpdGxlJyB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU4ODY4XHU1MzU1XHU1QkI5XHU1NjY4XHJcbiAgICAgICAgY29uc3QgZm9ybUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGVsLWZvcm0nIH0pO1xyXG4gICAgICAgIGZvcm1FbC5zdHlsZS5wYWRkaW5nID0gJzIwcHggMCc7XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlRm9ybUZpZWxkcyhmb3JtRWwpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQnV0dG9ucyhjb250ZW50RWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlRm9ybUZpZWxkcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU1NDBEXHU3OUYwXHJcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2NjNFXHU3OTNBXHU1NDBEXHU3OUYwJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NEUzQVx1NkI2NFx1NkEyMVx1NTc4Qlx1OEJCRVx1N0Y2RVx1NEUwMFx1NEUyQVx1ODFFQVx1NUI5QVx1NEU0OVx1NTQwRFx1NzlGMCcpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignXHU0RjhCXHU1OTgyXHVGRjFBXHU2MjExXHU3Njg0RGVlcFNlZWtcdTZBMjFcdTU3OEInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmZvcm1EYXRhLmRpc3BsYXlOYW1lIHx8ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuZGlzcGxheU5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1NkEyMVx1NTc4Qlx1NTc4Qlx1NTNGN1xyXG4gICAgICAgIGNvbnN0IG1vZGVsTmFtZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXIpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTZBMjFcdTU3OEJcdTU3OEJcdTUzRjcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4RjkzXHU1MTY1XHU1MTc3XHU0RjUzXHU3Njg0XHU2QTIxXHU1NzhCXHU1NzhCXHU1M0Y3XHU1NDBEXHU3OUYwJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKHRoaXMuZ2V0TW9kZWxQbGFjZWhvbGRlcigpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmZvcm1EYXRhLm1vZGVsTmFtZSB8fCAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLm1vZGVsTmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbE5hbWVJbnB1dCA9IHRleHQuaW5wdXRFbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFJXHU2M0QwXHU0RjlCXHU1NTQ2XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQUlcdTYzRDBcdTRGOUJcdTU1NDYnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU5MDA5XHU2MkU5QUlcdTY3MERcdTUyQTFcdTYzRDBcdTRGOUJcdTU1NDYnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoUFJFREVGSU5FRF9QUk9WSURFUlMpLmZvckVhY2goKFtrZXksIHByb3ZpZGVyXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihrZXksIHByb3ZpZGVyLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMuZm9ybURhdGEucHJvdmlkZXIgfHwgJ2RlZXBzZWVrJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnByb3ZpZGVyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuYmFzZVVSTCA9IFBSRURFRklORURfUFJPVklERVJTW3ZhbHVlXT8uZGVmYXVsdEJhc2VVUkwgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NzZGNFx1NjNBNVx1NjZGNFx1NjVCMFx1NzZGOFx1NTE3M1x1NUI1N1x1NkJCNVx1RkYwQ1x1ODAwQ1x1NEUwRFx1NjYyRlx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1NjU3NFx1NEUyQVx1ODg2OFx1NTM1NVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb3ZpZGVyUmVsYXRlZEZpZWxkcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU1N0ZBXHU3ODQwVVJMXHJcbiAgICAgICAgY29uc3QgYmFzZVVSTFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXIpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTU3RkFcdTc4NDBVUkwnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQVBJXHU2NzBEXHU1MkExXHU3Njg0XHU1N0ZBXHU3ODQwVVJMXHU1NzMwXHU1NzQwJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdodHRwczovL2FwaS5leGFtcGxlLmNvbS92MScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuZm9ybURhdGEuYmFzZVVSTCB8fCAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLmJhc2VVUkwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFzZVVSTElucHV0ID0gdGV4dC5pbnB1dEVsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQVBJXHU1QkM2XHU5NEE1XHJcbiAgICAgICAgY29uc3QgYXBpS2V5U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0FQSVx1NUJDNlx1OTRBNScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdThGOTNcdTUxNjVcdTYwQThcdTc2ODRBUElcdTVCQzZcdTk0QTUnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoJ3NrLS4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuZm9ybURhdGEuYXBpS2V5IHx8ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuYXBpS2V5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9ICdwYXNzd29yZCc7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTY3MDBcdTU5MjdcdTRFMEFcdTRFMEJcdTY1ODdcdTk1N0ZcdTVFQTZcclxuICAgICAgICBjb25zdCBtYXhDb250ZXh0U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjcwMFx1NTkyN1x1NEUwQVx1NEUwQlx1NjU4N1x1OTU3Rlx1NUVBNicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTZBMjFcdTU3OEJcdTY1MkZcdTYzMDFcdTc2ODRcdTY3MDBcdTU5MjdcdTRFMEFcdTRFMEJcdTY1ODdcdTRFRTRcdTcyNENcdTY1NzBcdUZGMDhcdTRGOEJcdTU5ODJcdUZGMUEzMjAwMFx1ODg2OFx1NzkzQTMyS1x1RkYwOScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignMzIwMDAnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmZvcm1EYXRhLm1heENvbnRleHRUb2tlbnM/LnRvU3RyaW5nKCkgfHwgJzMyMDAwJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1WYWx1ZSA9IHBhcnNlSW50KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihudW1WYWx1ZSkgJiYgbnVtVmFsdWUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLm1heENvbnRleHRUb2tlbnMgPSBudW1WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJztcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5taW4gPSAnMTAwMCc7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3RlcCA9ICcxMDAwJztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1NjcwMFx1NTkyN1x1OEY5M1x1NTFGQVx1NEVFNFx1NzI0Q1x1NjU3MFxyXG4gICAgICAgIGNvbnN0IG1heE91dHB1dFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXIpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTY3MDBcdTU5MjdcdThGOTNcdTUxRkFcdTRFRTRcdTcyNENcdTY1NzAnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2QTIxXHU1NzhCXHU1MzU1XHU2QjIxXHU4RjkzXHU1MUZBXHU3Njg0XHU2NzAwXHU1OTI3XHU0RUU0XHU3MjRDXHU2NTcwXHVGRjA4XHU0RjhCXHU1OTgyXHVGRjFBNDAwMFx1ODg2OFx1NzkzQTRLXHVGRjA5JylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCc0MDAwJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5mb3JtRGF0YS5tYXhPdXRwdXRUb2tlbnM/LnRvU3RyaW5nKCkgfHwgJzQwMDAnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bVZhbHVlID0gcGFyc2VJbnQodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKG51bVZhbHVlKSAmJiBudW1WYWx1ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEubWF4T3V0cHV0VG9rZW5zID0gbnVtVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gJ251bWJlcic7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwubWluID0gJzEwMCc7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3RlcCA9ICcxMDAnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUJ1dHRvbnMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzEwcHgnO1xyXG5cclxuICAgICAgICAvLyBcdTVERTZcdTRGQTdcdUZGMUFcdTlBOENcdThCQzFcdTYzMDlcdTk0QUVcclxuICAgICAgICBjb25zdCBsZWZ0QnV0dG9ucyA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jyk7XHJcbiAgICAgICAgY29uc3QgdmVyaWZ5QnV0dG9uID0gbGVmdEJ1dHRvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1OUE4Q1x1OEJDMScsIGNsczogJ21vZC1jdGEgdmVyaWZ5LW1vZGVsLWJ0bicgfSk7XHJcbiAgICAgICAgdmVyaWZ5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy52ZXJpZnlNb2RlbCgpKTtcclxuXHJcbiAgICAgICAgLy8gXHU1M0YzXHU0RkE3XHVGRjFBXHU0RkREXHU1QjU4XHU1NDhDXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgY29uc3QgcmlnaHRCdXR0b25zID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnKTtcclxuICAgICAgICByaWdodEJ1dHRvbnMuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICByaWdodEJ1dHRvbnMuc3R5bGUuZ2FwID0gJzEwcHgnO1xyXG5cclxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gcmlnaHRCdXR0b25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTRGRERcdTVCNTgnLCBjbHM6ICdtb2QtY3RhJyB9KTtcclxuICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zYXZlTW9kZWwoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHJpZ2h0QnV0dG9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyB9KTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0TW9kZWxQbGFjZWhvbGRlcigpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5mb3JtRGF0YS5wcm92aWRlciB8fCAnZGVlcHNlZWsnO1xyXG4gICAgICAgIHJldHVybiBQUkVERUZJTkVEX1BST1ZJREVSU1twcm92aWRlcl0/Lm1vZGVsUGxhY2Vob2xkZXIgfHwgJ1x1OEY5M1x1NTE2NVx1NkEyMVx1NTc4Qlx1NTc4Qlx1NTNGNyc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVQcm92aWRlclJlbGF0ZWRGaWVsZHMoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwYmFzZVVSTFx1OEY5M1x1NTE2NVx1Njg0Nlx1NzY4NFx1NTAzQ1xyXG4gICAgICAgIGlmICh0aGlzLmJhc2VVUkxJbnB1dCkge1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VVUkxJbnB1dC52YWx1ZSA9IHRoaXMuZm9ybURhdGEuYmFzZVVSTCB8fCAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NkEyMVx1NTc4Qlx1NTQwRFx1NzlGMFx1OEY5M1x1NTE2NVx1Njg0Nlx1NzY4NHBsYWNlaG9sZGVyXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWxOYW1lSW5wdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbE5hbWVJbnB1dC5wbGFjZWhvbGRlciA9IHRoaXMuZ2V0TW9kZWxQbGFjZWhvbGRlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHZlcmlmeU1vZGVsKCkge1xyXG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0ZUZvcm0oKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBcdTkwMUFcdThGQzdcdTdDN0JcdTU0MERcdTgzQjdcdTUzRDZcdTlBOENcdThCQzFcdTYzMDlcdTk0QUVcclxuICAgICAgICBjb25zdCB2ZXJpZnlCdXR0b24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcudmVyaWZ5LW1vZGVsLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGlmICh2ZXJpZnlCdXR0b24pIHtcclxuICAgICAgICAgICAgdmVyaWZ5QnV0dG9uLnRleHRDb250ZW50ID0gJ1x1OUE4Q1x1OEJDMVx1NEUyRC4uLic7XHJcbiAgICAgICAgICAgIHZlcmlmeUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1NzNCMFx1NjcwOVx1NkEyMVx1NTc4Qlx1RkYwQ1x1NTE0OFx1NjZGNFx1NjVCMFx1OTE0RFx1N0Y2RVx1NTE4RFx1OUE4Q1x1OEJDMVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb2RlbE1hbmFnZXIudXBkYXRlTW9kZWwodGhpcy5tb2RlbC5pZCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB0aGlzLmZvcm1EYXRhLmRpc3BsYXlOYW1lISxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IHRoaXMuZm9ybURhdGEubW9kZWxOYW1lISxcclxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogdGhpcy5mb3JtRGF0YS5wcm92aWRlciEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5mb3JtRGF0YS5iYXNlVVJMISxcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXk6IHRoaXMuZm9ybURhdGEuYXBpS2V5ISxcclxuICAgICAgICAgICAgICAgICAgICBtYXhDb250ZXh0VG9rZW5zOiB0aGlzLmZvcm1EYXRhLm1heENvbnRleHRUb2tlbnMgfHwgMzIwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiB0aGlzLmZvcm1EYXRhLm1heE91dHB1dFRva2VucyB8fCA0MDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzVmVyaWZpZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWxNYW5hZ2VyLnZlcmlmeU1vZGVsKHRoaXMubW9kZWwuaWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU2NUIwXHU2QTIxXHU1NzhCXHVGRjBDXHU3NkY0XHU2M0E1XHU2RDRCXHU4QkQ1XHU5MTREXHU3RjZFXHU4MDBDXHU0RTBEXHU1MjFCXHU1RUZBXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLm1vZGVsTWFuYWdlci50ZXN0TW9kZWxDb25maWcoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB0aGlzLmZvcm1EYXRhLmRpc3BsYXlOYW1lISxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IHRoaXMuZm9ybURhdGEubW9kZWxOYW1lISxcclxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogdGhpcy5mb3JtRGF0YS5wcm92aWRlciEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5mb3JtRGF0YS5iYXNlVVJMISxcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXk6IHRoaXMuZm9ybURhdGEuYXBpS2V5ISxcclxuICAgICAgICAgICAgICAgICAgICBtYXhDb250ZXh0VG9rZW5zOiB0aGlzLmZvcm1EYXRhLm1heENvbnRleHRUb2tlbnMgfHwgMzIwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiB0aGlzLmZvcm1EYXRhLm1heE91dHB1dFRva2VucyB8fCA0MDAwXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgXHU2QTIxXHU1NzhCXHU5QThDXHU4QkMxXHU2MjEwXHU1MjlGXHVGRjAxJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU3M0IwXHU2NzA5XHU2QTIxXHU1NzhCXHVGRjBDXHU2NkY0XHU2NUIwXHU1RjUzXHU1MjREXHU3RjE2XHU4RjkxXHU3NTRDXHU5NzYyXHU0RTJEXHU3Njg0XHU2QTIxXHU1NzhCXHU1QkY5XHU4QzYxXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5pc1ZlcmlmaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLmRpc3BsYXlOYW1lID0gdGhpcy5mb3JtRGF0YS5kaXNwbGF5TmFtZSE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5tb2RlbE5hbWUgPSB0aGlzLmZvcm1EYXRhLm1vZGVsTmFtZSE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5wcm92aWRlciA9IHRoaXMuZm9ybURhdGEucHJvdmlkZXIhO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuYmFzZVVSTCA9IHRoaXMuZm9ybURhdGEuYmFzZVVSTCE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5hcGlLZXkgPSB0aGlzLmZvcm1EYXRhLmFwaUtleSE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5tYXhDb250ZXh0VG9rZW5zID0gdGhpcy5mb3JtRGF0YS5tYXhDb250ZXh0VG9rZW5zIHx8IDMyMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwubWF4T3V0cHV0VG9rZW5zID0gdGhpcy5mb3JtRGF0YS5tYXhPdXRwdXRUb2tlbnMgfHwgNDAwMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU2NUIwXHU2QTIxXHU1NzhCXHVGRjBDXHU2ODA3XHU4QkIwXHU5QThDXHU4QkMxXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc05ld01vZGVsVmVyaWZpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTlBOENcdThCQzFcdTYyMTBcdTUyOUZcdTU0MEVcdTUyMzdcdTY1QjBcdTcyMzZcdTc1NENcdTk3NjJcdTc2ODRcdTZBMjFcdTU3OEJcdTUyMTdcdTg4NjhcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudE1vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRNb2RhbC5yZWZyZXNoTW9kZWxMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgXHU2QTIxXHU1NzhCXHU5QThDXHU4QkMxXHU1OTMxXHU4RDI1XHVGRjFBJHtyZXN1bHQuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QkY5XHU0RThFXHU3M0IwXHU2NzA5XHU2QTIxXHU1NzhCXHVGRjBDXHU2NkY0XHU2NUIwXHU5QThDXHU4QkMxXHU3MkI2XHU2MDAxXHU0RTNBXHU1OTMxXHU4RDI1XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5pc1ZlcmlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1NTkzMVx1OEQyNVx1NjVGNlx1OTFDRFx1N0Y2RVx1NjgwN1x1NUZEN1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNOZXdNb2RlbFZlcmlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3NEMgXHU5QThDXHU4QkMxXHU4RkM3XHU3QTBCXHU0RTJEXHU1M0QxXHU3NTFGXHU5NTE5XHU4QkVGXHVGRjFBJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU1MUZBXHU5NTE5XHU2NUY2XHVGRjBDXHU2NkY0XHU2NUIwXHU5QThDXHU4QkMxXHU3MkI2XHU2MDAxXHU0RTNBXHU1OTMxXHU4RDI1XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLmlzVmVyaWZpZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNOZXdNb2RlbFZlcmlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAvLyBcdThGRDhcdTUzOUZcdTlBOENcdThCQzFcdTYzMDlcdTk0QUVcdTcyQjZcdTYwMDFcclxuICAgICAgICAgICAgY29uc3QgdmVyaWZ5QnV0dG9uID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnZlcmlmeS1tb2RlbC1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKHZlcmlmeUJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgdmVyaWZ5QnV0dG9uLnRleHRDb250ZW50ID0gJ1x1OUE4Q1x1OEJDMSc7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZnlCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNhdmVNb2RlbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGVGb3JtKCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NzNCMFx1NjcwOVx1NkEyMVx1NTc4QiAtIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOVx1NTE3M1x1OTUyRVx1OTE0RFx1N0Y2RVx1NTNEOFx1NTMxNlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxNb2RlbCA9IHRoaXMubW9kZWxNYW5hZ2VyLmdldE1vZGVsQnlJZCh0aGlzLm1vZGVsLmlkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc0tleUNoYW5nZXMgPSBvcmlnaW5hbE1vZGVsICYmIChcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1vZGVsLm1vZGVsTmFtZSAhPT0gdGhpcy5mb3JtRGF0YS5tb2RlbE5hbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1vZGVsLnByb3ZpZGVyICE9PSB0aGlzLmZvcm1EYXRhLnByb3ZpZGVyIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNb2RlbC5iYXNlVVJMICE9PSB0aGlzLmZvcm1EYXRhLmJhc2VVUkwgfHxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1vZGVsLmFwaUtleSAhPT0gdGhpcy5mb3JtRGF0YS5hcGlLZXlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NTE3M1x1OTUyRVx1NTNEOFx1NTMxNlx1NEUxNFx1NUY1M1x1NTI0RFx1NkEyMVx1NTc4Qlx1NUJGOVx1OEM2MVx1NzY4NFx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVx1NkNBMVx1NjcwOVx1NjZGNFx1NjVCMFx1RkYwQ1x1NTIxOVx1OTFDRFx1N0Y2RVx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVxyXG4gICAgICAgICAgICAgICAgbGV0IGZpbmFsVmVyaWZpZWRTdGF0dXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzS2V5Q2hhbmdlcyAmJiB0aGlzLm1vZGVsLmlzVmVyaWZpZWQgPT09IG9yaWdpbmFsTW9kZWw/LmlzVmVyaWZpZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTkxNERcdTdGNkVcdTUzRDhcdTUzMTZcdTRFODZcdTRGNDZcdTZDQTFcdTY3MDlcdTkxQ0RcdTY1QjBcdTlBOENcdThCQzFcdUZGMENcdTkxQ0RcdTdGNkVcdTlBOENcdThCQzFcdTcyQjZcdTYwMDFcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbFZlcmlmaWVkU3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFx1NUY1M1x1NTI0RFx1NkEyMVx1NTc4Qlx1NUJGOVx1OEM2MVx1NzY4NFx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVx1RkYwOFx1NTNFRlx1ODBGRFx1NTcyOFx1OUE4Q1x1OEJDMVx1NjVCOVx1NkNENVx1NEUyRFx1NURGMlx1NjZGNFx1NjVCMFx1RkYwOVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsVmVyaWZpZWRTdGF0dXMgPSB0aGlzLm1vZGVsLmlzVmVyaWZpZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9kZWxNYW5hZ2VyLnVwZGF0ZU1vZGVsKHRoaXMubW9kZWwuaWQsIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdGhpcy5mb3JtRGF0YS5kaXNwbGF5TmFtZSEsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxOYW1lOiB0aGlzLmZvcm1EYXRhLm1vZGVsTmFtZSEsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6IHRoaXMuZm9ybURhdGEucHJvdmlkZXIhLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVUkw6IHRoaXMuZm9ybURhdGEuYmFzZVVSTCEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5OiB0aGlzLmZvcm1EYXRhLmFwaUtleSEsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4Q29udGV4dFRva2VuczogdGhpcy5mb3JtRGF0YS5tYXhDb250ZXh0VG9rZW5zIHx8IDMyMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogdGhpcy5mb3JtRGF0YS5tYXhPdXRwdXRUb2tlbnMgfHwgNDAwMCxcclxuICAgICAgICAgICAgICAgICAgICBpc1ZlcmlmaWVkOiBmaW5hbFZlcmlmaWVkU3RhdHVzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NkEyMVx1NTc4QiAtIFx1NEY3Rlx1NzUyOFx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVx1NjgwN1x1NUZEN1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZWxJZCA9IGF3YWl0IHRoaXMubW9kZWxNYW5hZ2VyLmFkZE1vZGVsKHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdGhpcy5mb3JtRGF0YS5kaXNwbGF5TmFtZSEsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxOYW1lOiB0aGlzLmZvcm1EYXRhLm1vZGVsTmFtZSEsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6IHRoaXMuZm9ybURhdGEucHJvdmlkZXIhLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVUkw6IHRoaXMuZm9ybURhdGEuYmFzZVVSTCEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5OiB0aGlzLmZvcm1EYXRhLmFwaUtleSEsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4Q29udGV4dFRva2VuczogdGhpcy5mb3JtRGF0YS5tYXhDb250ZXh0VG9rZW5zIHx8IDMyMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogdGhpcy5mb3JtRGF0YS5tYXhPdXRwdXRUb2tlbnMgfHwgNDAwMFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjVCMFx1NkEyMVx1NTc4Qlx1NURGMlx1N0VDRlx1OUE4Q1x1OEJDMVx1OEZDN1x1RkYwQ1x1NjZGNFx1NjVCMFx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNOZXdNb2RlbFZlcmlmaWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb2RlbE1hbmFnZXIudXBkYXRlTW9kZWwobW9kZWxJZCwgeyBpc1ZlcmlmaWVkOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTYyMTBcdTUyOUZcdTU0MEVcdTUyMzdcdTY1QjBcdTcyMzZcdTc1NENcdTk3NjJcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50TW9kYWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50TW9kYWwucmVmcmVzaE1vZGVsTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLm9uU2F2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU0RkREXHU1QjU4XHU1OTMxXHU4RDI1XHVGRjFBJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlRm9ybSgpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCByZXF1aXJlZCA9IFsnZGlzcGxheU5hbWUnLCAnbW9kZWxOYW1lJywgJ3Byb3ZpZGVyJywgJ2Jhc2VVUkwnLCAnYXBpS2V5J107XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiByZXF1aXJlZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGFbZmllbGRdPy50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdcdTY2M0VcdTc5M0FcdTU0MERcdTc5RjAnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsTmFtZTogJ1x1NkEyMVx1NTc4Qlx1NTc4Qlx1NTNGNycsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6ICdBSVx1NjNEMFx1NEY5Qlx1NTU0NicsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVVSTDogJ1x1NTdGQVx1Nzg0MFVSTCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5OiAnQVBJXHU1QkM2XHU5NEE1J1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFx1OEJGN1x1NTg2Qlx1NTE5OSR7ZmllbGROYW1lc1tmaWVsZF19YCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1OUE4Q1x1OEJDMXRva2VuXHU1M0MyXHU2NTcwXHJcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1EYXRhLm1heENvbnRleHRUb2tlbnMgfHwgdGhpcy5mb3JtRGF0YS5tYXhDb250ZXh0VG9rZW5zIDwgMTAwMCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY3MDBcdTU5MjdcdTRFMEFcdTRFMEJcdTY1ODdcdTk1N0ZcdTVFQTZcdTRFMERcdTgwRkRcdTVDMTFcdTRFOEUxMDAwJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5tYXhPdXRwdXRUb2tlbnMgfHwgdGhpcy5mb3JtRGF0YS5tYXhPdXRwdXRUb2tlbnMgPCAxMDApIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzAwXHU1OTI3XHU4RjkzXHU1MUZBXHU0RUU0XHU3MjRDXHU2NTcwXHU0RTBEXHU4MEZEXHU1QzExXHU0RThFMTAwJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2RTA1XHU3QTdBXHU4RjkzXHU1MTY1XHU2ODQ2XHU1RjE1XHU3NTI4XHJcbiAgICAgICAgdGhpcy5iYXNlVVJMSW5wdXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubW9kZWxOYW1lSW5wdXQgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEJcdTkwMDlcdTYyRTlcdTU2NjhcdTdFQzRcdTRFRjZcclxuZXhwb3J0IGNsYXNzIERlZmF1bHRNb2RlbFNlbGVjdG9yIHtcclxuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgbW9kZWxNYW5hZ2VyOiBOZXdNb2RlbENvbmZpZ01hbmFnZXI7XHJcbiAgICBwcml2YXRlIHNlbGVjdEVsOiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgb25Nb2RlbENoYW5nZTogKG1vZGVsSWQ6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgXHJcbiAgICAgICAgbW9kZWxNYW5hZ2VyOiBOZXdNb2RlbENvbmZpZ01hbmFnZXIsIFxyXG4gICAgICAgIG9uTW9kZWxDaGFuZ2U6IChtb2RlbElkOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLm1vZGVsTWFuYWdlciA9IG1vZGVsTWFuYWdlcjtcclxuICAgICAgICB0aGlzLm9uTW9kZWxDaGFuZ2UgPSBvbk1vZGVsQ2hhbmdlO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIC8vIFx1NkUwNVx1N0E3QVx1NUJCOVx1NTY2OFxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OTAwOVx1NjJFOVx1NTY2OFxyXG4gICAgICAgIHRoaXMuc2VsZWN0RWwgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdkcm9wZG93bicgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICB0aGlzLnNlbGVjdEVsLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcclxuICAgICAgICB0aGlzLnNlbGVjdEVsLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RWwuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsdWUgPSB0aGlzLnNlbGVjdEVsLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbElkID0gc2VsZWN0ZWRWYWx1ZSA9PT0gJycgPyBudWxsIDogc2VsZWN0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChtb2RlbElkKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vZGVsTWFuYWdlci5zZXREZWZhdWx0TW9kZWwobW9kZWxJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMub25Nb2RlbENoYW5nZShtb2RlbElkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVPcHRpb25zKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RFbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBcdTZFMDVcdTdBN0FcdTczQjBcdTY3MDlcdTkwMDlcdTk4NzlcclxuICAgICAgICB0aGlzLnNlbGVjdEVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTlFRDhcdThCQTRcdTkwMDlcdTk4NzlcclxuICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9uID0gdGhpcy5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogJycsIHRleHQ6ICdcdThCRjdcdTkwMDlcdTYyRTlcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEInIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVERjJcdTlBOENcdThCQzFcdTc2ODRcdTZBMjFcdTU3OEJcclxuICAgICAgICBjb25zdCB2ZXJpZmllZE1vZGVscyA9IHRoaXMubW9kZWxNYW5hZ2VyLmdldFZlcmlmaWVkTW9kZWxzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHZlcmlmaWVkTW9kZWxzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBub01vZGVsT3B0aW9uID0gdGhpcy5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywgeyBcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAnJywgXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHU2NjgyXHU2NUUwXHU1M0VGXHU3NTI4XHU2QTIxXHU1NzhCXHVGRjA4XHU4QkY3XHU1MTQ4XHU2REZCXHU1MkEwXHU1RTc2XHU5QThDXHU4QkMxXHU2QTIxXHU1NzhCXHVGRjA5JyBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5vTW9kZWxPcHRpb24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEVsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2ZXJpZmllZE1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMuc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1vZGVsLmlkLCBcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtb2RlbC5kaXNwbGF5TmFtZSBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NzY4NFx1NTAzQ1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRNb2RlbElkID0gdGhpcy5tb2RlbE1hbmFnZXIuZ2V0RGVmYXVsdE1vZGVsSWQoKTtcclxuICAgICAgICBpZiAoZGVmYXVsdE1vZGVsSWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RFbC52YWx1ZSA9IGRlZmF1bHRNb2RlbElkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTU5MTZcdTkwRThcdThDMDNcdTc1MjhcdTRFRTVcdTY2RjRcdTY1QjBcdTkwMDlcdTk4NzlcclxuICAgIHJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVPcHRpb25zKCk7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8vIFx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVx1N0JBMVx1NzQwNlx1NjU4N1x1NEVGNlxyXG4vLyBcdTc1MjhcdTRFOEVcdTVCNThcdTUwQThcdTU0OENcdTdCQTFcdTc0MDZBSVx1NkEyMVx1NTc4Qlx1NzY4NFx1OTE0RFx1N0Y2RVx1NEZFMVx1NjA2RlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNb2RlbENvbmZpZyB7XHJcbiAgICBpZDogc3RyaW5nOyAgICAgICAgICAgICAgLy8gXHU1NTJGXHU0RTAwXHU2ODA3XHU4QkM2XHU3QjI2XHJcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nOyAgICAgLy8gXHU2NjNFXHU3OTNBXHU1NDBEXHU3OUYwXHVGRjA4XHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU3Njg0XHU1OTE2XHU1M0Y3XHVGRjA5XHJcbiAgICBtb2RlbE5hbWU6IHN0cmluZzsgICAgICAgLy8gXHU1QjlFXHU5NjQ1XHU3Njg0XHU2QTIxXHU1NzhCXHU1NzhCXHU1M0Y3XHJcbiAgICBwcm92aWRlcjogc3RyaW5nOyAgICAgICAgLy8gQUlcdTYzRDBcdTRGOUJcdTU1NDZcclxuICAgIGJhc2VVUkw6IHN0cmluZzsgICAgICAgICAvLyBcdTU3RkFcdTc4NDBVUkxcclxuICAgIGFwaUtleTogc3RyaW5nOyAgICAgICAgICAvLyBBUElcdTVCQzZcdTk0QTVcclxuICAgIG1heENvbnRleHRUb2tlbnM6IG51bWJlcjsgLy8gXHU2NzAwXHU1OTI3XHU0RTBBXHU0RTBCXHU2NTg3XHU5NTdGXHU1RUE2XHVGRjA4XHU1MzU1XHU0RjREXHVGRjFBdG9rZW5cdUZGMDlcclxuICAgIG1heE91dHB1dFRva2VuczogbnVtYmVyOyAgLy8gXHU2NzAwXHU1OTI3XHU4RjkzXHU1MUZBXHU0RUU0XHU3MjRDXHU2NTcwXHU5MUNGXHVGRjA4XHU1MzU1XHU0RjREXHVGRjFBdG9rZW5cdUZGMDlcclxuICAgIGlzVmVyaWZpZWQ6IGJvb2xlYW47ICAgICAvLyBcdTY2MkZcdTU0MjZcdTVERjJcdTlBOENcdThCQzFcdTkwMUFcdThGQzdcclxuICAgIGNyZWF0ZWRBdDogbnVtYmVyOyAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1RjZcdTk1RjRcdTYyMzNcclxuICAgIGxhc3RNb2RpZmllZDogbnVtYmVyOyAgICAvLyBcdTY3MDBcdTU0MEVcdTRGRUVcdTY1MzlcdTY1RjZcdTk1RjRcdTYyMzNcclxufVxyXG5cclxuLy8gXHU5ODg0XHU1QjlBXHU0RTQ5XHU3Njg0QUlcdTYzRDBcdTRGOUJcdTU1NDZcdTkxNERcdTdGNkVcclxuZXhwb3J0IGNvbnN0IFBSRURFRklORURfUFJPVklERVJTID0ge1xyXG4gICAgZGVlcHNlZWs6IHtcclxuICAgICAgICBuYW1lOiAnRGVlcFNlZWsnLFxyXG4gICAgICAgIGRlZmF1bHRCYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZGVlcHNlZWsuY29tL3YxJyxcclxuICAgICAgICBjb21tb25Nb2RlbHM6IFsnZGVlcHNlZWstY2hhdCcsICdkZWVwc2Vlay1jb2RlciddLFxyXG4gICAgICAgIG1vZGVsUGxhY2Vob2xkZXI6ICdcdTRGOEJcdTU5ODJcdUZGMUFkZWVwc2Vlay1jaGF0J1xyXG4gICAgfSxcclxuICAgIHpoaXB1OiB7XHJcbiAgICAgICAgbmFtZTogJ1x1NjY3QVx1OEMzMUFJJyxcclxuICAgICAgICBkZWZhdWx0QmFzZVVSTDogJ2h0dHBzOi8vb3Blbi5iaWdtb2RlbC5jbi9hcGkvcGFhcy92NCcsXHJcbiAgICAgICAgY29tbW9uTW9kZWxzOiBbJ2dsbS00LXBsdXMnLCAnZ2xtLTQnLCAnZ2xtLTQtYWlyJywgJ2dsbS00LWZsYXNoJ10sXHJcbiAgICAgICAgbW9kZWxQbGFjZWhvbGRlcjogJ1x1NEY4Qlx1NTk4Mlx1RkYxQWdsbS00LXBsdXMnXHJcbiAgICB9LFxyXG4gICAgcXdlbjoge1xyXG4gICAgICAgIG5hbWU6ICdcdTkwMUFcdTRFNDlcdTUzNDNcdTk1RUUnLFxyXG4gICAgICAgIGRlZmF1bHRCYXNlVVJMOiAnaHR0cHM6Ly9kYXNoc2NvcGUuYWxpeXVuY3MuY29tL2NvbXBhdGlibGUtbW9kZS92MScsXHJcbiAgICAgICAgY29tbW9uTW9kZWxzOiBbJ3F3ZW4tcGx1cycsICdxd2VuLXR1cmJvJywgJ3F3ZW4tbWF4JywgJ3F3ZW4tbWF4LWxvbmdjb250ZXh0J10sXHJcbiAgICAgICAgbW9kZWxQbGFjZWhvbGRlcjogJ1x1NEY4Qlx1NTk4Mlx1RkYxQXF3ZW4tcGx1cydcclxuICAgIH0sXHJcbiAgICBvcGVucm91dGVyOiB7XHJcbiAgICAgICAgbmFtZTogJ09wZW5Sb3V0ZXInLFxyXG4gICAgICAgIGRlZmF1bHRCYXNlVVJMOiAnaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MScsXHJcbiAgICAgICAgY29tbW9uTW9kZWxzOiBbJ2FudGhyb3BpYy9jbGF1ZGUtMy41LXNvbm5ldCcsICdvcGVuYWkvZ3B0LTRvJywgJ21ldGEtbGxhbWEvbGxhbWEtMy4xLTQwNWItaW5zdHJ1Y3QnXSxcclxuICAgICAgICBtb2RlbFBsYWNlaG9sZGVyOiAnXHU0RjhCXHU1OTgyXHVGRjFBYW50aHJvcGljL2NsYXVkZS0zLjUtc29ubmV0J1xyXG4gICAgfSxcclxuICAgIGN1c3RvbToge1xyXG4gICAgICAgIG5hbWU6ICdcdTgxRUFcdTVCOUFcdTRFNDlcdTZBMjFcdTU3OEInLFxyXG4gICAgICAgIGRlZmF1bHRCYXNlVVJMOiAnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MScsXHJcbiAgICAgICAgY29tbW9uTW9kZWxzOiBbJ2dwdC00bycsICdncHQtNG8tbWluaScsICdncHQtMy41LXR1cmJvJ10sXHJcbiAgICAgICAgbW9kZWxQbGFjZWhvbGRlcjogJ1x1NEY4Qlx1NTk4Mlx1RkYxQWdwdC00bydcclxuICAgIH1cclxufTtcclxuXHJcbi8vIFx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVx1N0JBMVx1NzQwNlx1N0M3QlxyXG5leHBvcnQgY2xhc3MgTW9kZWxDb25maWdNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgbW9kZWxzOiBNb2RlbENvbmZpZ1tdID0gW107XHJcbiAgICBwcml2YXRlIGRlZmF1bHRNb2RlbElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmxvYWRGcm9tU3RvcmFnZSgpO1xyXG4gICAgICAgIHRoaXMubWlncmF0ZU9sZENvbmZpZ3MoKTsgLy8gXHU4RkMxXHU3OUZCXHU2NUU3XHU5MTREXHU3RjZFXHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU0RUNFXHU1QjU4XHU1MEE4XHU0RTJEXHU1MkEwXHU4RjdEXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHJcbiAgICBwcml2YXRlIGxvYWRGcm9tU3RvcmFnZSgpOiB2b2lkIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZE1vZGVscyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnaXQtYXV0by1jb21taXQtbW9kZWxzJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkRGVmYXVsdE1vZGVsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dpdC1hdXRvLWNvbW1pdC1kZWZhdWx0LW1vZGVsJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoc2F2ZWRNb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWxzID0gSlNPTi5wYXJzZShzYXZlZE1vZGVscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChzYXZlZERlZmF1bHRNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0TW9kZWxJZCA9IHNhdmVkRGVmYXVsdE1vZGVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1MkEwXHU4RjdEXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbHMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0TW9kZWxJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NEZERFx1NUI1OFx1NTIzMFx1NUI1OFx1NTBBOFxyXG4gICAgcHJpdmF0ZSBzYXZlVG9TdG9yYWdlKCk6IHZvaWQge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnaXQtYXV0by1jb21taXQtbW9kZWxzJywgSlNPTi5zdHJpbmdpZnkodGhpcy5tb2RlbHMpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVmYXVsdE1vZGVsSWQpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnaXQtYXV0by1jb21taXQtZGVmYXVsdC1tb2RlbCcsIHRoaXMuZGVmYXVsdE1vZGVsSWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2dpdC1hdXRvLWNvbW1pdC1kZWZhdWx0LW1vZGVsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRGRERcdTVCNThcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdThGQzFcdTc5RkJcdTY1RTdcdTkxNERcdTdGNkVcdUZGMENcdTRFM0FcdTZDQTFcdTY3MDl0b2tlblx1NTNDMlx1NjU3MFx1NzY4NFx1NkEyMVx1NTc4Qlx1NkRGQlx1NTJBMFx1OUVEOFx1OEJBNFx1NTAzQ1xyXG4gICAgcHJpdmF0ZSBtaWdyYXRlT2xkQ29uZmlncygpOiB2b2lkIHtcclxuICAgICAgICBsZXQgbmVlZHNTYXZlID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiB0aGlzLm1vZGVscykge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1vZGVsLm1heENvbnRleHRUb2tlbnMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5tYXhDb250ZXh0VG9rZW5zID0gMzIwMDA7IC8vIFx1OUVEOFx1OEJBNDMyS1x1NEUwQVx1NEUwQlx1NjU4N1xyXG4gICAgICAgICAgICAgICAgbmVlZHNTYXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1vZGVsLm1heE91dHB1dFRva2VucyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIG1vZGVsLm1heE91dHB1dFRva2VucyA9IDQwMDA7IC8vIFx1OUVEOFx1OEJBNDRLXHU4RjkzXHU1MUZBXHJcbiAgICAgICAgICAgICAgICBuZWVkc1NhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChuZWVkc1NhdmUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dpdCBBdXRvIENvbW1pdCAtIFx1OEZDMVx1NzlGQlx1NEU4NicsIHRoaXMubW9kZWxzLmxlbmd0aCwgJ1x1NEUyQVx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RScpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU3NTFGXHU2MjEwXHU1NTJGXHU0RTAwSURcclxuICAgIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnbW9kZWxfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU2QTIxXHU1NzhCXHJcbiAgICBhZGRNb2RlbChjb25maWc6IE9taXQ8TW9kZWxDb25maWcsICdpZCcgfCAnaXNWZXJpZmllZCcgfCAnY3JlYXRlZEF0JyB8ICdsYXN0TW9kaWZpZWQnPik6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCBuZXdNb2RlbDogTW9kZWxDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcclxuICAgICAgICAgICAgLi4uY29uZmlnLFxyXG4gICAgICAgICAgICBpc1ZlcmlmaWVkOiBmYWxzZSxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBub3csXHJcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogbm93XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2RlbHMucHVzaChuZXdNb2RlbCk7XHJcbiAgICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ld01vZGVsLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVxyXG4gICAgdXBkYXRlTW9kZWwoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PE1vZGVsQ29uZmlnLCAnaWQnIHwgJ2NyZWF0ZWRBdCc+Pik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5tb2RlbHMuZmluZEluZGV4KG1vZGVsID0+IG1vZGVsLmlkID09PSBpZCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLm1vZGVsc1tpbmRleF0gPSB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMubW9kZWxzW2luZGV4XSxcclxuICAgICAgICAgICAgLi4udXBkYXRlcyxcclxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1MjIwXHU5NjY0XHU2QTIxXHU1NzhCXHJcbiAgICBkZWxldGVNb2RlbChpZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm1vZGVscy5maW5kSW5kZXgobW9kZWwgPT4gbW9kZWwuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1MjIwXHU5NjY0XHU3Njg0XHU2NjJGXHU5RUQ4XHU4QkE0XHU2QTIxXHU1NzhCXHVGRjBDXHU2RTA1XHU5NjY0XHU5RUQ4XHU4QkE0XHU4QkJFXHU3RjZFXHJcbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdE1vZGVsSWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdE1vZGVsSWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zYXZlVG9TdG9yYWdlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2QTIxXHU1NzhCXHJcbiAgICBnZXRBbGxNb2RlbHMoKTogTW9kZWxDb25maWdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLm1vZGVsc107XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU1REYyXHU5QThDXHU4QkMxXHU3Njg0XHU2QTIxXHU1NzhCXHJcbiAgICBnZXRWZXJpZmllZE1vZGVscygpOiBNb2RlbENvbmZpZ1tdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb2RlbHMuZmlsdGVyKG1vZGVsID0+IG1vZGVsLmlzVmVyaWZpZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjgzOVx1NjM2RUlEXHU4M0I3XHU1M0Q2XHU2QTIxXHU1NzhCXHJcbiAgICBnZXRNb2RlbEJ5SWQoaWQ6IHN0cmluZyk6IE1vZGVsQ29uZmlnIHwgbnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWxzLmZpbmQobW9kZWwgPT4gbW9kZWwuaWQgPT09IGlkKSB8fCBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1OEJCRVx1N0Y2RVx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QlxyXG4gICAgc2V0RGVmYXVsdE1vZGVsKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMuZ2V0TW9kZWxCeUlkKGlkKTtcclxuICAgICAgICBpZiAoIW1vZGVsIHx8ICFtb2RlbC5pc1ZlcmlmaWVkKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuZGVmYXVsdE1vZGVsSWQgPSBpZDtcclxuICAgICAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEJcclxuICAgIGdldERlZmF1bHRNb2RlbCgpOiBNb2RlbENvbmZpZyB8IG51bGwge1xyXG4gICAgICAgIGlmICghdGhpcy5kZWZhdWx0TW9kZWxJZCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9kZWxCeUlkKHRoaXMuZGVmYXVsdE1vZGVsSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1ODNCN1x1NTNENlx1OUVEOFx1OEJBNFx1NkEyMVx1NTc4QklEXHJcbiAgICBnZXREZWZhdWx0TW9kZWxJZCgpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0TW9kZWxJZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTlBOENcdThCQzFcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcclxuICAgIGFzeW5jIHZlcmlmeU1vZGVsKGlkOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xyXG4gICAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5nZXRNb2RlbEJ5SWQoaWQpO1xyXG4gICAgICAgIGlmICghbW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnXHU2QTIxXHU1NzhCXHU0RTBEXHU1QjU4XHU1NzI4JyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRlc3RNb2RlbENvbm5lY3Rpb24obW9kZWwpO1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChpZCwgeyBpc1ZlcmlmaWVkOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RlbChpZCwgeyBpc1ZlcmlmaWVkOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZWwoaWQsIHsgaXNWZXJpZmllZDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTc2RjRcdTYzQTVcdTZENEJcdThCRDVcdTZBMjFcdTU3OEJcdTkxNERcdTdGNkVcdUZGMDhcdTRFMERcdTZERkJcdTUyQTBcdTUyMzBcdTdCQTFcdTc0MDZcdTU2NjhcdUZGMDlcclxuICAgIGFzeW5jIHRlc3RNb2RlbENvbmZpZyhjb25maWc6IE9taXQ8TW9kZWxDb25maWcsICdpZCcgfCAnaXNWZXJpZmllZCcgfCAnY3JlYXRlZEF0JyB8ICdsYXN0TW9kaWZpZWQnPik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XHJcbiAgICAgICAgY29uc3QgdGVtcE1vZGVsOiBNb2RlbENvbmZpZyA9IHtcclxuICAgICAgICAgICAgaWQ6ICd0ZW1wJyxcclxuICAgICAgICAgICAgLi4uY29uZmlnLFxyXG4gICAgICAgICAgICBpc1ZlcmlmaWVkOiBmYWxzZSxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLnRlc3RNb2RlbENvbm5lY3Rpb24odGVtcE1vZGVsKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTZENEJcdThCRDVcdTZBMjFcdTU3OEJcdThGREVcdTYzQTVcclxuICAgIHByaXZhdGUgYXN5bmMgdGVzdE1vZGVsQ29ubmVjdGlvbihtb2RlbDogTW9kZWxDb25maWcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlc3RNZXNzYWdlID0gJ1x1NkQ0Qlx1OEJENVx1OEZERVx1NjNBNSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgbW9kZWw6IG1vZGVsLm1vZGVsTmFtZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRlc3RNZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDEwLFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHttb2RlbC5hcGlLZXl9YFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gXHU0RTNBXHU0RTBEXHU1NDBDXHU2M0QwXHU0RjlCXHU1NTQ2XHU2REZCXHU1MkEwXHU3Mjc5XHU2QjhBXHU1OTM0XHU5MEU4XHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5wcm92aWRlciA9PT0gJ3F3ZW4nKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzWydYLURhc2hTY29wZS1TU0UnXSA9ICdkaXNhYmxlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RlbC5wcm92aWRlciA9PT0gJ29wZW5yb3V0ZXInKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzWydIVFRQLVJlZmVyZXInXSA9ICdodHRwczovL29ic2lkaWFuLm1kJztcclxuICAgICAgICAgICAgICAgIGhlYWRlcnNbJ1gtVGl0bGUnXSA9ICdPYnNpZGlhbiBHaXQgQXV0byBDb21taXQnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke21vZGVsLmJhc2VVUkx9L2NoYXQvY29tcGxldGlvbnNgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke2Vycm9yRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCByZXNwb25zZS5zdGF0dXNUZXh0fWAgXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogYFx1OEZERVx1NjNBNVx1NTkzMVx1OEQyNTogJHtlcnJvci5tZXNzYWdlfWAgXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NkUwNVx1N0E3QVx1NjI0MFx1NjcwOVx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVxyXG4gICAgY2xlYXJBbGxNb2RlbHMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tb2RlbHMgPSBbXTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRNb2RlbElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNhdmVUb1N0b3JhZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTVCRkNcdTUxRkFcdTkxNERcdTdGNkVcclxuICAgIGV4cG9ydENvbmZpZygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIG1vZGVsczogdGhpcy5tb2RlbHMsXHJcbiAgICAgICAgICAgIGRlZmF1bHRNb2RlbElkOiB0aGlzLmRlZmF1bHRNb2RlbElkLFxyXG4gICAgICAgICAgICBleHBvcnRlZEF0OiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSwgbnVsbCwgMik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1QkZDXHU1MTY1XHU5MTREXHU3RjZFXHJcbiAgICBpbXBvcnRDb25maWcoY29uZmlnSnNvbjogc3RyaW5nKTogeyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZzsgaW1wb3J0ZWQ6IG51bWJlciB9IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKGNvbmZpZ0pzb24pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFjb25maWcubW9kZWxzIHx8ICFBcnJheS5pc0FycmF5KGNvbmZpZy5tb2RlbHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdcdTY1RTBcdTY1NDhcdTc2ODRcdTkxNERcdTdGNkVcdTY4M0NcdTVGMEYnLCBpbXBvcnRlZDogMCB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgaW1wb3J0ZWQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsQ29uZmlnIG9mIGNvbmZpZy5tb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRNb2RlbENvbmZpZyhtb2RlbENvbmZpZykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1vZGVsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IG1vZGVsQ29uZmlnLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IG1vZGVsQ29uZmlnLm1vZGVsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6IG1vZGVsQ29uZmlnLnByb3ZpZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVVJMOiBtb2RlbENvbmZpZy5iYXNlVVJMLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXk6IG1vZGVsQ29uZmlnLmFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4Q29udGV4dFRva2VuczogbW9kZWxDb25maWcubWF4Q29udGV4dFRva2VucyB8fCA4MDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IG1vZGVsQ29uZmlnLm1heE91dHB1dFRva2VucyB8fCA0MDAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgaW1wb3J0ZWQgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UsIGltcG9ydGVkOiAwIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1OUE4Q1x1OEJDMVx1NkEyMVx1NTc4Qlx1OTE0RFx1N0Y2RVx1NjgzQ1x1NUYwRlxyXG4gICAgcHJpdmF0ZSBpc1ZhbGlkTW9kZWxDb25maWcoY29uZmlnOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gY29uZmlnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBjb25maWcuZGlzcGxheU5hbWUgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBjb25maWcubW9kZWxOYW1lID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnLnByb3ZpZGVyID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnLmJhc2VVUkwgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBjb25maWcuYXBpS2V5ID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgICAgICAgICAodHlwZW9mIGNvbmZpZy5tYXhDb250ZXh0VG9rZW5zID09PSAnbnVtYmVyJyB8fCBjb25maWcubWF4Q29udGV4dFRva2VucyA9PT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAodHlwZW9mIGNvbmZpZy5tYXhPdXRwdXRUb2tlbnMgPT09ICdudW1iZXInIHx8IGNvbmZpZy5tYXhPdXRwdXRUb2tlbnMgPT09IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NTIxQlx1NUVGQVx1NTE2OFx1NUM0MFx1NUI5RVx1NEY4QlxyXG5leHBvcnQgY29uc3QgbW9kZWxDb25maWdNYW5hZ2VyID0gbmV3IE1vZGVsQ29uZmlnTWFuYWdlcigpO1xyXG4iLCAiLy8gXHU2NTcwXHU2MzZFXHU4RkMxXHU3OUZCXHU1NDExXHU1QkZDIC0gXHU1RTJFXHU1MkE5XHU3NTI4XHU2MjM3XHU0RTg2XHU4OUUzXHU2NUIwXHU3Njg0XHU2NTcwXHU2MzZFXHU1QjU4XHU1MEE4XHU2NUI5XHU1RjBGXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRGF0YU1hbmFnZXIgfSBmcm9tICcuL2RhdGEtbWFuYWdlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgRGF0YU1pZ3JhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcHJpdmF0ZSBkYXRhTWFuYWdlcjogRGF0YU1hbmFnZXI7XHJcbiAgICBwcml2YXRlIGhhc09sZERhdGE6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlciwgaGFzT2xkRGF0YTogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5kYXRhTWFuYWdlciA9IGRhdGFNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuaGFzT2xkRGF0YSA9IGhhc09sZERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnZGF0YS1taWdyYXRpb24tbW9kYWwnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaGFzT2xkRGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dNaWdyYXRpb25Db21wbGV0ZVZpZXcoY29udGVudEVsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dOZXdEYXRhU3lzdGVtVmlldyhjb250ZW50RWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNob3dNaWdyYXRpb25Db21wbGV0ZVZpZXcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIC8vIFx1NjgwN1x1OTg5OFxyXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyBcclxuICAgICAgICAgICAgdGV4dDogJ1x1RDgzQ1x1REY4OSBcdTY1NzBcdTYzNkVcdThGQzFcdTc5RkJcdTVCOENcdTYyMTBcdUZGMDEnLCBcclxuICAgICAgICAgICAgY2xzOiAnbW9kYWwtdGl0bGUnIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRpdGxlRWwuc3R5bGUuY29sb3IgPSAndmFyKC0tY29sb3ItZ3JlZW4pJztcclxuICAgICAgICB0aXRsZUVsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIHRpdGxlRWwuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xyXG5cclxuICAgICAgICAvLyBcdThCRjRcdTY2MEVcdTUxODVcdTVCQjlcclxuICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21pZ3JhdGlvbi1jb250ZW50JyB9KTtcclxuICAgICAgICBjb250ZW50RGl2LnN0eWxlLnBhZGRpbmcgPSAnMjBweCc7XHJcbiAgICAgICAgY29udGVudERpdi5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuNic7XHJcblxyXG4gICAgICAgIGNvbnRlbnREaXYuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHU2MEE4XHU3Njg0XHU2NUU3XHU5MTREXHU3RjZFXHU2NTcwXHU2MzZFXHU1REYyXHU2MjEwXHU1MjlGXHU4RkMxXHU3OUZCXHU1MjMwXHU2NUIwXHU3Njg0XHU2NTcwXHU2MzZFXHU1QjU4XHU1MEE4XHU3Q0ZCXHU3RURGXHVGRjAxJyBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU0RTNCXHU4OTgxXHU2NTM5XHU1M0Q4XHJcbiAgICAgICAgY29uc3QgY2hhbmdlc1RpdGxlID0gY29udGVudERpdi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQ0IgXHU0RTNCXHU4OTgxXHU2NTM5XHU1M0Q4JyB9KTtcclxuICAgICAgICBjaGFuZ2VzVGl0bGUuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xyXG4gICAgICAgIGNoYW5nZXNUaXRsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoYW5nZXNMaXN0ID0gY29udGVudERpdi5jcmVhdGVFbCgndWwnKTtcclxuICAgICAgICBjaGFuZ2VzTGlzdC5zdHlsZS5wYWRkaW5nTGVmdCA9ICcyMHB4JztcclxuXHJcbiAgICAgICAgY29uc3QgY2hhbmdlcyA9IFtcclxuICAgICAgICAgICAgJ1x1RDgzRFx1REQxMiBBUElcdTVCQzZcdTk0QTVcdTczQjBcdTU3MjhcdTVERjJcdTUyQTBcdTVCQzZcdTVCNThcdTUwQThcdUZGMENcdTY2RjRcdTUyQTBcdTVCODlcdTUxNjgnLFxyXG4gICAgICAgICAgICAnXHVEODNEXHVEQ0MxIFx1NjI0MFx1NjcwOVx1OTE0RFx1N0Y2RVx1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NTcyOFx1NzJFQ1x1N0FDQlx1NzY4NCBwbHVnaW4tZGF0YS5qc29uIFx1NjU4N1x1NEVGNlx1NEUyRCcsXHJcbiAgICAgICAgICAgICdcdUQ4M0VcdURERjkgXHU1REYyXHU2RTA1XHU3NDA2IGxvY2FsU3RvcmFnZSBcdTRFMkRcdTc2ODRcdTY1RTdcdTY1NzBcdTYzNkUnLFxyXG4gICAgICAgICAgICAnXHVEODNEXHVERTgwIFx1NjNEMlx1NEVGNlx1NTIwNlx1NEVBQlx1NjZGNFx1NjVCOVx1NEZCRlx1RkYwQ1x1NTNFQVx1OTcwMFx1NTkwRFx1NTIzNlx1NjgzOFx1NUZDM1x1NjU4N1x1NEVGNidcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjaGFuZ2VzLmZvckVhY2goY2hhbmdlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGkgPSBjaGFuZ2VzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuICAgICAgICAgICAgbGkudGV4dENvbnRlbnQgPSBjaGFuZ2U7XHJcbiAgICAgICAgICAgIGxpLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc4cHgnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTY1NzBcdTYzNkVcdTY1ODdcdTRFRjZcdTRGNERcdTdGNkVcclxuICAgICAgICBjb25zdCBsb2NhdGlvblRpdGxlID0gY29udGVudERpdi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQ0QgXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU0RjREXHU3RjZFJyB9KTtcclxuICAgICAgICBsb2NhdGlvblRpdGxlLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcclxuICAgICAgICBsb2NhdGlvblRpdGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcclxuXHJcbiAgICAgICAgY29uc3QgbG9jYXRpb25Db2RlID0gY29udGVudERpdi5jcmVhdGVFbCgnY29kZScsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuZGF0YU1hbmFnZXIuZ2V0RGF0YUZpbGVQYXRoKCkgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbG9jYXRpb25Db2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xyXG4gICAgICAgIGxvY2F0aW9uQ29kZS5zdHlsZS5wYWRkaW5nID0gJzhweCAxMnB4JztcclxuICAgICAgICBsb2NhdGlvbkNvZGUuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XHJcbiAgICAgICAgbG9jYXRpb25Db2RlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIGxvY2F0aW9uQ29kZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTVweCc7XHJcblxyXG4gICAgICAgIC8vIFx1OTFDRFx1ODk4MVx1NjNEMFx1OTE5MlxyXG4gICAgICAgIGNvbnN0IHJlbWluZGVyRGl2ID0gY29udGVudERpdi5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdyZW1pbmRlci1ib3gnIH0pO1xyXG4gICAgICAgIHJlbWluZGVyRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIHJlbWluZGVyRGl2LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tY29sb3ItYWNjZW50KSc7XHJcbiAgICAgICAgcmVtaW5kZXJEaXYuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XHJcbiAgICAgICAgcmVtaW5kZXJEaXYuc3R5bGUucGFkZGluZyA9ICcxNXB4JztcclxuICAgICAgICByZW1pbmRlckRpdi5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlbWluZGVyVGl0bGUgPSByZW1pbmRlckRpdi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQTEgXHU1MjA2XHU0RUFCXHU2M0QyXHU0RUY2XHU2NUY2JyB9KTtcclxuICAgICAgICByZW1pbmRlclRpdGxlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWNvbG9yLWFjY2VudCknO1xyXG4gICAgICAgIHJlbWluZGVyVGl0bGUuc3R5bGUubWFyZ2luQm90dG9tID0gJzEwcHgnO1xyXG5cclxuICAgICAgICByZW1pbmRlckRpdi5jcmVhdGVFbCgncCcsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdTczQjBcdTU3MjhcdTYwQThcdTUzRUZcdTRFRTVcdTVCODlcdTUxNjhcdTU3MzBcdTUyMDZcdTRFQUJcdTYzRDJcdTRFRjZcdUZGMENcdTUzRUFcdTk3MDBcdTU5MERcdTUyMzZcdTRFRTVcdTRFMEJcdTRFMDlcdTRFMkFcdTY1ODdcdTRFRjZcdUZGMUEnIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBmaWxlc0xpc3QgPSByZW1pbmRlckRpdi5jcmVhdGVFbCgndWwnKTtcclxuICAgICAgICBbJ21haW4uanMnLCAnc3R5bGVzLmNzcycsICdtYW5pZmVzdC5qc29uJ10uZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGkgPSBmaWxlc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcbiAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gZmlsZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmVtaW5kZXJEaXYuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHU0RTBEXHU4OTgxXHU1OTBEXHU1MjM2IHBsdWdpbi1kYXRhLmpzb24gXHU2NTg3XHU0RUY2XHVGRjBDXHU4RkQ5XHU2ODM3XHU1MTc2XHU0RUQ2XHU0RUJBXHU0RjFBXHU4M0I3XHU1Rjk3XHU0RTAwXHU0RTJBXHU1RTcyXHU1MUMwXHU3Njg0XHU1MjFEXHU1OUNCXHU3MkI2XHU2MDAxXHU2M0QyXHU0RUY2XHUzMDAyJyxcclxuICAgICAgICAgICAgY2xzOiAndGV4dC1tdXRlZCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRCdXR0b25zKGNvbnRhaW5lciwgJ1x1NjIxMVx1NzdFNVx1OTA1M1x1NEU4NicpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd05ld0RhdGFTeXN0ZW1WaWV3KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAvLyBcdTY4MDdcdTk4OThcclxuICAgICAgICBjb25zdCB0aXRsZUVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdUQ4M0NcdUREOTUgXHU2NUIwXHU3Njg0XHU2NTcwXHU2MzZFXHU1QjU4XHU1MEE4XHU3Q0ZCXHU3RURGJywgXHJcbiAgICAgICAgICAgIGNsczogJ21vZGFsLXRpdGxlJyBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aXRsZUVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWNvbG9yLWFjY2VudCknO1xyXG4gICAgICAgIHRpdGxlRWwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgdGl0bGVFbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XHJcblxyXG4gICAgICAgIC8vIFx1OEJGNFx1NjYwRVx1NTE4NVx1NUJCOVxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnREaXYgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbmV3LXN5c3RlbS1jb250ZW50JyB9KTtcclxuICAgICAgICBjb250ZW50RGl2LnN0eWxlLnBhZGRpbmcgPSAnMjBweCc7XHJcbiAgICAgICAgY29udGVudERpdi5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuNic7XHJcblxyXG4gICAgICAgIGNvbnRlbnREaXYuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHU2QjIyXHU4RkNFXHU0RjdGXHU3NTI4IEdpdCBcdTgxRUFcdTUyQThcdTYzRDBcdTRFQTRcdTYzRDJcdTRFRjZcdUZGMDFcdTYyMTFcdTRFRUNcdTRGN0ZcdTc1MjhcdTRFODZcdTUxNjhcdTY1QjBcdTc2ODRcdTY1NzBcdTYzNkVcdTVCNThcdTUwQThcdTdDRkJcdTdFREZcdUZGMENcdThCQTlcdTYwQThcdTc2ODRcdTkxNERcdTdGNkVcdTY2RjRcdTVCODlcdTUxNjhcdTMwMDFcdTY2RjRcdTY2MTNcdTdCQTFcdTc0MDZcdTMwMDInIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTRFM0JcdTg5ODFcdTcyNzlcdTYwMjdcclxuICAgICAgICBjb25zdCBmZWF0dXJlc1RpdGxlID0gY29udGVudERpdi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTI3MjggXHU0RTNCXHU4OTgxXHU3Mjc5XHU2MDI3JyB9KTtcclxuICAgICAgICBmZWF0dXJlc1RpdGxlLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcclxuICAgICAgICBmZWF0dXJlc1RpdGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcclxuXHJcbiAgICAgICAgY29uc3QgZmVhdHVyZXNMaXN0ID0gY29udGVudERpdi5jcmVhdGVFbCgndWwnKTtcclxuICAgICAgICBmZWF0dXJlc0xpc3Quc3R5bGUucGFkZGluZ0xlZnQgPSAnMjBweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gW1xyXG4gICAgICAgICAgICAnXHVEODNEXHVERDEwIEFQSVx1NUJDNlx1OTRBNVx1NTJBMFx1NUJDNlx1NUI1OFx1NTBBOFx1RkYwQ1x1NEZERFx1NjJBNFx1NjBBOFx1NzY4NFx1OTY5MFx1NzlDMScsXHJcbiAgICAgICAgICAgICdcdUQ4M0RcdURDQzEgXHU3MkVDXHU3QUNCXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHVGRjBDXHU5MTREXHU3RjZFXHU0RTBFXHU0RUUzXHU3ODAxXHU1MjA2XHU3OUJCJyxcclxuICAgICAgICAgICAgJ1x1RDgzRFx1REQwNCBcdTgxRUFcdTUyQThcdTY1NzBcdTYzNkVcdTU5MDdcdTRFRkRcdTU0OENcdTYwNjJcdTU5MEQnLFxyXG4gICAgICAgICAgICAnXHVEODNEXHVEQ0U0IFx1N0I4MFx1NTMxNlx1NzY4NFx1NjNEMlx1NEVGNlx1NTIwNlx1NEVBQlx1NkQ0MVx1N0EwQicsXHJcbiAgICAgICAgICAgICdcdUQ4M0NcdURGOUJcdUZFMEYgXHU3MDc1XHU2RDNCXHU3Njg0XHU0RTJBXHU2MDI3XHU1MzE2XHU4QkJFXHU3RjZFXHU5MDA5XHU5ODc5J1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpID0gZmVhdHVyZXNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG4gICAgICAgICAgICBsaS50ZXh0Q29udGVudCA9IGZlYXR1cmU7XHJcbiAgICAgICAgICAgIGxpLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc4cHgnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTVGMDBcdTU5Q0JcdTRGN0ZcdTc1MjhcclxuICAgICAgICBjb25zdCBzdGFydFRpdGxlID0gY29udGVudERpdi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURFODAgXHU1RjAwXHU1OUNCXHU0RjdGXHU3NTI4JyB9KTtcclxuICAgICAgICBzdGFydFRpdGxlLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcclxuICAgICAgICBzdGFydFRpdGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhcnRMaXN0ID0gY29udGVudERpdi5jcmVhdGVFbCgnb2wnKTtcclxuICAgICAgICBzdGFydExpc3Quc3R5bGUucGFkZGluZ0xlZnQgPSAnMjBweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0ZXBzID0gW1xyXG4gICAgICAgICAgICAnXHU1NzI4XHU4QkJFXHU3RjZFXHU0RTJEXHU2REZCXHU1MkEwXHU2MEE4XHU3Njg0XHU3QjJDXHU0RTAwXHU0RTJBQUlcdTZBMjFcdTU3OEInLFxyXG4gICAgICAgICAgICAnXHU5MTREXHU3RjZFXHU2QTIxXHU1NzhCXHU3Njg0QVBJXHU1QkM2XHU5NEE1XHU1NDhDXHU1M0MyXHU2NTcwJyxcclxuICAgICAgICAgICAgJ1x1OUE4Q1x1OEJDMVx1NkEyMVx1NTc4Qlx1OEZERVx1NjNBNVx1NjYyRlx1NTQyNlx1NkI2M1x1NUUzOCcsXHJcbiAgICAgICAgICAgICdcdThCQkVcdTdGNkVcdTRFM0FcdTlFRDhcdThCQTRcdTZBMjFcdTU3OEJcdTVGMDBcdTU5Q0JcdTRGN0ZcdTc1MjgnXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgc3RlcHMuZm9yRWFjaChzdGVwID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGkgPSBzdGFydExpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcbiAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gc3RlcDtcclxuICAgICAgICAgICAgbGkuc3R5bGUubWFyZ2luQm90dG9tID0gJzhweCc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1NjNEMFx1NzkzQVx1Njg0NlxyXG4gICAgICAgIGNvbnN0IHRpcERpdiA9IGNvbnRlbnREaXYuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndGlwLWJveCcgfSk7XHJcbiAgICAgICAgdGlwRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xyXG4gICAgICAgIHRpcERpdi5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWNvbG9yLWdyZWVuKSc7XHJcbiAgICAgICAgdGlwRGl2LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xyXG4gICAgICAgIHRpcERpdi5zdHlsZS5wYWRkaW5nID0gJzE1cHgnO1xyXG4gICAgICAgIHRpcERpdi5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpcFRpdGxlID0gdGlwRGl2LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1x1RDgzRFx1RENBMSBcdTVDMEZcdTYzRDBcdTc5M0EnIH0pO1xyXG4gICAgICAgIHRpcFRpdGxlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWNvbG9yLWdyZWVuKSc7XHJcbiAgICAgICAgdGlwVGl0bGUuc3R5bGUubWFyZ2luQm90dG9tID0gJzEwcHgnO1xyXG5cclxuICAgICAgICB0aXBEaXYuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnXHU2MEE4XHU1M0VGXHU0RUU1XHU5NjhGXHU2NUY2XHU0RjdGXHU3NTI4XCJcdThDMDNcdThCRDVcdTY1NzBcdTYzNkVcdTcyQjZcdTYwMDFcIlx1NTQ3RFx1NEVFNFx1Njc2NVx1NjdFNVx1NzcwQlx1NUY1M1x1NTI0RFx1NzY4NFx1OTE0RFx1N0Y2RVx1NzJCNlx1NjAwMVx1RkYwQ1x1NjIxNlx1NEY3Rlx1NzUyOFwiXHU5MUNEXHU3RjZFXHU2M0QyXHU0RUY2XHU2NTcwXHU2MzZFXCJcdTU0N0RcdTRFRTRcdTYwNjJcdTU5MERcdTUyMzBcdTUyMURcdTU5Q0JcdTcyQjZcdTYwMDFcdTMwMDInIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZEJ1dHRvbnMoY29udGFpbmVyLCAnXHU1RjAwXHU1OUNCXHU5MTREXHU3RjZFJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRCdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHByaW1hcnlCdXR0b25UZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICczMHB4JztcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcxMHB4JztcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcclxuXHJcbiAgICAgICAgLy8gXHU0RTNCXHU4OTgxXHU2MzA5XHU5NEFFXHJcbiAgICAgICAgY29uc3QgcHJpbWFyeUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuICAgICAgICAgICAgdGV4dDogcHJpbWFyeUJ1dHRvblRleHQsIFxyXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJyBcclxuICAgICAgICB9KTtcclxuICAgICAgICBwcmltYXJ5QnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMTBweCAyMHB4JztcclxuICAgICAgICBwcmltYXJ5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1NjdFNVx1NzcwQlx1OEJFNlx1NjBDNVx1NjMwOVx1OTRBRVxyXG4gICAgICAgIGNvbnN0IGRldGFpbHNCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcbiAgICAgICAgICAgIHRleHQ6ICdcdTY3RTVcdTc3MEJcdThCRTZcdTdFQzZcdThCRjRcdTY2MEUnIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRldGFpbHNCdXR0b24uc3R5bGUucGFkZGluZyA9ICcxMHB4IDIwcHgnO1xyXG4gICAgICAgIGRldGFpbHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0RldGFpbGVkSW5mbygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2hvd0RldGFpbGVkSW5mbygpIHtcclxuICAgICAgICBjb25zdCBpbmZvID0gYFxyXG4jIEdpdCBcdTgxRUFcdTUyQThcdTYzRDBcdTRFQTRcdTYzRDJcdTRFRjYgLSBcdTY1NzBcdTYzNkVcdTVCNThcdTUwQThcdThCRjRcdTY2MEVcclxuXHJcbiMjIFx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NEY0RFx1N0Y2RVxyXG4ke3RoaXMuZGF0YU1hbmFnZXIuZ2V0RGF0YUZpbGVQYXRoKCl9XHJcblxyXG4jIyBcdTRFM0JcdTg5ODFcdTY1MzlcdThGREJcclxuMS4gKipcdTVCODlcdTUxNjhcdTYwMjcqKjogQVBJXHU1QkM2XHU5NEE1XHU0RjdGXHU3NTI4QmFzZTY0XHU3RjE2XHU3ODAxXHU1QjU4XHU1MEE4XHJcbjIuICoqXHU3MkVDXHU3QUNCXHU2MDI3Kio6IFx1OTE0RFx1N0Y2RVx1NjU3MFx1NjM2RVx1NEUwRVx1NjNEMlx1NEVGNlx1NEVFM1x1NzgwMVx1NUI4Q1x1NTE2OFx1NTIwNlx1NzlCQiAgXHJcbjMuICoqXHU0RkJGXHU2NDNBXHU2MDI3Kio6IFx1NjZGNFx1NUJCOVx1NjYxM1x1NTIwNlx1NEVBQlx1NTQ4Q1x1NTkwN1x1NEVGRFx1NjNEMlx1NEVGNlxyXG40LiAqKlx1NTNFRlx1N0VGNFx1NjJBNFx1NjAyNyoqOiBcdTZFMDVcdTY2NzBcdTc2ODRcdTY1NzBcdTYzNkVcdTdFRDNcdTY3ODRcdUZGMENcdTRGQkZcdTRFOEVcdTdCQTFcdTc0MDZcclxuXHJcbiMjIFx1OTFDRFx1N0Y2RVx1OEJGNFx1NjYwRVxyXG4tIFx1NTIyMFx1OTY2NFx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NTM3M1x1NTNFRlx1OTFDRFx1N0Y2RVx1NEUzQVx1NTIxRFx1NTlDQlx1NzJCNlx1NjAwMVxyXG4tIFx1NTNFRlx1NEY3Rlx1NzUyOFwiXHU5MUNEXHU3RjZFXHU2M0QyXHU0RUY2XHU2NTcwXHU2MzZFXCJcdTU0N0RcdTRFRTRcclxuLSBcdTYzRDJcdTRFRjZcdTRGMUFcdTgxRUFcdTUyQThcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTlFRDhcdThCQTRcdTkxNERcdTdGNkVcclxuXHJcbiMjIFx1OEMwM1x1OEJENVx1NURFNVx1NTE3N1xyXG4tIFwiXHU4QzAzXHU4QkQ1QUlcdTkxNERcdTdGNkVcIjogXHU2N0U1XHU3NzBCXHU2QTIxXHU1NzhCXHU5MTREXHU3RjZFXHU3MkI2XHU2MDAxXHJcbi0gXCJcdThDMDNcdThCRDVcdTY1NzBcdTYzNkVcdTcyQjZcdTYwMDFcIjogXHU2N0U1XHU3NzBCXHU1QjhDXHU2NTc0XHU2NTcwXHU2MzZFXHU3MkI2XHU2MDAxXHJcbi0gXCJcdTkxQ0RcdTdGNkVcdTYzRDJcdTRFRjZcdTY1NzBcdTYzNkVcIjogXHU2MDYyXHU1OTBEXHU1MjFEXHU1OUNCXHU3MkI2XHU2MDAxXHJcblxyXG5cdTY2RjRcdTU5MUFcdThCRTZcdTdFQzZcdTRGRTFcdTYwNkZcdThCRjdcdTY3RTVcdTc3MEJcdTYzRDJcdTRFRjZcdTc2RUVcdTVGNTVcdTRFMkRcdTc2ODQgREFUQV9TVE9SQUdFLm1kIFx1NjU4N1x1NEVGNlx1MzAwMlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGluZm8pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRTZcdTdFQzZcdThCRjRcdTY2MEVcdTVERjJcdTU5MERcdTUyMzZcdTUyMzBcdTUyNkFcdThEMzRcdTY3N0YnKTtcclxuICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHaXQgQXV0byBDb21taXQgLSBcdThCRTZcdTdFQzZcdThCRjRcdTY2MEU6JywgaW5mbyk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJFNlx1N0VDNlx1OEJGNFx1NjYwRVx1NURGMlx1OEY5M1x1NTFGQVx1NTIzMFx1NjNBN1x1NTIzNlx1NTNGMFx1RkYwQ1x1OEJGN1x1NjMwOUYxMlx1NjdFNVx1NzcwQicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NjU3MFx1NjM2RVx1OEZDMVx1NzlGQlx1NjhDMFx1NjdFNVx1NTY2OFxyXG5leHBvcnQgY2xhc3MgRGF0YU1pZ3JhdGlvbkNoZWNrZXIge1xyXG4gICAgc3RhdGljIGFzeW5jIGNoZWNrQW5kU2hvd01pZ3JhdGlvbklmTmVlZGVkKGFwcDogQXBwLCBkYXRhTWFuYWdlcjogRGF0YU1hbmFnZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTY1RTdcdTc2ODRsb2NhbFN0b3JhZ2VcdTY1NzBcdTYzNkVcclxuICAgICAgICAgICAgY29uc3QgaGFzT2xkTW9kZWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dpdC1hdXRvLWNvbW1pdC1tb2RlbHMnKSAhPT0gbnVsbDtcclxuICAgICAgICAgICAgY29uc3QgaGFzT2xkRGVmYXVsdE1vZGVsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dpdC1hdXRvLWNvbW1pdC1kZWZhdWx0LW1vZGVsJykgIT09IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc09sZERhdGEgPSBoYXNPbGRNb2RlbHMgfHwgaGFzT2xkRGVmYXVsdE1vZGVsO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU5OTk2XHU2QjIxXHU4RkQwXHU4ODRDXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFGaWxlRXhpc3RzID0gYXdhaXQgZGF0YU1hbmFnZXIuZGF0YUZpbGVFeGlzdHMoKTtcclxuICAgICAgICAgICAgY29uc3QgaXNGaXJzdFJ1biA9ICFkYXRhRmlsZUV4aXN0cyAmJiAhaGFzT2xkRGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NTNFQVx1NTcyOFx1NjcwOVx1NjEwRlx1NEU0OVx1NzY4NFx1NjBDNVx1NTFCNVx1NEUwQlx1NjYzRVx1NzkzQVx1OEZDMVx1NzlGQlx1NUJGOVx1OEJERFx1Njg0NlxyXG4gICAgICAgICAgICBpZiAoaGFzT2xkRGF0YSB8fCBpc0ZpcnN0UnVuKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBEYXRhTWlncmF0aW9uTW9kYWwoYXBwLCBkYXRhTWFuYWdlciwgaGFzT2xkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dpdCBBdXRvIENvbW1pdCAtIFx1OEZDMVx1NzlGQlx1NjhDMFx1NjdFNVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBc0U7QUFDdEUsMkJBQXFCO0FBQ3JCLGtCQUEwQjs7O0FDNkMxQixJQUFNLHNCQUFrQztBQUFBLEVBQ3BDLFVBQVU7QUFBQSxJQUNOLG9CQUFvQjtBQUFBLElBQ3BCLG9CQUFvQjtBQUFBLElBQ3BCLGNBQWM7QUFBQSxJQUNkLGNBQWM7QUFBQSxJQUNkLFlBQVk7QUFBQSxJQUNaLGtCQUFrQixDQUFDLE9BQU8sUUFBUSxXQUFXLE9BQU87QUFBQSxJQUNwRCxpQkFBaUIsQ0FBQyxjQUFjLGlCQUFpQixPQUFPO0FBQUEsSUFDeEQsbUJBQW1CO0FBQUEsRUFDdkI7QUFBQSxFQUNBLFFBQVE7QUFBQSxJQUNKLFNBQVMsQ0FBQztBQUFBLElBQ1YsZ0JBQWdCO0FBQUEsRUFDcEI7QUFBQSxFQUNBLGFBQWEsQ0FBQztBQUFBLEVBQ2QsU0FBUztBQUFBLEVBQ1QsY0FBYyxLQUFLLElBQUk7QUFDM0I7QUFFTyxJQUFNLGNBQU4sTUFBa0I7QUFBQSxFQUtyQixZQUFZLEtBQVUsV0FBbUI7QUFDckMsU0FBSyxNQUFNO0FBQ1gsU0FBSyxXQUFXLEdBQUc7QUFDbkIsU0FBSyxPQUFPLEVBQUUsR0FBRyxvQkFBb0I7QUFBQSxFQUN6QztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxhQUE0QjtBQUM5QixRQUFJO0FBQ0EsWUFBTSxLQUFLLFNBQVM7QUFHcEIsWUFBTSxLQUFLLGVBQWU7QUFBQSxJQUU5QixTQUFTLE9BQVA7QUFDRSxjQUFRLElBQUksMEhBQXFDO0FBQ2pELFdBQUssT0FBTyxF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
