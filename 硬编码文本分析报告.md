# 硬编码文本分析报告

## 📋 分析概述

本报告详细分析了 Obsidian Git Plugin 项目中所有需要汉化的硬编码英文文本，按文件类型和优先级进行分类，为后续的汉化工作提供明确的指导。

**分析范围**: 
- 所有 `.ts` 文件（排除 i18n 相关文件）
- 所有 `.svelte` 文件
- 配置和常量文件

**分析日期**: 2024年1月15日  
**总计发现**: 150+ 个硬编码文本项

## 🎯 按优先级分类

### 🔴 高优先级（核心功能界面）

#### 1. 命令定义 (`src/commands.ts`)
**影响**: 用户直接接触的命令名称，优先级最高

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| line 16 | "Edit .gitignore" | "编辑 .gitignore" | 命令名 |
| line 33 | "Open source control view" | "打开源代码控制视图" | 命令名 |
| line 58 | "Open history view" | "打开历史视图" | 命令名 |
| line 84 | "Open diff view" | "打开差异视图" | 命令名 |
| line 104 | "Open file on GitHub" | "在 GitHub 中打开文件" | 命令名 |
| line 112 | "Open file history on GitHub" | "在 GitHub 中查看文件历史" | 命令名 |
| line 120 | "Pull" | "拉取" | 命令名 |
| line 127 | "Fetch" | "获取" | 命令名 |
| line 133 | "Switch to remote branch" | "切换到远程分支" | 命令名 |
| line 140 | "Add file to .gitignore" | "添加文件到 .gitignore" | 命令名 |
| line 155 | "Commit-and-sync" | "提交并同步" | 命令名 |
| line 164 | "Commit-and-sync and then close Obsidian" | "提交同步后关闭 Obsidian" | 命令名 |
| line 174 | "Commit-and-sync with specific message" | "使用自定义消息提交并同步" | 命令名 |
| line 186 | "Commit all changes" | "提交所有更改" | 命令名 |
| line 195 | "Commit all changes with specific message" | "使用自定义消息提交所有更改" | 命令名 |
| line 207 | "Commit" | "提交" | 命令名 |
| line 222 | "Commit staged" | "提交已暂存" | 命令名 |
| line 241 | "Amend staged" | "修改已暂存" | 命令名 |
| line 256 | "Commit with specific message" | "使用自定义消息提交" | 命令名 |
| line 271 | "Commit staged with specific message" | "使用自定义消息提交已暂存" | 命令名 |
| line 287 | "Push" | "推送" | 命令名 |
| line 293 | "Stage current file" | "暂存当前文件" | 命令名 |
| line 306 | "Unstage current file" | "取消暂存当前文件" | 命令名 |
| line 319 | "Edit remotes" | "编辑远程仓库" | 命令名 |
| line 326 | "Remove remote" | "移除远程仓库" | 命令名 |
| line 333 | "Set upstream branch" | "设置上游分支" | 命令名 |
| line 340 | "CAUTION: Delete repository" | "⚠️ 危险：删除仓库" | 命令名 |
| line 372 | "Initialize a new repo" | "初始化新仓库" | 命令名 |
| line 379 | "Clone an existing remote repo" | "克隆现有远程仓库" | 命令名 |

#### 2. 视图配置 (`src/constants.ts`)
**影响**: 主要视图的名称，用户界面核心元素

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| line 69 | "Source Control" | "源代码控制" | 视图名 |
| line 75 | "History" | "历史" | 视图名 |
| line 81 | "Diff view" | "差异视图" | 视图名 |
| line 86 | "Diff View" | "差异视图" | 视图名 |

#### 3. 关键错误和提示消息
**影响**: 用户遇到问题时的关键信息

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| settings.ts:103 | "Git is not ready. When all settings are correct you can configure commit-sync, etc." | "Git 尚未就绪。当所有设置正确后，您可以配置提交同步等功能。" | 错误提示 |
| diffView.ts:131 | "File not found: " + this.state.bFile | "文件未找到：" + this.state.bFile | 错误提示 |

### 🟡 中优先级（设置和配置界面）

#### 1. 设置页面主要选项 (`src/setting/settings.ts`)
**影响**: 设置页面的主要功能标题和描述

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| line 110 | "Automatic" | "自动化" | 分组标题 |
| line 112 | "Split timers for automatic commit and sync" | "为自动提交和同步分别设置计时器" | 设置名 |
| line 236 | "Auto pull interval (minutes)" | "自动拉取间隔（分钟）" | 设置名 |
| line 318 | "Commit message" | "提交消息" | 分组标题 |
| line 321 | "Commit message on manual commit" | "手动提交时的提交消息" | 设置名 |
| line 345 | "Commit message script" | "提交消息脚本" | 设置名 |
| line 366 | "{{date}} placeholder format" | "{{date}} 占位符格式" | 设置名 |
| line 380 | "{{hostname}} placeholder replacement" | "{{hostname}} 占位符替换" | 设置名 |
| line 391 | "Preview commit message" | "预览提交消息" | 设置名 |
| line 403 | "List filenames affected by commit in the commit body" | "在提交正文中列出受影响的文件名" | 设置名 |
| line 414 | "Pull" | "拉取" | 分组标题 |
| line 418 | "Merge strategy" | "合并策略" | 设置名 |
| line 438 | "Pull on startup" | "启动时拉取" | 设置名 |
| line 450 | "Commit-and-sync" | "提交并同步" | 分组标题 |
| line 457 | "Push on commit-and-sync" | "提交同步时推送" | 设置名 |
| line 472 | "Pull on commit-and-sync" | "提交同步时拉取" | 设置名 |
| line 488 | "Line author information" | "行作者信息" | 设置名 |

#### 2. 设置描述文本
**影响**: 设置选项的详细说明

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| line 72 | "Choose the language for the plugin interface" | "选择插件界面的语言" | 设置描述 |
| line 279 | "You will get a pop up to specify your message." | "将弹出窗口让您指定消息。" | 设置描述 |
| line 381 | "Specify custom hostname for every device." | "为每个设备指定自定义主机名。" | 设置描述 |
| line 439 | "Automatically pull commits when Obsidian starts." | "Obsidian 启动时自动拉取提交。" | 设置描述 |
| line 499 | "Show the author of the commit in the history view." | "在历史视图中显示提交的作者。" | 设置描述 |
| line 837 | "Use each line for one path" | "每行使用一个路径" | 设置描述 |
| line 1015 | "Only available on desktop currently." | "目前仅在桌面版可用。" | 设置描述 |
| line 1068 | "If and how the author is displayed" | "是否以及如何显示作者" | 设置描述 |

### 🟢 低优先级（界面细节和辅助文本）

#### 1. 模态框文本
**影响**: 弹窗和对话框中的文本

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| branchModal.ts:14 | "Select branch to checkout" | "选择要检出的分支" | 占位符 |
| discardModal.ts:103 | "Cancel" | "取消" | 按钮文本 |
| ignoreModal.ts:35 | "Save" | "保存" | 按钮文本 |

#### 2. UI 操作提示
**影响**: 界面操作的提示和标签

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| sourceControl.svelte:111 | "Change Layout" | "更改布局" | aria-label |
| sourceControl.svelte:125 | "Refresh" | "刷新" | aria-label |
| sourceControl.svelte:233 | "Commit" | "提交" | aria-label |
| sourceControl.svelte:241 | "Stage all" | "暂存全部" | aria-label |
| sourceControl.svelte:249 | "Unstage all" | "取消暂存全部" | aria-label |
| sourceControl.svelte:257 | "Push" | "推送" | aria-label |
| sourceControl.svelte:265 | "Pull" | "拉取" | aria-label |

#### 3. 快捷键提示
**影响**: 键盘快捷键的显示文本

| 位置 | 英文原文 | 建议中文翻译 | 类型 |
|------|---------|-------------|------|
| settings.ts:958 | "CMD (⌘) + OPTION (⌥) + I" | "CMD (⌘) + OPTION (⌥) + I" | 快捷键（保持原文）|
| settings.ts:960 | "CTRL + SHIFT + I" | "CTRL + SHIFT + I" | 快捷键（保持原文）|

## 📁 需要保留英文的内容

### 技术术语和专有名词
以下内容建议保持英文原文：
- Git 命令关键词
- GitHub 相关文本
- 键盘快捷键组合
- CSS 类名和 HTML 属性
- 调试和开发者相关信息

### 示例
```typescript
// 保持原文
"git-pull-request"  // icon 名称
"data-tooltip-position"  // HTML 属性
"CMD (⌘) + OPTION (⌥) + I"  // 快捷键组合
```

## 🔍 特殊情况分析

### 1. Svelte 组件中的文本
**发现**: Svelte 文件中大部分是 `aria-label` 和操作提示，文本量相对较少
**建议**: 优先处理，因为直接影响用户界面可访问性

### 2. 错误消息和调试信息
**发现**: 存在一些面向开发者的错误信息
**建议**: 根据用户可见性决定是否翻译，用户不可见的调试信息可保持英文

### 3. 配置键值对
**发现**: 某些配置选项的值（如 "merge", "split"）用作内部标识
**建议**: 仅翻译显示文本，保留内部值

## 📊 统计汇总

### 按文件类型统计
- **命令文件**: 29 个命令名称需翻译
- **设置文件**: 40+ 个设置项和描述需翻译
- **常量文件**: 4 个视图名称需翻译
- **Svelte 文件**: 10+ 个 UI 标签需翻译
- **模态框文件**: 5+ 个弹窗文本需翻译

### 按优先级统计
- **🔴 高优先级**: 35+ 项（主要命令和核心界面）
- **🟡 中优先级**: 50+ 项（设置页面和配置）
- **🟢 低优先级**: 20+ 项（界面细节和辅助文本）

### 按工作量估算
- **第一批**: 核心命令和视图名称（预计 2-3 小时）
- **第二批**: 设置页面完整汉化（预计 4-5 小时）
- **第三批**: 界面细节和完善（预计 2-3 小时）

## 🎯 实施建议

### 阶段化处理策略
1. **立即处理**: 高优先级的命令和视图名称
2. **分批处理**: 设置页面按功能模块分批翻译
3. **细节完善**: 最后处理 UI 标签和提示文本

### 技术实施方案
1. **使用 i18n 系统**: 将硬编码文本替换为 `t()` 函数调用
2. **保持原文注释**: 在翻译时添加原文注释便于维护
3. **批量替换**: 对相同文本使用查找替换功能

### 质量保证措施
1. **术语一致性**: 严格按照术语词典标准翻译
2. **上下文检查**: 确保翻译符合使用场景
3. **功能测试**: 每批翻译后进行功能验证

---

## 📋 下一步行动

根据此分析报告，建议按以下顺序进行汉化：

1. ✅ **已完成**: i18n 基础架构
2. 🎯 **下一步**: 开始任务 5 - 汉化 manifest.json
3. 🎯 **接下来**: 开始任务 7 - 汉化主要命令 (commands.ts)
4. 🎯 **然后**: 开始任务 6 - 汉化常量配置 (constants.ts)

**预计时间**: 完成所有硬编码文本汉化需要 8-12 小时工作量

---

**分析人员**: 开发团队  
**分析时间**: 约 2 小时  
**文档版本**: v1.0
